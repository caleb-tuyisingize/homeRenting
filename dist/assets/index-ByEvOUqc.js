import{r as m,j as a,S as Ja,R as Wo,T as Vo,P as Ko,C as Go,I as Jo,a as E,b as Yo,O as Ya,c as Za,d as Zo,e as Xo,f as Qo,g as ei,D as ti,h as ge,i as Xa,u as Qa,k as rr,l as Rr,m as si,n as Pe,o as ri,p as fe,q as ai,s as ni,t as en,v as oi,w as Or,x as ii,A as li,y as st,z as ci,B as tn,E as di,F as ui,G as hi,H as fi,J as pi,K as mi,L as gi,M as vi,N as xi,Q as bi,U as yi,V as wi,W as ki}from"./ui-B04dmX3Y.js";import{a as ji,b as _i,g as Ni}from"./vendor-BWX1YzKK.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();var ps={},ta;function Si(){if(ta)return ps;ta=1;var s=ji();return ps.createRoot=s.createRoot,ps.hydrateRoot=s.hydrateRoot,ps}var Ei=Si();const Ci={en:{home:"Home",properties:"Properties",dashboard:"Dashboard",login:"Login",signup:"Sign Up",logout:"Logout",heroTitle:"Find Your Perfect Home Today",heroSubtitle:"Browse thousands of properties across Rwanda",searchPlaceholder:"Search by location...",searchButton:"Search Properties",house:"House",apartment:"Apartment",land:"Land",nyarugenge:"Nyarugenge",kicukiro:"Kicukiro",gasabo:"Gasabo",bedrooms:"Bedrooms",bathrooms:"Bathrooms",area:"Area",price:"Price",location:"Location",description:"Description",contactOwner:"Contact Owner",scheduleMeeting:"Schedule Meeting",saveToFavorites:"Save to Favorites",removeFromFavorites:"Remove from Favorites",relatedProperties:"Related Properties",noLongerOnSale:"No Longer on Sale",customer:"Customer",owner:"Property Owner",admin:"Administrator",email:"Email",password:"Password",fullName:"Full Name",selectRole:"Select Role",alreadyHaveAccount:"Already have an account?",dontHaveAccount:"Don't have an account?",myProperties:"My Properties",uploadProperty:"Upload Property",myFavorites:"My Favorites",allUsers:"All Users",pendingApprovals:"Pending Approvals",expiredListings:"Expired Listings",title:"Title",propertyType:"Property Type",duration:"Visibility Duration",images:"Images",submit:"Submit",cancel:"Cancel",oneDay:"1 Day",oneWeek:"1 Week",oneMonth:"1 Month",twoMonths:"2 Months",threeMonths:"3 Months",pending:"Pending",approved:"Approved",rejected:"Rejected",sold:"Sold",expired:"Expired",approve:"Approve",reject:"Reject",markAsSold:"Mark as Sold",delete:"Delete",edit:"Edit",view:"View",propertyUploaded:"Property uploaded successfully",propertyUpdated:"Property updated successfully",propertyDeleted:"Property deleted successfully",addedToFavorites:"Added to favorites",removedFromFavorites:"Removed from favorites",logoutSuccess:"Logged out successfully",bookingCreated:"Booking created successfully",myBookings:"My Bookings",bookingRequests:"Booking Requests",bookProperty:"Book Property",convertToOwner:"Convert to Property Owner",conversionFee:"Conversion Fee",aboutUs:"About Us",contactUs:"Contact Us",termsOfService:"Terms of Service",privacyPolicy:"Privacy Policy"},fr:{home:"Accueil",properties:"Propriétés",dashboard:"Tableau de bord",login:"Connexion",signup:"S'inscrire",logout:"Déconnexion",heroTitle:"Trouvez Votre Maison Parfaite Aujourd'hui",heroSubtitle:"Parcourez des milliers de propriétés à travers le Rwanda",searchPlaceholder:"Rechercher par localisation...",searchButton:"Rechercher des Propriétés",house:"Maison",apartment:"Appartement",land:"Terrain",nyarugenge:"Nyarugenge",kicukiro:"Kicukiro",gasabo:"Gasabo",bedrooms:"Chambres",bathrooms:"Salles de bain",area:"Surface",price:"Prix",location:"Emplacement",description:"Description",contactOwner:"Contacter le Propriétaire",scheduleMeeting:"Planifier une Rencontre",saveToFavorites:"Ajouter aux Favoris",removeFromFavorites:"Retirer des Favoris",relatedProperties:"Propriétés Similaires",noLongerOnSale:"Plus en Vente",customer:"Client",owner:"Propriétaire",admin:"Administrateur",email:"Email",password:"Mot de passe",fullName:"Nom complet",selectRole:"Sélectionner le rôle",alreadyHaveAccount:"Vous avez déjà un compte?",dontHaveAccount:"Vous n'avez pas de compte?",myProperties:"Mes Propriétés",uploadProperty:"Télécharger une Propriété",myFavorites:"Mes Favoris",allUsers:"Tous les Utilisateurs",pendingApprovals:"En Attente d'Approbation",expiredListings:"Annonces Expirées",title:"Titre",propertyType:"Type de Propriété",duration:"Durée de Visibilité",images:"Images",submit:"Soumettre",cancel:"Annuler",oneDay:"1 Jour",oneWeek:"1 Semaine",oneMonth:"1 Mois",twoMonths:"2 Mois",threeMonths:"3 Mois",pending:"En attente",approved:"Approuvé",rejected:"Rejeté",sold:"Vendu",expired:"Expiré",approve:"Approuver",reject:"Rejeter",markAsSold:"Marquer comme Vendu",delete:"Supprimer",edit:"Modifier",view:"Voir",propertyUploaded:"Propriété téléchargée avec succès",propertyUpdated:"Propriété mise à jour avec succès",propertyDeleted:"Propriété supprimée avec succès",addedToFavorites:"Ajouté aux favoris",removedFromFavorites:"Retiré des favoris",logoutSuccess:"Déconnecté avec succès",convertToOwner:"Devenir Propriétaire",conversionFee:"Frais de Conversion",aboutUs:"À Propos",contactUs:"Contactez-nous",termsOfService:"Conditions d'utilisation",privacyPolicy:"Politique de Confidentialité"},rw:{home:"Ahabanza",properties:"Imitungo",dashboard:"Ikibaho",login:"Injira",signup:"Iyandikishe",logout:"Sohoka",heroTitle:"Shakisha Inzu Yawe Nziza Uyu Munsi",heroSubtitle:"Reba ibihumbi by'imitungo mu Rwanda",searchPlaceholder:"Shakisha aho utuye...",searchButton:"Shakisha Imitungo",house:"Inzu",apartment:"Apartama",land:"Ubutaka",nyarugenge:"Nyarugenge",kicukiro:"Kicukiro",gasabo:"Gasabo",bedrooms:"Ibyumba byo Kuraramo",bathrooms:"Ibyumba byo Kwogamo",area:"Ubuso",price:"Igiciro",location:"Ahantu",description:"Ibisobanuro",contactOwner:"Hamagara Nyir'umutungo",scheduleMeeting:"Shiraho Inama",saveToFavorites:"Bika mu Bikunzwe",removeFromFavorites:"Kuramo mu Bikunzwe",relatedProperties:"Imitungo Ihuje",noLongerOnSale:"Ntikigurishwa",customer:"Umukiriya",owner:"Nyir'umutungo",admin:"Umuyobozi",email:"Imeri",password:"Ijambo ry'Ibanga",fullName:"Amazina Yombi",selectRole:"Hitamo Uruhare",alreadyHaveAccount:"Ufite konti?",dontHaveAccount:"Nta konti ufite?",myProperties:"Imitungo Yanjye",uploadProperty:"Ohereza Umutungo",myFavorites:"Ibikunzwe Byanjye",allUsers:"Abakoresha Bose",pendingApprovals:"Bitegereje Kwemezwa",expiredListings:"Ibyarengeje Igihe",title:"Umutwe",propertyType:"Ubwoko bw'Umutungo",duration:"Igihe cyo Kugaragara",images:"Amashusho",submit:"Ohereza",cancel:"Kuraho",oneDay:"Umunsi 1",oneWeek:"Icyumweru 1",oneMonth:"Ukwezi 1",twoMonths:"Amezi 2",threeMonths:"Amezi 3",pending:"Bitegereje",approved:"Byemejwe",rejected:"Byanze",sold:"Byagurishijwe",expired:"Byarengeje",approve:"Emeza",reject:"Anga",markAsSold:"Shimangira nk'Ibyagurishijwe",delete:"Siba",edit:"Hindura",view:"Reba",propertyUploaded:"Umutungo woherejwe neza",propertyUpdated:"Umutungo wavuguruwe neza",propertyDeleted:"Umutungo wasibwe neza",addedToFavorites:"Wongewe mu bikunzwe",removedFromFavorites:"Wakuweho mu bikunzwe",logoutSuccess:"Wasohotse neza",convertToOwner:"Hinduka Nyir'umutungo",conversionFee:"Amafaranga yo Guhindura",aboutUs:"Abo Turi",contactUs:"Duhamagare",termsOfService:"Amabwiriza yo Gukoresha",privacyPolicy:"Politiki y'Ibanga"},sw:{home:"Nyumbani",properties:"Mali",dashboard:"Dashibodi",login:"Ingia",signup:"Jisajili",logout:"Toka",heroTitle:"Pata Nyumba Yako Bora Leo",heroSubtitle:"Angalia maelfu ya mali katika Rwanda",searchPlaceholder:"Tafuta kwa eneo...",searchButton:"Tafuta Mali",house:"Nyumba",apartment:"Ghorofa",land:"Ardhi",nyarugenge:"Nyarugenge",kicukiro:"Kicukiro",gasabo:"Gasabo",bedrooms:"Vyumba vya Kulala",bathrooms:"Vyumba vya Kuogea",area:"Eneo",price:"Bei",location:"Mahali",description:"Maelezo",contactOwner:"Wasiliana na Mmiliki",scheduleMeeting:"Panga Mkutano",saveToFavorites:"Hifadhi kwa Vipendwa",removeFromFavorites:"Ondoa kutoka Vipendwa",relatedProperties:"Mali Zinazofanana",noLongerOnSale:"Haiuzwi Tena",customer:"Mteja",owner:"Mmiliki wa Mali",admin:"Msimamizi",email:"Barua pepe",password:"Nywila",fullName:"Jina Kamili",selectRole:"Chagua Jukumu",alreadyHaveAccount:"Tayari una akaunti?",dontHaveAccount:"Hauna akaunti?",myProperties:"Mali Zangu",uploadProperty:"Pakia Mali",myFavorites:"Vipendwa Vyangu",allUsers:"Watumiaji Wote",pendingApprovals:"Inasubiri Idhini",expiredListings:"Orodha Zilizopita Muda",title:"Kichwa",propertyType:"Aina ya Mali",duration:"Muda wa Kuonekana",images:"Picha",submit:"Wasilisha",cancel:"Ghairi",oneDay:"Siku 1",oneWeek:"Wiki 1",oneMonth:"Mwezi 1",twoMonths:"Miezi 2",threeMonths:"Miezi 3",pending:"Inasubiri",approved:"Imeidhinishwa",rejected:"Imekataliwa",sold:"Imeuzwa",expired:"Imepita Muda",approve:"Idhinisha",reject:"Kataa",markAsSold:"Weka kama Imeuzwa",delete:"Futa",edit:"Hariri",view:"Angalia",propertyUploaded:"Mali imepakiwa kwa mafanikio",propertyUpdated:"Mali imesasishwa kwa mafanikio",propertyDeleted:"Mali imefutwa kwa mafanikio",addedToFavorites:"Imeongezwa kwa vipendwa",removedFromFavorites:"Imeondolewa kutoka vipendwa",logoutSuccess:"Umetoka kwa mafanikio",convertToOwner:"Badilika kuwa Mmiliki wa Mali",conversionFee:"Ada ya Ubadilishaji",aboutUs:"Kuhusu Sisi",contactUs:"Wasiliana Nasi",termsOfService:"Masharti ya Huduma",privacyPolicy:"Sera ya Faragha"}},sn=m.createContext(void 0);function Ti({children:s}){const[e,t]=m.useState("en"),r=n=>Ci[e][n]||n;return a.jsx(sn.Provider,{value:{language:e,setLanguage:t,t:r},children:s})}function Oe(){const s=m.useContext(sn);if(!s)throw new Error("useLanguage must be used within a LanguageProvider");return s}const rn=m.createContext(void 0);function Pi({children:s}){const[e,t]=m.useState(!1);m.useEffect(()=>{localStorage.getItem("theme")==="dark"&&(t(!0),document.documentElement.classList.add("dark"))},[]);const r=()=>{t(!e),e?(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light")):(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"))};return a.jsx(rn.Provider,{value:{isDark:e,toggleTheme:r},children:s})}function Ai(){const s=m.useContext(rn);if(!s)throw new Error("useTheme must be used within a ThemeProvider");return s}const Ii="modulepreload",Ri=function(s){return"/"+s},sa={},ls=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){let i=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");n=i(t.map(d=>{if(d=Ri(d),d in sa)return;sa[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Ii,u||(f.as="script"),f.crossOrigin="",f.href=d,c&&f.setAttribute("nonce",c),document.head.appendChild(f),u)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return n.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},Oi=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>ls(async()=>{const{default:r}=await Promise.resolve().then(()=>Wt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class $r extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class ra extends $r{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class aa extends $r{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class na extends $r{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ar;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(ar||(ar={}));var $i=function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function l(u){try{d(r.next(u))}catch(h){i(h)}}function c(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):n(u.value).then(l,c)}d((r=r.apply(s,e||[])).next())})};class Di{constructor(e,{headers:t={},customFetch:r,region:n=ar.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=Oi(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return $i(this,arguments,void 0,function*(t,r={}){var n;try{const{headers:o,method:i,body:l,signal:c}=r;let d={},{region:u}=r;u||(u=this.region);const h=new URL(`${this.url}/${t}`);u&&u!=="any"&&(d["x-region"]=u,h.searchParams.set("forceFunctionRegion",u));let f;l&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",f=l):typeof l=="string"?(d["Content-Type"]="text/plain",f=l):typeof FormData<"u"&&l instanceof FormData?f=l:(d["Content-Type"]="application/json",f=JSON.stringify(l)));const p=yield this.fetch(h.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),o),body:f,signal:c}).catch(y=>{throw y.name==="AbortError"?y:new ra(y)}),g=p.headers.get("x-relay-error");if(g&&g==="true")throw new aa(p);if(!p.ok)throw new na(p);let v=((n=p.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),x;return v==="application/json"?x=yield p.json():v==="application/octet-stream"?x=yield p.blob():v==="text/event-stream"?x=p:v==="multipart/form-data"?x=yield p.formData():x=yield p.text(),{data:x,error:null,response:p}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new ra(o)}:{data:null,error:o,response:o instanceof na||o instanceof aa?o.context:void 0}}})}}var xe={},Et={},Ct={},Tt={},Pt={},At={},Mi=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},qt=Mi();const Li=qt.fetch,an=qt.fetch.bind(qt),nn=qt.Headers,Ui=qt.Request,Fi=qt.Response,Wt=Object.freeze(Object.defineProperty({__proto__:null,Headers:nn,Request:Ui,Response:Fi,default:an,fetch:Li},Symbol.toStringTag,{value:"Module"})),Bi=_i(Wt);var ms={},oa;function on(){if(oa)return ms;oa=1,Object.defineProperty(ms,"__esModule",{value:!0});class s extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return ms.default=s,ms}var ia;function ln(){if(ia)return At;ia=1;var s=At&&At.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(At,"__esModule",{value:!0});const e=s(Bi),t=s(on());class r{constructor(o){var i,l;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(i=o.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=o.signal,this.isMaybeSingle=(l=o.isMaybeSingle)!==null&&l!==void 0?l:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,i){return this.headers=new Headers(this.headers),this.headers.set(o,i),this}then(o,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var u,h,f,p;let g=null,v=null,x=null,y=d.status,w=d.statusText;if(d.ok){if(this.method!=="HEAD"){const S=await d.text();S===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?v=S:v=JSON.parse(S))}const N=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),T=(f=d.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");N&&T&&T.length>1&&(x=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(g={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,x=null,y=406,w="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const N=await d.text();try{g=JSON.parse(N),Array.isArray(g)&&d.status===404&&(v=[],g=null,y=200,w="OK")}catch{d.status===404&&N===""?(y=204,w="No Content"):g={message:N}}if(g&&this.isMaybeSingle&&(!((p=g?.details)===null||p===void 0)&&p.includes("0 rows"))&&(g=null,y=200,w="OK"),g&&this.shouldThrowOnError)throw new t.default(g)}return{error:g,data:v,count:x,status:y,statusText:w}});return this.shouldThrowOnError||(c=c.catch(d=>{var u,h,f;return{error:{message:`${(u=d?.name)!==null&&u!==void 0?u:"FetchError"}: ${d?.message}`,details:`${(h=d?.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=d?.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),c.then(o,i)}returns(){return this}overrideTypes(){return this}}return At.default=r,At}var la;function cn(){if(la)return Pt;la=1;var s=Pt&&Pt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pt,"__esModule",{value:!0});const e=s(ln());class t extends e.default{select(n){let o=!1;const i=(n??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:o=!0,nullsFirst:i,foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.order`:"order",u=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${u?`${u},`:""}${n}.${o?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:o,referencedTable:i=o}={}){const l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(l,`${n}`),this}range(n,o,{foreignTable:i,referencedTable:l=i}={}){const c=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${n}`),this.url.searchParams.set(d,`${o-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:o=!1,settings:i=!1,buffers:l=!1,wal:c=!1,format:d="text"}={}){var u;const h=[n?"analyze":null,o?"verbose":null,i?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${f}"; options=${h};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}}return Pt.default=t,Pt}var ca;function Dr(){if(ca)return Tt;ca=1;var s=Tt&&Tt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Tt,"__esModule",{value:!0});const e=s(cn());class t extends e.default{eq(n,o){return this.url.searchParams.append(n,`eq.${o}`),this}neq(n,o){return this.url.searchParams.append(n,`neq.${o}`),this}gt(n,o){return this.url.searchParams.append(n,`gt.${o}`),this}gte(n,o){return this.url.searchParams.append(n,`gte.${o}`),this}lt(n,o){return this.url.searchParams.append(n,`lt.${o}`),this}lte(n,o){return this.url.searchParams.append(n,`lte.${o}`),this}like(n,o){return this.url.searchParams.append(n,`like.${o}`),this}likeAllOf(n,o){return this.url.searchParams.append(n,`like(all).{${o.join(",")}}`),this}likeAnyOf(n,o){return this.url.searchParams.append(n,`like(any).{${o.join(",")}}`),this}ilike(n,o){return this.url.searchParams.append(n,`ilike.${o}`),this}ilikeAllOf(n,o){return this.url.searchParams.append(n,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(n,o){return this.url.searchParams.append(n,`ilike(any).{${o.join(",")}}`),this}is(n,o){return this.url.searchParams.append(n,`is.${o}`),this}in(n,o){const i=Array.from(new Set(o)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(n,`in.(${i})`),this}contains(n,o){return typeof o=="string"?this.url.searchParams.append(n,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(n,`cs.{${o.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(o)}`),this}containedBy(n,o){return typeof o=="string"?this.url.searchParams.append(n,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(n,`cd.{${o.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(o)}`),this}rangeGt(n,o){return this.url.searchParams.append(n,`sr.${o}`),this}rangeGte(n,o){return this.url.searchParams.append(n,`nxl.${o}`),this}rangeLt(n,o){return this.url.searchParams.append(n,`sl.${o}`),this}rangeLte(n,o){return this.url.searchParams.append(n,`nxr.${o}`),this}rangeAdjacent(n,o){return this.url.searchParams.append(n,`adj.${o}`),this}overlaps(n,o){return typeof o=="string"?this.url.searchParams.append(n,`ov.${o}`):this.url.searchParams.append(n,`ov.{${o.join(",")}}`),this}textSearch(n,o,{config:i,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const d=i===void 0?"":`(${i})`;return this.url.searchParams.append(n,`${c}fts${d}.${o}`),this}match(n){return Object.entries(n).forEach(([o,i])=>{this.url.searchParams.append(o,`eq.${i}`)}),this}not(n,o,i){return this.url.searchParams.append(n,`not.${o}.${i}`),this}or(n,{foreignTable:o,referencedTable:i=o}={}){const l=i?`${i}.or`:"or";return this.url.searchParams.append(l,`(${n})`),this}filter(n,o,i){return this.url.searchParams.append(n,`${o}.${i}`),this}}return Tt.default=t,Tt}var da;function dn(){if(da)return Ct;da=1;var s=Ct&&Ct.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ct,"__esModule",{value:!0});const e=s(Dr());class t{constructor(n,{headers:o={},schema:i,fetch:l}){this.url=n,this.headers=new Headers(o),this.schema=i,this.fetch=l}select(n,o){const{head:i=!1,count:l}=o??{},c=i?"HEAD":"GET";let d=!1;const u=(n??"*").split("").map(h=>/\s/.test(h)&&!d?"":(h==='"'&&(d=!d),h)).join("");return this.url.searchParams.set("select",u),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:o,defaultToNull:i=!0}={}){var l;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const d=n.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(d.length>0){const u=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(n,{onConflict:o,ignoreDuplicates:i=!1,count:l,defaultToNull:c=!0}={}){var d;const u="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const h=n.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(h.length>0){const f=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(n,{count:o}={}){var i;const l="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:n}={}){var o;const i="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return Ct.default=t,Ct}var ua;function zi(){if(ua)return Et;ua=1;var s=Et&&Et.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Et,"__esModule",{value:!0});const e=s(dn()),t=s(Dr());class r{constructor(o,{headers:i={},schema:l,fetch:c}={}){this.url=o,this.headers=new Headers(i),this.schemaName=l,this.fetch=c}from(o){const i=new URL(`${this.url}/${o}`);return new e.default(i,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new r(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,i={},{head:l=!1,get:c=!1,count:d}={}){var u;let h;const f=new URL(`${this.url}/rpc/${o}`);let p;l||c?(h=l?"HEAD":"GET",Object.entries(i).filter(([v,x])=>x!==void 0).map(([v,x])=>[v,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([v,x])=>{f.searchParams.append(v,x)})):(h="POST",p=i);const g=new Headers(this.headers);return d&&g.set("Prefer",`count=${d}`),new t.default({method:h,url:f,headers:g,schema:this.schemaName,body:p,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Et.default=r,Et}var ha;function Hi(){if(ha)return xe;ha=1;var s=xe&&xe.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(xe,"__esModule",{value:!0}),xe.PostgrestError=xe.PostgrestBuilder=xe.PostgrestTransformBuilder=xe.PostgrestFilterBuilder=xe.PostgrestQueryBuilder=xe.PostgrestClient=void 0;const e=s(zi());xe.PostgrestClient=e.default;const t=s(dn());xe.PostgrestQueryBuilder=t.default;const r=s(Dr());xe.PostgrestFilterBuilder=r.default;const n=s(cn());xe.PostgrestTransformBuilder=n.default;const o=s(ln());xe.PostgrestBuilder=o.default;const i=s(on());return xe.PostgrestError=i.default,xe.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:n.default,PostgrestBuilder:o.default,PostgrestError:i.default},xe}var qi=Hi();const Wi=Ni(qi),{PostgrestClient:Vi,PostgrestQueryBuilder:Vf,PostgrestFilterBuilder:Kf,PostgrestTransformBuilder:Gf,PostgrestBuilder:Jf,PostgrestError:Yf}=Wi;class Ki{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,n=parseInt(r.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Gi="2.75.0",Ji=`realtime-js/${Gi}`,Yi="1.0.0",nr=1e4,Zi=1e3,Xi=100;var ts;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(ts||(ts={}));var me;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(me||(me={}));var Fe;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Fe||(Fe={}));var or;(function(s){s.websocket="websocket"})(or||(or={}));var ft;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(ft||(ft={}));class Qi{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),o=t.getUint8(2);let i=this.HEADER_LENGTH+2;const l=r.decode(e.slice(i,i+n));i=i+n;const c=r.decode(e.slice(i,i+o));i=i+o;const d=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class un{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ae;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(ae||(ae={}));const fa=(s,e,t={})=>{var r;const n=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,i)=>(o[i]=el(i,s,e,n),o),{}):{}},el=(s,e,t,r)=>{const n=e.find(l=>l.name===s),o=n?.type,i=t[s];return o&&!r.includes(o)?hn(o,i):ir(i)},hn=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return al(e,t)}switch(s){case ae.bool:return tl(e);case ae.float4:case ae.float8:case ae.int2:case ae.int4:case ae.int8:case ae.numeric:case ae.oid:return sl(e);case ae.json:case ae.jsonb:return rl(e);case ae.timestamp:return nl(e);case ae.abstime:case ae.date:case ae.daterange:case ae.int4range:case ae.int8range:case ae.money:case ae.reltime:case ae.text:case ae.time:case ae.timestamptz:case ae.timetz:case ae.tsrange:case ae.tstzrange:return ir(e);default:return ir(e)}},ir=s=>s,tl=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},sl=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},rl=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},al=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,r=s[t];if(s[0]==="{"&&r==="}"){let o;const i=s.slice(1,t);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>hn(e,l))}return s},nl=s=>typeof s=="string"?s.replace(" ","T"):s,fn=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class qs{constructor(e,t,r={},n=nr){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var pa;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(pa||(pa={}));class ss{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ss.syncState(this.state,n,o,i),this.pendingDiffs.forEach(c=>{this.state=ss.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},n=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=ss.syncDiff(this.state,n,o,i),l())}),this.onJoin((n,o,i)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:o,newPresences:i})}),this.onLeave((n,o,i)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){const o=this.cloneDeep(e),i=this.transformState(t),l={},c={};return this.map(o,(d,u)=>{i[d]||(c[d]=u)}),this.map(i,(d,u)=>{const h=o[d];if(h){const f=u.map(x=>x.presence_ref),p=h.map(x=>x.presence_ref),g=u.filter(x=>p.indexOf(x.presence_ref)<0),v=h.filter(x=>f.indexOf(x.presence_ref)<0);g.length>0&&(l[d]=g),v.length>0&&(c[d]=v)}else l[d]=u}),this.syncDiff(o,{joins:l,leaves:c},r,n)}static syncDiff(e,t,r,n){const{joins:o,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(o,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);e[l].unshift(...f)}r(l,u,c)}),this.map(i,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,n(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return"metas"in n?t[r]=n.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ma;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(ma||(ma={}));var rs;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(rs||(rs={}));var Ge;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Ge||(Ge={}));class Mr{constructor(e,t={config:{}},r){var n,o;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=me.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new qs(this,Fe.join,this.params,this.timeout),this.rejoinTimer=new un(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=me.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=me.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=me.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=me.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=me.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fe.reply,{},(i,l)=>{this._trigger(this._replyEventName(l),i)}),this.presence=new ss(this),this.broadcastEndpointURL=fn(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,n,o;if(this.socket.isConnected()||this.socket.connect(),this.state==me.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,d=(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&n!==void 0?n:[],u=!!this.bindings[rs.PRESENCE]&&this.bindings[rs.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,h={},f={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e?.(Ge.CHANNEL_ERROR,p)),this._onClose(()=>e?.(Ge.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:p})=>{var g;if(this.socket.setAuth(),p===void 0){e?.(Ge.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,x=(g=v?.length)!==null&&g!==void 0?g:0,y=[];for(let w=0;w<x;w++){const b=v[w],{filter:{event:N,schema:T,table:S,filter:O}}=b,C=p&&p[w];if(C&&C.event===N&&C.schema===T&&C.table===S&&C.filter===O)y.push(Object.assign(Object.assign({},b),{id:C.id}));else{this.unsubscribe(),this.state=me.errored,e?.(Ge.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Ge.SUBSCRIBED);return}}).receive("error",p=>{this.state=me.errored,e?.(Ge.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e?.(Ge.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===me.joined&&e===rs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=me.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fe.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new qs(this,Fe.leave,{},e),r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=me.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const n=new AbortController,o=setTimeout(()=>n.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(o),i}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new qs(this,e,t,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Xi){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,o;const i=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Fe;if(r&&[l,c,d,u].indexOf(i)>=0&&r!==this._joinRef())return;let f=this._onMessage(i,t,r);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var g,v,x;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(v=p.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===i}).map(p=>p.callback(f,r)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var g,v,x,y,w,b;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const N=p.id,T=(g=p.filter)===null||g===void 0?void 0:g.event;return N&&((v=t.ids)===null||v===void 0?void 0:v.includes(N))&&(T==="*"||T?.toLocaleLowerCase()===((x=t.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const N=(w=(y=p?.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return N==="*"||N===((b=t?.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:v,table:x,commit_timestamp:y,type:w,errors:b}=g;f=Object.assign(Object.assign({},{schema:v,table:x,commit_timestamp:y,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(g))}p.callback(f,r)})}_isClosed(){return this.state===me.closed}_isJoined(){return this.state===me.joined}_isJoining(){return this.state===me.joining}_isLeaving(){return this.state===me.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const n=e.toLocaleLowerCase(),o={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(o):this.bindings[n]=[o],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(n=>{var o;return!(((o=n.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Mr.isEqual(n.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Fe.close,{},e)}_onError(e){this._on(Fe.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=me.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=fa(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=fa(e.columns,e.old_record)),t}}const Ws=()=>{},gs={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ol=[1e3,2e3,5e3,1e4],il=1e4,ll=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class cl{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=nr,this.transport=null,this.heartbeatIntervalMs=gs.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ws,this.ref=0,this.reconnectTimer=null,this.logger=Ws,this.conn=null,this.sendBuffer=[],this.serializer=new Qi,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>{let o;return n?o=n:typeof fetch>"u"?o=(...i)=>ls(async()=>{const{default:l}=await Promise.resolve().then(()=>Wt);return{default:l}},void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...i)=>o(...i)},!(!((r=t?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${or.websocket}`,this.httpEndpoint=fn(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ki.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Yi}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ts.connecting:return ft.Connecting;case ts.open:return ft.Open;case ts.closing:return ft.Closing;default:return ft.Closed}}isConnected(){return this.connectionState()===ft.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(o=>o.topic===r);if(n)return n;{const o=new Mr(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:r,payload:n,ref:o}=e,i=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${r} (${o})`,n),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Zi,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},gs.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:n,payload:o,ref:i}=t,l=i?`(${i})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${n} ${l}`.trim(),o),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(n,o,i)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Fe.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${r}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([ll],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const n={access_token:t,version:Ji};t&&r.updateJoinPayload(n),r.joinedOnce&&r._isJoined()&&r._push(Fe.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new un(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},gs.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,n,o,i,l,c,d,u;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:nr,this.heartbeatIntervalMs=(n=e?.heartbeatIntervalMs)!==null&&n!==void 0?n:gs.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=e?.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=e?.heartbeatCallback)!==null&&l!==void 0?l:Ws,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e?.reconnectAfterMs)!==null&&c!==void 0?c:(h=>ol[h-1]||il),this.encode=(d=e?.encode)!==null&&d!==void 0?d:((h,f)=>f(JSON.stringify(h))),this.decode=(u=e?.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Lr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function he(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class dl extends Lr{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class lr extends Lr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ul=function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function l(u){try{d(r.next(u))}catch(h){i(h)}}function c(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):n(u.value).then(l,c)}d((r=r.apply(s,e||[])).next())})};const pn=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>ls(async()=>{const{default:r}=await Promise.resolve().then(()=>Wt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},hl=()=>ul(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ls(()=>Promise.resolve().then(()=>Wt),void 0)).Response:Response}),cr=s=>{if(Array.isArray(s))return s.map(t=>cr(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,r])=>{const n=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[n]=cr(r)}),e},fl=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)};var kt=function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function l(u){try{d(r.next(u))}catch(h){i(h)}}function c(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):n(u.value).then(l,c)}d((r=r.apply(s,e||[])).next())})};const Vs=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),pl=(s,e,t)=>kt(void 0,void 0,void 0,function*(){const r=yield hl();s instanceof r&&!t?.noResolveJson?s.json().then(n=>{const o=s.status||500,i=n?.statusCode||o+"";e(new dl(Vs(n),o,i))}).catch(n=>{e(new lr(Vs(n),n))}):e(new lr(Vs(s),s))}),ml=(s,e,t,r)=>{const n={method:s,headers:e?.headers||{}};return s==="GET"||!r?n:(fl(r)?(n.headers=Object.assign({"Content-Type":"application/json"},e?.headers),n.body=JSON.stringify(r)):n.body=r,e?.duplex&&(n.duplex=e.duplex),Object.assign(Object.assign({},n),t))};function cs(s,e,t,r,n,o){return kt(this,void 0,void 0,function*(){return new Promise((i,l)=>{s(t,ml(e,r,n,o)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>pl(c,l,r))})})}function ks(s,e,t,r){return kt(this,void 0,void 0,function*(){return cs(s,"GET",e,t,r)})}function He(s,e,t,r,n){return kt(this,void 0,void 0,function*(){return cs(s,"POST",e,r,n,t)})}function dr(s,e,t,r,n){return kt(this,void 0,void 0,function*(){return cs(s,"PUT",e,r,n,t)})}function gl(s,e,t,r){return kt(this,void 0,void 0,function*(){return cs(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function mn(s,e,t,r,n){return kt(this,void 0,void 0,function*(){return cs(s,"DELETE",e,r,n,t)})}var vl=function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function l(u){try{d(r.next(u))}catch(h){i(h)}}function c(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):n(u.value).then(l,c)}d((r=r.apply(s,e||[])).next())})};class xl{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return vl(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(he(e))return{data:null,error:e};throw e}})}}var bl=function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function l(u){try{d(r.next(u))}catch(h){i(h)}}function c(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):n(u.value).then(l,c)}d((r=r.apply(s,e||[])).next())})};class yl{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new xl(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return bl(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(he(e))return{data:null,error:e};throw e}})}}var je=function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function l(u){try{d(r.next(u))}catch(h){i(h)}}function c(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):n(u.value).then(l,c)}d((r=r.apply(s,e||[])).next())})};const wl={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ga={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class kl{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=pn(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,n){return je(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},ga),n);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n?.headers&&(l=Object.assign(Object.assign({},l),n.headers));const d=this._removeEmptyFolders(t),u=this._getFinalPath(d),h=yield(e=="PUT"?dr:He)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:l},i?.duplex?{duplex:i.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(he(o))return{data:null,error:o};throw o}})}upload(e,t,r){return je(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return je(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:ga.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield dr(this.fetch,l.toString(),c,{headers:u});return{data:{path:o,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(he(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return je(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);t?.upsert&&(n["x-upsert"]="true");const o=yield He(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new Lr("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}update(e,t,r){return je(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return je(this,void 0,void 0,function*(){try{return{data:yield He(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}})}copy(e,t,r){return je(this,void 0,void 0,function*(){try{return{data:{path:(yield He(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,r){return je(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),o=yield He(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return je(this,void 0,void 0,function*(){try{const n=yield He(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}})}download(e,t){const n=typeof t?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(t?.transform||{}),i=o?`?${o}`:"",l=this._getFinalPath(e),c=()=>ks(this.fetch,`${this.url}/${n}/${l}${i}`,{headers:this.headers,noResolveJson:!0});return new yl(c,this.shouldThrowOnError)}info(e){return je(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield ks(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:cr(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}exists(e){return je(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield gl(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r)&&r instanceof lr){const n=r.originalError;if([400,404].includes(n?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&n.push(o);const l=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(e){return je(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(he(t))return{data:null,error:t};throw t}})}list(e,t,r){return je(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},wl),t),{prefix:e||""});return{data:yield He(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}})}listV2(e,t){return je(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield He(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const jl="2.75.0",_l={"X-Client-Info":`storage-js/${jl}`};var It=function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function l(u){try{d(r.next(u))}catch(h){i(h)}}function c(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):n(u.value).then(l,c)}d((r=r.apply(s,e||[])).next())})};class Nl{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const o=new URL(e);n?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_l),t),this.fetch=pn(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return It(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(he(e))return{data:null,error:e};throw e}})}getBucket(e){return It(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(he(t))return{data:null,error:t};throw t}})}createBucket(e){return It(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield He(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return It(this,void 0,void 0,function*(){try{return{data:yield dr(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}})}emptyBucket(e){return It(this,void 0,void 0,function*(){try{return{data:yield He(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(he(t))return{data:null,error:t};throw t}})}deleteBucket(e){return It(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(he(t))return{data:null,error:t};throw t}})}}class Sl extends Nl{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new kl(this.url,this.headers,e,this.fetch)}}const El="2.75.0";let Qt="";typeof Deno<"u"?Qt="deno":typeof document<"u"?Qt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Qt="react-native":Qt="node";const Cl={"X-Client-Info":`supabase-js-${Qt}/${El}`},Tl={headers:Cl},Pl={schema:"public"},Al={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Il={};var Rl=function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function l(u){try{d(r.next(u))}catch(h){i(h)}}function c(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):n(u.value).then(l,c)}d((r=r.apply(s,e||[])).next())})};const Ol=s=>{let e;return s?e=s:typeof fetch>"u"?e=an:e=fetch,(...t)=>e(...t)},$l=()=>typeof Headers>"u"?nn:Headers,Dl=(s,e,t)=>{const r=Ol(t),n=$l();return(o,i)=>Rl(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:s;let d=new n(i?.headers);return d.has("apikey")||d.set("apikey",s),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},i),{headers:d}))})};var Ml=function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function l(u){try{d(r.next(u))}catch(h){i(h)}}function c(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):n(u.value).then(l,c)}d((r=r.apply(s,e||[])).next())})};function Ll(s){return s.endsWith("/")?s:s+"/"}function Ul(s,e){var t,r;const{db:n,auth:o,realtime:i,global:l}=s,{db:c,auth:d,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(t=h?.headers)!==null&&t!==void 0?t:{}),(r=l?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Ml(this,void 0,void 0,function*(){return""})};return s.accessToken?f.accessToken=s.accessToken:delete f.accessToken,f}function Fl(s){const e=s?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ll(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const gn="2.75.0",Ut=30*1e3,ur=3,Ks=ur*Ut,Bl="http://localhost:9999",zl="supabase.auth.token",Hl={"X-Client-Info":`gotrue-js/${gn}`},hr="X-Supabase-Api-Version",vn={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ql=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Wl=600*1e3;class ns extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function D(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class Vl extends ns{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function Kl(s){return D(s)&&s.name==="AuthApiError"}class pt extends ns{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class nt extends ns{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class et extends nt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Gl(s){return D(s)&&s.name==="AuthSessionMissingError"}class Rt extends nt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class vs extends nt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class xs extends nt{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Jl(s){return D(s)&&s.name==="AuthImplicitGrantRedirectError"}class va extends nt{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fr extends nt{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Gs(s){return D(s)&&s.name==="AuthRetryableFetchError"}class xa extends nt{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class pr extends nt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const js="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ba=` 	
\r=`.split(""),Yl=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<ba.length;e+=1)s[ba[e].charCodeAt(0)]=-2;for(let e=0;e<js.length;e+=1)s[js[e].charCodeAt(0)]=e;return s})();function ya(s,e,t){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(js[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(js[r]),e.queuedBits-=6}}function xn(s,e,t){const r=Yl[s];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function wa(s){const e=[],t=i=>{e.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},o=i=>{Ql(i,r,t)};for(let i=0;i<s.length;i+=1)xn(s.charCodeAt(i),n,o);return e.join("")}function Zl(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function Xl(s,e){for(let t=0;t<s.length;t+=1){let r=s.charCodeAt(t);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(s.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}Zl(r,e)}}function Ql(s,e,t){if(e.utf8seq===0){if(s<=127){t(s);return}for(let r=1;r<6;r+=1)if((s>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Bt(s){const e=[],t={queue:0,queuedBits:0},r=n=>{e.push(n)};for(let n=0;n<s.length;n+=1)xn(s.charCodeAt(n),t,r);return new Uint8Array(e)}function ec(s){const e=[];return Xl(s,t=>e.push(t)),new Uint8Array(e)}function gt(s){const e=[],t={queue:0,queuedBits:0},r=n=>{e.push(n)};return s.forEach(n=>ya(n,t,r)),ya(null,t,r),e.join("")}function tc(s){return Math.round(Date.now()/1e3)+s}function sc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const Te=()=>typeof window<"u"&&typeof document<"u",ct={tested:!1,writable:!1},bn=()=>{if(!Te())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ct.tested)return ct.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),ct.tested=!0,ct.writable=!0}catch{ct.tested=!0,ct.writable=!1}return ct.writable};function rc(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,o)=>{e[o]=n})}catch{}return t.searchParams.forEach((r,n)=>{e[n]=r}),e}const yn=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>ls(async()=>{const{default:r}=await Promise.resolve().then(()=>Wt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},ac=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Ft=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},dt=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Xe=async(s,e)=>{await s.removeItem(e)};class Ts{constructor(){this.promise=new Ts.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ts.promiseConstructor=Promise;function Js(s){const e=s.split(".");if(e.length!==3)throw new pr("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!ql.test(e[r]))throw new pr("JWT not in base64url format");return{header:JSON.parse(wa(e[0])),payload:JSON.parse(wa(e[1])),signature:Bt(e[2]),raw:{header:e[0],payload:e[1]}}}async function nc(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function oc(s,e){return new Promise((r,n)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await s(o);if(!e(o,null,i)){r(i);return}}catch(i){if(!e(o,i)){n(i);return}}})()})}function ic(s){return("0"+s.toString(16)).substr(-2)}function lc(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let n="";for(let o=0;o<56;o++)n+=t.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,ic).join("")}async function cc(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(o=>String.fromCharCode(o)).join("")}async function dc(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await cc(s);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ot(s,e,t=!1){const r=lc();let n=r;t&&(n+="/PASSWORD_RECOVERY"),await Ft(s,`${e}-code-verifier`,n);const o=await dc(r);return[o,r===o?"plain":"s256"]}const uc=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hc(s){const e=s.headers.get(hr);if(!e||!e.match(uc))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function fc(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function pc(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const mc=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function $t(s){if(!mc.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ys(){const s={};return new Proxy(s,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ka(s){return JSON.parse(JSON.stringify(s))}var gc=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(t[r[n]]=s[r[n]]);return t};const ht=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),vc=[502,503,504];async function ja(s){var e;if(!ac(s))throw new fr(ht(s),0);if(vc.includes(s.status))throw new fr(ht(s),s.status);let t;try{t=await s.json()}catch(o){throw new pt(ht(o),o)}let r;const n=hc(s);if(n&&n.getTime()>=vn["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new xa(ht(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new et}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new xa(ht(t),s.status,t.weak_password.reasons);throw new Vl(ht(t),s.status||500,r)}const xc=(s,e,t,r)=>{const n={method:s,headers:e?.headers||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),t))};async function z(s,e,t,r){var n;const o=Object.assign({},r?.headers);o[hr]||(o[hr]=vn["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const i=(n=r?.query)!==null&&n!==void 0?n:{};r?.redirectTo&&(i.redirect_to=r.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await bc(s,e,t+l,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function bc(s,e,t,r,n,o){const i=xc(e,r,n,o);let l;try{l=await s(t,Object.assign({},i))}catch(c){throw console.error(c),new fr(ht(c),0)}if(l.ok||await ja(l),r?.noResolveJson)return l;try{return await l.json()}catch(c){await ja(c)}}function Le(s){var e;let t=null;kc(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=tc(s.expires_in)));const r=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:r},error:null}}function _a(s){const e=Le(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=s.weak_password),e}function tt(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function yc(s){return{data:s,error:null}}function wc(s){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:n,verification_type:o}=s,i=gc(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:r,redirect_to:n,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function Na(s){return s}function kc(s){return s.access_token&&s.refresh_token&&s.expires_in}const Zs=["global","local","others"];var jc=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(t[r[n]]=s[r[n]]);return t};class _c{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=yn(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Zs[0]){if(Zs.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zs.join(", ")}`);try{return await z(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await z(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:tt})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=jc(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=r?.newEmail,delete n.newEmail),await z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:wc,redirectTo:t?.redirectTo})}catch(t){if(D(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await z(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:tt})}catch(t){if(D(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,o,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(n=e?.perPage)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""},xform:Na});if(u.error)throw u.error;const h=await u.json(),f=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);d[`${x}Page`]=v}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(D(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){$t(e);try{return await z(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:tt})}catch(t){if(D(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){$t(e);try{return await z(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:tt})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){$t(e);try{return await z(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:tt})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){$t(e.userId);try{const{data:t,error:r}=await z(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:r}}catch(t){if(D(t))return{data:null,error:t};throw t}}async _deleteFactor(e){$t(e.userId),$t(e.id);try{return{data:await z(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,n,o,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await z(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(n=e?.perPage)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""},xform:Na});if(u.error)throw u.error;const h=await u.json(),f=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);d[`${x}Page`]=v}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(D(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await z(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(D(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await z(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(D(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await z(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(D(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await z(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(D(t))return{data:null,error:t};throw t}}}function Sa(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}const Dt={debug:!!(globalThis&&bn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class wn extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Nc extends wn{}async function Sc(s,e,t){Dt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Dt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Dt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,n.name);try{return await t()}finally{Dt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,n.name)}}else{if(e===0)throw Dt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Nc(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Dt.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function Ec(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function kn(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function Cc(s){return parseInt(s,16)}function Tc(s){const e=new TextEncoder().encode(s);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Pc(s){var e;const{chainId:t,domain:r,expirationTime:n,issuedAt:o=new Date,nonce:i,notBefore:l,requestId:c,resources:d,scheme:u,uri:h,version:f}=s;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=s.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const p=kn(s.address),g=u?`${u}://${r}`:r,v=s.statement?`${s.statement}
`:"",x=`${g} wants you to sign in with your Ethereum account:
${p}

${v}`;let y=`URI: ${h}
Version: ${f}
Chain ID: ${t}${i?`
Nonce: ${i}`:""}
Issued At: ${o.toISOString()}`;if(n&&(y+=`
Expiration Time: ${n.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),d){let w=`
Resources:`;for(const b of d){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);w+=`
- ${b}`}y+=w}return`${x}
${y}`}class ue extends Error{constructor({message:e,code:t,cause:r,name:n}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=n??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=t}}class _s extends ue{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Ac({error:s,options:e}){var t,r,n;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ue({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((t=o.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new ue({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ue({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ue({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new ue({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new ue({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return o.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new ue({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new ue({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const i=window.location.hostname;if(_n(i)){if(o.rp.id!==i)return new ue({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new ue({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new ue({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new ue({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new ue({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function Ic({error:s,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ue({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new ue({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const r=window.location.hostname;if(_n(r)){if(t.rpId!==r)return new ue({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new ue({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new ue({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new ue({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}var jn=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(t[r[n]]=s[r[n]]);return t};class Rc{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Oc=new Rc;function $c(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:e,user:t,excludeCredentials:r}=s,n=jn(s,["challenge","user","excludeCredentials"]),o=Bt(e).buffer,i=Object.assign(Object.assign({},t),{id:Bt(t.id).buffer}),l=Object.assign(Object.assign({},n),{challenge:o,user:i});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const d=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:Bt(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function Dc(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:e,allowCredentials:t}=s,r=jn(s,["challenge","allowCredentials"]),n=Bt(e).buffer,o=Object.assign(Object.assign({},r),{challenge:n});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let i=0;i<t.length;i++){const l=t[i];o.allowCredentials[i]=Object.assign(Object.assign({},l),{id:Bt(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return o}function Mc(s){var e;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const t=s;return{id:s.id,rawId:s.id,response:{attestationObject:gt(new Uint8Array(s.response.attestationObject)),clientDataJSON:gt(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Lc(s){var e;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const t=s,r=s.getClientExtensionResults(),n=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:gt(new Uint8Array(n.authenticatorData)),clientDataJSON:gt(new Uint8Array(n.clientDataJSON)),signature:gt(new Uint8Array(n.signature)),userHandle:n.userHandle?gt(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function _n(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function Ea(){var s,e;return!!(Te()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator?.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Uc(s){try{const e=await navigator.credentials.create(s);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new _s("Browser returned unexpected credential type",e)}:{data:null,error:new _s("Empty credential response",e)}}catch(e){return{data:null,error:Ac({error:e,options:s})}}}async function Fc(s){try{const e=await navigator.credentials.get(s);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new _s("Browser returned unexpected credential type",e)}:{data:null,error:new _s("Empty credential response",e)}}catch(e){return{data:null,error:Ic({error:e,options:s})}}}const Bc={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},zc={userVerification:"preferred",hints:["security-key"]};function Ns(...s){const e=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),t=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),r={};for(const n of s)if(n)for(const o in n){const i=n[o];if(i!==void 0)if(Array.isArray(i))r[o]=i;else if(t(i))r[o]=i;else if(e(i)){const l=r[o];e(l)?r[o]=Ns(l,i):r[o]=Ns(i)}else r[o]=i}return r}function Hc(s,e){return Ns(Bc,s,e||{})}function qc(s,e){return Ns(zc,s,e||{})}class Wc{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:n},o){try{const{data:i,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!i)return{data:null,error:l};const c=n??Oc.createNewAbortSignal();if(i.webauthn.type==="create"){const{user:d}=i.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(i.webauthn.type){case"create":{const d=Hc(i.webauthn.credential_options.publicKey,o?.create),{data:u,error:h}=await Uc({publicKey:d,signal:c});return u?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}case"request":{const d=qc(i.webauthn.credential_options.publicKey,o?.request),{data:u,error:h}=await Fc(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:d,signal:c}));return u?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}}}catch(i){return D(i)?{data:null,error:i}:{data:null,error:new pt("Unexpected error in challenge",i)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:n}},o){if(!t)return{data:null,error:new ns("rpId is required for WebAuthn authentication")};try{if(!Ea())return{data:null,error:new pt("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:n},{request:o});if(!i)return{data:null,error:l};const{webauthn:c}=i;return this._verify({factorId:e,challengeId:i.challengeId,webauthn:{type:c.type,rpId:t,rpOrigins:r,credential_response:c.credential_response}})}catch(i){return D(i)?{data:null,error:i}:{data:null,error:new pt("Unexpected error in authenticate",i)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:n},o){if(!t)return{data:null,error:new ns("rpId is required for WebAuthn registration")};try{if(!Ea())return{data:null,error:new pt("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this._enroll({friendlyName:e});if(!i)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:n},{create:o});return c?this._verify({factorId:i.id,challengeId:c.challengeId,webauthn:{rpId:t,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(i){return D(i)?{data:null,error:i}:{data:null,error:new pt("Unexpected error in register",i)}}}}Ec();const Vc={url:Bl,storageKey:zl,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Hl,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ca(s,e,t){return await t()}const Mt={};class os{get jwks(){var e,t;return(t=(e=Mt[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Mt[this.storageKey]=Object.assign(Object.assign({},Mt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Mt[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Mt[this.storageKey]=Object.assign(Object.assign({},Mt[this.storageKey]),{cachedAt:e})}constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=os.nextInstanceID,os.nextInstanceID+=1,this.instanceID>0&&Te()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Vc),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new _c({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=yn(n.fetch),this.lock=n.lock||Ca,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Te()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=Sc:this.lock=Ca,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Wc(this)},this.persistSession?(n.storage?this.storage=n.storage:bn()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Sa(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=Sa(this.memoryStorage)),Te()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${gn}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=rc(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Te()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:o}=await this._getSessionFromURL(t,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Jl(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return D(t)?{error:t}:{error:new pt("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const o=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e?.options)===null||n===void 0?void 0:n.captchaToken}},xform:Le}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(D(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,r,n;try{let o;if("email"in e){const{email:u,password:h,options:f}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Ot(this.storage,this.storageKey)),o=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:u,password:h,data:(t=f?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:g},xform:Le})}else if("phone"in e){const{phone:u,password:h,options:f}=e;o=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},channel:(n=f?.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Le})}else throw new vs("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(D(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:i,options:l}=e;t=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:_a})}else if("phone"in e){const{phone:o,password:i,options:l}=e;t=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:_a})}else throw new vs("You must provide either an email or phone number and a password");const{data:r,error:n}=t;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Rt}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,n,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,n,o,i,l,c,d,u,h,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:v,wallet:x,statement:y,options:w}=e;let b;if(Te())if(typeof x=="object")b=x;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")b=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=x}const N=new URL((t=w?.url)!==null&&t!==void 0?t:window.location.href),T=await b.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=kn(T[0]);let O=(r=w?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!O){const F=await b.request({method:"eth_chainId"});O=Cc(F)}const C={domain:N.host,address:S,statement:y,uri:N.href,version:"1",chainId:O,nonce:(n=w?.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(i=(o=w?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(l=w?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=w?.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=w?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(u=w?.signInWithEthereum)===null||u===void 0?void 0:u.resources};p=Pc(C),g=await b.request({method:"personal_sign",params:[Tc(p),S]})}try{const{data:v,error:x}=await z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:g},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Le});if(x)throw x;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Rt}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:x})}catch(v){if(D(v))return{data:{user:null,session:null},error:v};throw v}}async signInWithSolana(e){var t,r,n,o,i,l,c,d,u,h,f,p;let g,v;if("message"in e)g=e.message,v=e.signature;else{const{chain:x,wallet:y,statement:w,options:b}=e;let N;if(Te())if(typeof y=="object")N=y;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))N=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!b?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=y}const T=new URL((t=b?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in N&&N.signIn){const S=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b?.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),w?{statement:w}:null));let O;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")O=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)O=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)g=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),v=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${T.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(n=(r=b?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((o=b?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((i=b?.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((d=b?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(u=b?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const S=await N.signMessage(new TextEncoder().encode(g),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=S}}try{const{data:x,error:y}=await z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:gt(v)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Le});if(y)throw y;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Rt}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:y})}catch(x){if(D(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(e){const t=await dt(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(t??"").split("/");try{const{data:o,error:i}=await z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Le});if(await Xe(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Rt}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:n??null}),error:i})}catch(o){if(D(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:o,nonce:i}=e,l=await z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:Le}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Rt}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,n,o,i;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Ot(this.storage,this.storageKey));const{error:h}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(r=c?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c?.data)!==null&&n!==void 0?n:{},create_user:(o=c?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(i=c?.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:u}}throw new vs("You must provide either an email or phone number.")}catch(l){if(D(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,r;try{let n,o;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:l}=await z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:n,xform:Le});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(D(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,r,n;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Ot(this.storage,this.storageKey)),await z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e?.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:yc})}catch(o){if(D(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new et;const{error:n}=await z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(D(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:o}=e,{error:i}=await z(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:n,options:o}=e,{data:i,error:l}=await z(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:i?.message_id},error:l}}throw new vs("You must provide either an email or phone number and a type")}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await dt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Ks:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const i=await dt(this.userStorage,this.storageKey+"-user");i?.user?e.user=i.user:e.user=Ys()}if(this.storage.isServer&&e.user){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{data:n,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:tt}):await this._useSession(async t=>{var r,n,o;const{data:i,error:l}=t;if(l)throw l;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new et}:await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0,xform:tt})})}catch(t){if(D(t))return Gl(t)&&(await this._removeSession(),await Xe(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:n,error:o}=r;if(o)throw o;if(!n.session)throw new et;const i=n.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Ot(this.storage,this.storageKey));const{data:d,error:u}=await z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:tt});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new et;const t=Date.now()/1e3;let r=t,n=!0,o=null;const{payload:i}=Js(e.access_token);if(i.exp&&(r=i.exp,n=r<=t),n){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(D(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:i,error:l}=t;if(l)throw l;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new et;const{data:n,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Te())throw new xs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new xs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new va("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new xs("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new va("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=e;if(!o||!l||!i||!d)throw new xs("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const p=f-u;p*1e3<=Ut&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const g=f-h;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,u);const{data:v,error:x}=await this._getUser(o);if(x)throw x;const y={provider_token:r,provider_refresh_token:n,access_token:o,expires_in:h,expires_at:f,refresh_token:i,token_type:d,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(r){if(D(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await dt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:n,error:o}=t;if(o)return{error:o};const i=(r=n.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(Kl(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Xe(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=sc(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{const{data:{session:o},error:i}=t;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await Ot(this.storage,this.storageKey,!0));try{return await z(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(D(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:n}=await this._useSession(async o=>{var i,l,c,d,u;const{data:h,error:f}=o;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await z(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return Te()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(D(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:n,data:{session:o}}=t;if(n)throw n;const{options:i,provider:l,token:c,access_token:d,nonce:u}=e,h=await z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:d,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:Le}),{data:f,error:p}=h;return p?{data:{user:null,session:null},error:p}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Rt}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),{data:f,error:p})}catch(n){if(D(n))return{data:{user:null,session:null},error:n};throw n}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;const{data:o,error:i}=t;if(i)throw i;return await z(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(D(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await oc(async n=>(n>0&&await nc(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Le})),(n,o)=>{const i=200*Math.pow(2,n);return o&&Gs(o)&&Date.now()+i-r<Ut})}catch(r){if(this._debug(t,"error",r),D(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Te()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await dt(this.storage,this.storageKey);if(n&&this.userStorage){let i=await dt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:n.user},await Ft(this.userStorage,this.storageKey+"-user",i)),n.user=(e=i?.user)!==null&&e!==void 0?e:Ys()}else if(n&&!n.user&&!n.user){const i=await dt(this.storage,this.storageKey+"-user");i&&i?.user?(n.user=i.user,await Xe(this.storage,this.storageKey+"-user"),await Ft(this.storage,this.storageKey,n)):n.user=Ys()}if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const o=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Ks;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Ks}s`),o){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Gs(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(n.access_token);!l&&i?.user?(n.user=i.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new et;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Ts;const{data:o,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!o.session)throw new et;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={data:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(n,"error",o),D(o)){const i={data:null,error:o};return Gs(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Ft(this.userStorage,this.storageKey+"-user",{user:t.user});const n=Object.assign({},t);delete n.user;const o=ka(n);await Ft(this.storage,this.storageKey,o)}else{const n=ka(t);await Ft(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await Xe(this.storage,this.storageKey),await Xe(this.storage,this.storageKey+"-code-verifier"),await Xe(this.storage,this.storageKey+"-user"),this.userStorage&&await Xe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Te()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ut);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/Ut);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Ut}ms, refresh threshold is ${ur} ticks`),n<=ur&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof wn)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Te()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,i]=await Ot(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});n.push(l.toString())}if(r?.queryParams){const o=new URLSearchParams(r.queryParams);n.push(o.toString())}return r?.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:n,error:o}=t;return o?{data:null,error:o}:await z(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(D(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;const{data:o,error:i}=t;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:d}=await z(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&c.type==="totp"&&(!((n=c?.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(D(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:o}=t;if(o)return{data:null,error:o};const i=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Mc(e.webauthn.credential_response):Lc(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:i,headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(t){if(D(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:o}=t;if(o)return{data:null,error:o};const i=await z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=n?.session)===null||r===void 0?void 0:r.access_token});if(i.error)return i;const{data:l}=i;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:$c(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Dc(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(D(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=t?.factors)!==null&&e!==void 0?e:[])n.all.push(o),o.status==="verified"&&n[o.factor_type].push(o);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:n},error:o}=e;if(o)return{data:null,error:o};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Js(n.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(l=>l.kid===e);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+Wl>n)return r;const{data:o,error:i}=await z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=n,r=o.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:p,error:g}=await this.getSession();if(g||!p.session)return{data:null,error:g};r=p.session.access_token}const{header:n,payload:o,signature:i,raw:{header:l,payload:c}}=Js(r);t?.allowExpired||fc(o.exp);const d=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!d){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:o,header:n,signature:i},error:null}}const u=pc(n.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,i,ec(`${l}.${c}`)))throw new pr("Invalid JWT signature");return{data:{claims:o,header:n,signature:i},error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}}}os.nextInstanceID=0;const Kc=os;class Gc extends Kc{constructor(e){super(e)}}var Jc=function(s,e,t,r){function n(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function l(u){try{d(r.next(u))}catch(h){i(h)}}function c(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):n(u.value).then(l,c)}d((r=r.apply(s,e||[])).next())})};class Yc{constructor(e,t,r){var n,o,i;this.supabaseUrl=e,this.supabaseKey=t;const l=Fl(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:Pl,realtime:Il,auth:Object.assign(Object.assign({},Al),{storageKey:c}),global:Tl},u=Ul(r??{},d);this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=u.auth)!==null&&i!==void 0?i:{},this.headers,u.global.fetch),this.fetch=Dl(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Vi(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Sl(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Di(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return Jc(this,void 0,void 0,function*(){var e,t;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:o,storageKey:i,flowType:l,lock:c,debug:d},u,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Gc({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:o,flowType:l,lock:c,debug:d,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new cl(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Zc=(s,e,t)=>new Yc(s,e,t);function Xc(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const e=s.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Xc()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const te="uwcmvzayecawmvwpyerf",Ps="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV3Y212emF5ZWNhd212d3B5ZXJmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAyNjY4MzAsImV4cCI6MjA3NTg0MjgzMH0.pzqiZx0V2sC1jHdmUKT0WZY4mwoO_AdHD7ayc5daXUk",Xs=Zc(`https://${te}.supabase.co`,Ps),Nn=m.createContext(void 0);function Qc({children:s}){const[e,t]=m.useState(null),[r,n]=m.useState(null),[o,i]=m.useState(!0),l=async f=>{try{const p=await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/profile`,{headers:{Authorization:`Bearer ${f}`}});if(p.ok){const g=await p.json();t(g.profile)}}catch(p){console.error("Failed to fetch profile:",p)}},c=async()=>{r&&await l(r)};m.useEffect(()=>{Xs.auth.getSession().then(({data:{session:f}})=>{f?.access_token&&(n(f.access_token),l(f.access_token)),i(!1)})},[]);const d=async(f,p)=>{const{data:g,error:v}=await Xs.auth.signInWithPassword({email:f,password:p});if(v)throw v;g.session&&(n(g.session.access_token),await l(g.session.access_token))},u=async(f,p,g,v)=>{const x=await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/signup`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ps}`},body:JSON.stringify({email:f,password:p,name:g,role:v})});if(!x.ok){const y=await x.json();throw new Error(y.error||"Signup failed")}await d(f,p)},h=async()=>{await Xs.auth.signOut(),t(null),n(null)};return a.jsx(Nn.Provider,{value:{user:e,accessToken:r,loading:o,login:d,signup:u,logout:h,refreshProfile:c},children:s})}function Be(){const s=m.useContext(Nn);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),td=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Ta=s=>{const e=td(s);return e.charAt(0).toUpperCase()+e.slice(1)},Sn=(...s)=>s.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sd={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=m.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:n="",children:o,iconNode:i,...l},c)=>m.createElement("svg",{ref:c,...sd,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:Sn("lucide",n),...l},[...i.map(([d,u])=>m.createElement(d,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=(s,e)=>{const t=m.forwardRef(({className:r,...n},o)=>m.createElement(rd,{ref:o,iconNode:e,className:Sn(`lucide-${ed(Ta(s))}`,`lucide-${s}`,r),...n}));return t.displayName=Ta(s),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],nd=H("arrow-right",ad);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]],En=H("bath",od);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],Cn=H("bed",id);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Pa=H("bell",ld);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Ne=H("building-2",cd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Aa=H("building",dd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],hd=H("calendar",ud);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],pd=H("check",fd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Tn=H("chevron-down",md);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],vd=H("chevron-up",gd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Je=H("circle-alert",xd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ye=H("circle-check",bd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ia=H("circle-x",yd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kd=H("circle",wd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ss=H("clock",jd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Pn=H("credit-card",_d);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],is=H("database",Nd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Ed=H("globe",Sd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Es=H("heart",Cd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Ra=H("house",Td);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Qs=H("layout-dashboard",Pd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],xt=H("loader-circle",Ad);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ur=H("lock",Id);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],Od=H("log-in",Rd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],Oa=H("log-out",$d);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],As=H("mail",Dd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Is=H("map-pin",Md);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Ud=H("moon",Ld);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Fr=H("phone",Fd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],$a=H("plus",Bd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],mr=H("refresh-cw",zd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],gr=H("search",Hd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],vr=H("shield",qd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],Vd=H("sliders-horizontal",Wd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],An=H("square",Kd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Jd=H("sun",Gd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]],Da=H("terminal",Yd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],as=H("upload",Zd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Qd=H("user",Xd);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],In=H("users",eu);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],su=H("wallet",tu);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Br=H("x",ru);function Rn(s){var e,t,r="";if(typeof s=="string"||typeof s=="number")r+=s;else if(typeof s=="object")if(Array.isArray(s)){var n=s.length;for(e=0;e<n;e++)s[e]&&(t=Rn(s[e]))&&(r&&(r+=" "),r+=t)}else for(t in s)s[t]&&(r&&(r+=" "),r+=t);return r}function On(){for(var s,e,t=0,r="",n=arguments.length;t<n;t++)(s=arguments[t])&&(e=Rn(s))&&(r&&(r+=" "),r+=e);return r}const Ma=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,La=On,zr=(s,e)=>t=>{var r;if(e?.variants==null)return La(s,t?.class,t?.className);const{variants:n,defaultVariants:o}=e,i=Object.keys(n).map(d=>{const u=t?.[d],h=o?.[d];if(u===null)return null;const f=Ma(u)||Ma(h);return n[d][f]}),l=t&&Object.entries(t).reduce((d,u)=>{let[h,f]=u;return f===void 0||(d[h]=f),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:h,className:f,...p}=u;return Object.entries(p).every(g=>{let[v,x]=g;return Array.isArray(x)?x.includes({...o,...l}[v]):{...o,...l}[v]===x})?[...d,h,f]:d},[]);return La(s,i,c,t?.class,t?.className)},Hr="-",au=s=>{const e=ou(s),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=s;return{getClassGroupId:i=>{const l=i.split(Hr);return l[0]===""&&l.length!==1&&l.shift(),$n(l,e)||nu(i)},getConflictingClassGroupIds:(i,l)=>{const c=t[i]||[];return l&&r[i]?[...c,...r[i]]:c}}},$n=(s,e)=>{if(s.length===0)return e.classGroupId;const t=s[0],r=e.nextPart.get(t),n=r?$n(s.slice(1),r):void 0;if(n)return n;if(e.validators.length===0)return;const o=s.join(Hr);return e.validators.find(({validator:i})=>i(o))?.classGroupId},Ua=/^\[(.+)\]$/,nu=s=>{if(Ua.test(s)){const e=Ua.exec(s)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},ou=s=>{const{theme:e,classGroups:t}=s,r={nextPart:new Map,validators:[]};for(const n in t)xr(t[n],r,n,e);return r},xr=(s,e,t,r)=>{s.forEach(n=>{if(typeof n=="string"){const o=n===""?e:Fa(e,n);o.classGroupId=t;return}if(typeof n=="function"){if(iu(n)){xr(n(r),e,t,r);return}e.validators.push({validator:n,classGroupId:t});return}Object.entries(n).forEach(([o,i])=>{xr(i,Fa(e,o),t,r)})})},Fa=(s,e)=>{let t=s;return e.split(Hr).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},iu=s=>s.isThemeGetter,lu=s=>{if(s<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const n=(o,i)=>{t.set(o,i),e++,e>s&&(e=0,r=t,t=new Map)};return{get(o){let i=t.get(o);if(i!==void 0)return i;if((i=r.get(o))!==void 0)return n(o,i),i},set(o,i){t.has(o)?t.set(o,i):n(o,i)}}},br="!",yr=":",cu=yr.length,du=s=>{const{prefix:e,experimentalParseClassName:t}=s;let r=n=>{const o=[];let i=0,l=0,c=0,d;for(let g=0;g<n.length;g++){let v=n[g];if(i===0&&l===0){if(v===yr){o.push(n.slice(c,g)),c=g+cu;continue}if(v==="/"){d=g;continue}}v==="["?i++:v==="]"?i--:v==="("?l++:v===")"&&l--}const u=o.length===0?n:n.substring(c),h=uu(u),f=h!==u,p=d&&d>c?d-c:void 0;return{modifiers:o,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:p}};if(e){const n=e+yr,o=r;r=i=>i.startsWith(n)?o(i.substring(n.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:i,maybePostfixModifierPosition:void 0}}if(t){const n=r;r=o=>t({className:o,parseClassName:n})}return r},uu=s=>s.endsWith(br)?s.substring(0,s.length-1):s.startsWith(br)?s.substring(1):s,hu=s=>{const e=Object.fromEntries(s.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const n=[];let o=[];return r.forEach(i=>{i[0]==="["||e[i]?(n.push(...o.sort(),i),o=[]):o.push(i)}),n.push(...o.sort()),n}},fu=s=>({cache:lu(s.cacheSize),parseClassName:du(s),sortModifiers:hu(s),...au(s)}),pu=/\s+/,mu=(s,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:n,sortModifiers:o}=e,i=[],l=s.trim().split(pu);let c="";for(let d=l.length-1;d>=0;d-=1){const u=l[d],{isExternal:h,modifiers:f,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:v}=t(u);if(h){c=u+(c.length>0?" "+c:c);continue}let x=!!v,y=r(x?g.substring(0,v):g);if(!y){if(!x){c=u+(c.length>0?" "+c:c);continue}if(y=r(g),!y){c=u+(c.length>0?" "+c:c);continue}x=!1}const w=o(f).join(":"),b=p?w+br:w,N=b+y;if(i.includes(N))continue;i.push(N);const T=n(y,x);for(let S=0;S<T.length;++S){const O=T[S];i.push(b+O)}c=u+(c.length>0?" "+c:c)}return c};function gu(){let s=0,e,t,r="";for(;s<arguments.length;)(e=arguments[s++])&&(t=Dn(e))&&(r&&(r+=" "),r+=t);return r}const Dn=s=>{if(typeof s=="string")return s;let e,t="";for(let r=0;r<s.length;r++)s[r]&&(e=Dn(s[r]))&&(t&&(t+=" "),t+=e);return t};function vu(s,...e){let t,r,n,o=i;function i(c){const d=e.reduce((u,h)=>h(u),s());return t=fu(d),r=t.cache.get,n=t.cache.set,o=l,l(c)}function l(c){const d=r(c);if(d)return d;const u=mu(c,t);return n(c,u),u}return function(){return o(gu.apply(null,arguments))}}const pe=s=>{const e=t=>t[s]||[];return e.isThemeGetter=!0,e},Mn=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Ln=/^\((?:(\w[\w-]*):)?(.+)\)$/i,xu=/^\d+\/\d+$/,bu=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,yu=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,wu=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,ku=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ju=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Lt=s=>xu.test(s),W=s=>!!s&&!Number.isNaN(Number(s)),Qe=s=>!!s&&Number.isInteger(Number(s)),er=s=>s.endsWith("%")&&W(s.slice(0,-1)),Ke=s=>bu.test(s),_u=()=>!0,Nu=s=>yu.test(s)&&!wu.test(s),Un=()=>!1,Su=s=>ku.test(s),Eu=s=>ju.test(s),Cu=s=>!A(s)&&!I(s),Tu=s=>Vt(s,zn,Un),A=s=>Mn.test(s),ut=s=>Vt(s,Hn,Nu),tr=s=>Vt(s,Ou,W),Ba=s=>Vt(s,Fn,Un),Pu=s=>Vt(s,Bn,Eu),bs=s=>Vt(s,qn,Su),I=s=>Ln.test(s),Yt=s=>Kt(s,Hn),Au=s=>Kt(s,$u),za=s=>Kt(s,Fn),Iu=s=>Kt(s,zn),Ru=s=>Kt(s,Bn),ys=s=>Kt(s,qn,!0),Vt=(s,e,t)=>{const r=Mn.exec(s);return r?r[1]?e(r[1]):t(r[2]):!1},Kt=(s,e,t=!1)=>{const r=Ln.exec(s);return r?r[1]?e(r[1]):t:!1},Fn=s=>s==="position"||s==="percentage",Bn=s=>s==="image"||s==="url",zn=s=>s==="length"||s==="size"||s==="bg-size",Hn=s=>s==="length",Ou=s=>s==="number",$u=s=>s==="family-name",qn=s=>s==="shadow",Du=()=>{const s=pe("color"),e=pe("font"),t=pe("text"),r=pe("font-weight"),n=pe("tracking"),o=pe("leading"),i=pe("breakpoint"),l=pe("container"),c=pe("spacing"),d=pe("radius"),u=pe("shadow"),h=pe("inset-shadow"),f=pe("text-shadow"),p=pe("drop-shadow"),g=pe("blur"),v=pe("perspective"),x=pe("aspect"),y=pe("ease"),w=pe("animate"),b=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],T=()=>[...N(),I,A],S=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],C=()=>[I,A,c],F=()=>[Lt,"full","auto",...C()],ce=()=>[Qe,"none","subgrid",I,A],ie=()=>["auto",{span:["full",Qe,I,A]},Qe,I,A],oe=()=>[Qe,"auto",I,A],j=()=>["auto","min","max","fr",I,A],V=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],re=()=>["start","end","center","stretch","center-safe","end-safe"],$=()=>["auto",...C()],_=()=>[Lt,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],k=()=>[s,I,A],J=()=>[...N(),za,Ba,{position:[I,A]}],Y=()=>["no-repeat",{repeat:["","x","y","space","round"]}],K=()=>["auto","cover","contain",Iu,Tu,{size:[I,A]}],ye=()=>[er,Yt,ut],R=()=>["","none","full",d,I,A],B=()=>["",W,Yt,ut],Z=()=>["solid","dashed","dotted","double"],de=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>[W,er,za,Ba],L=()=>["","none",g,I,A],ne=()=>["none",W,I,A],G=()=>["none",W,I,A],ee=()=>[W,I,A],se=()=>[Lt,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ke],breakpoint:[Ke],color:[_u],container:[Ke],"drop-shadow":[Ke],ease:["in","out","in-out"],font:[Cu],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ke],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ke],shadow:[Ke],spacing:["px",W],text:[Ke],"text-shadow":[Ke],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Lt,A,I,x]}],container:["container"],columns:[{columns:[W,A,I,l]}],"break-after":[{"break-after":b()}],"break-before":[{"break-before":b()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:T()}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:F()}],"inset-x":[{"inset-x":F()}],"inset-y":[{"inset-y":F()}],start:[{start:F()}],end:[{end:F()}],top:[{top:F()}],right:[{right:F()}],bottom:[{bottom:F()}],left:[{left:F()}],visibility:["visible","invisible","collapse"],z:[{z:[Qe,"auto",I,A]}],basis:[{basis:[Lt,"full","auto",l,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[W,Lt,"auto","initial","none",A]}],grow:[{grow:["",W,I,A]}],shrink:[{shrink:["",W,I,A]}],order:[{order:[Qe,"first","last","none",I,A]}],"grid-cols":[{"grid-cols":ce()}],"col-start-end":[{col:ie()}],"col-start":[{"col-start":oe()}],"col-end":[{"col-end":oe()}],"grid-rows":[{"grid-rows":ce()}],"row-start-end":[{row:ie()}],"row-start":[{"row-start":oe()}],"row-end":[{"row-end":oe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":j()}],"auto-rows":[{"auto-rows":j()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...re(),"normal"]}],"justify-self":[{"justify-self":["auto",...re()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...re(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...re(),{baseline:["","last"]}]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...re(),"baseline"]}],"place-self":[{"place-self":["auto",...re()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:$()}],mx:[{mx:$()}],my:[{my:$()}],ms:[{ms:$()}],me:[{me:$()}],mt:[{mt:$()}],mr:[{mr:$()}],mb:[{mb:$()}],ml:[{ml:$()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:_()}],w:[{w:[l,"screen",..._()]}],"min-w":[{"min-w":[l,"screen","none",..._()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[i]},..._()]}],h:[{h:["screen","lh",..._()]}],"min-h":[{"min-h":["screen","lh","none",..._()]}],"max-h":[{"max-h":["screen","lh",..._()]}],"font-size":[{text:["base",t,Yt,ut]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,I,tr]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",er,A]}],"font-family":[{font:[Au,A,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,I,A]}],"line-clamp":[{"line-clamp":[W,"none",I,tr]}],leading:[{leading:[o,...C()]}],"list-image":[{"list-image":["none",I,A]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",I,A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:k()}],"text-color":[{text:k()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:[W,"from-font","auto",I,ut]}],"text-decoration-color":[{decoration:k()}],"underline-offset":[{"underline-offset":[W,"auto",I,A]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",I,A]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",I,A]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:J()}],"bg-repeat":[{bg:Y()}],"bg-size":[{bg:K()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Qe,I,A],radial:["",I,A],conic:[Qe,I,A]},Ru,Pu]}],"bg-color":[{bg:k()}],"gradient-from-pos":[{from:ye()}],"gradient-via-pos":[{via:ye()}],"gradient-to-pos":[{to:ye()}],"gradient-from":[{from:k()}],"gradient-via":[{via:k()}],"gradient-to":[{to:k()}],rounded:[{rounded:R()}],"rounded-s":[{"rounded-s":R()}],"rounded-e":[{"rounded-e":R()}],"rounded-t":[{"rounded-t":R()}],"rounded-r":[{"rounded-r":R()}],"rounded-b":[{"rounded-b":R()}],"rounded-l":[{"rounded-l":R()}],"rounded-ss":[{"rounded-ss":R()}],"rounded-se":[{"rounded-se":R()}],"rounded-ee":[{"rounded-ee":R()}],"rounded-es":[{"rounded-es":R()}],"rounded-tl":[{"rounded-tl":R()}],"rounded-tr":[{"rounded-tr":R()}],"rounded-br":[{"rounded-br":R()}],"rounded-bl":[{"rounded-bl":R()}],"border-w":[{border:B()}],"border-w-x":[{"border-x":B()}],"border-w-y":[{"border-y":B()}],"border-w-s":[{"border-s":B()}],"border-w-e":[{"border-e":B()}],"border-w-t":[{"border-t":B()}],"border-w-r":[{"border-r":B()}],"border-w-b":[{"border-b":B()}],"border-w-l":[{"border-l":B()}],"divide-x":[{"divide-x":B()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":B()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Z(),"hidden","none"]}],"divide-style":[{divide:[...Z(),"hidden","none"]}],"border-color":[{border:k()}],"border-color-x":[{"border-x":k()}],"border-color-y":[{"border-y":k()}],"border-color-s":[{"border-s":k()}],"border-color-e":[{"border-e":k()}],"border-color-t":[{"border-t":k()}],"border-color-r":[{"border-r":k()}],"border-color-b":[{"border-b":k()}],"border-color-l":[{"border-l":k()}],"divide-color":[{divide:k()}],"outline-style":[{outline:[...Z(),"none","hidden"]}],"outline-offset":[{"outline-offset":[W,I,A]}],"outline-w":[{outline:["",W,Yt,ut]}],"outline-color":[{outline:k()}],shadow:[{shadow:["","none",u,ys,bs]}],"shadow-color":[{shadow:k()}],"inset-shadow":[{"inset-shadow":["none",h,ys,bs]}],"inset-shadow-color":[{"inset-shadow":k()}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:k()}],"ring-offset-w":[{"ring-offset":[W,ut]}],"ring-offset-color":[{"ring-offset":k()}],"inset-ring-w":[{"inset-ring":B()}],"inset-ring-color":[{"inset-ring":k()}],"text-shadow":[{"text-shadow":["none",f,ys,bs]}],"text-shadow-color":[{"text-shadow":k()}],opacity:[{opacity:[W,I,A]}],"mix-blend":[{"mix-blend":[...de(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":de()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[W]}],"mask-image-linear-from-pos":[{"mask-linear-from":P()}],"mask-image-linear-to-pos":[{"mask-linear-to":P()}],"mask-image-linear-from-color":[{"mask-linear-from":k()}],"mask-image-linear-to-color":[{"mask-linear-to":k()}],"mask-image-t-from-pos":[{"mask-t-from":P()}],"mask-image-t-to-pos":[{"mask-t-to":P()}],"mask-image-t-from-color":[{"mask-t-from":k()}],"mask-image-t-to-color":[{"mask-t-to":k()}],"mask-image-r-from-pos":[{"mask-r-from":P()}],"mask-image-r-to-pos":[{"mask-r-to":P()}],"mask-image-r-from-color":[{"mask-r-from":k()}],"mask-image-r-to-color":[{"mask-r-to":k()}],"mask-image-b-from-pos":[{"mask-b-from":P()}],"mask-image-b-to-pos":[{"mask-b-to":P()}],"mask-image-b-from-color":[{"mask-b-from":k()}],"mask-image-b-to-color":[{"mask-b-to":k()}],"mask-image-l-from-pos":[{"mask-l-from":P()}],"mask-image-l-to-pos":[{"mask-l-to":P()}],"mask-image-l-from-color":[{"mask-l-from":k()}],"mask-image-l-to-color":[{"mask-l-to":k()}],"mask-image-x-from-pos":[{"mask-x-from":P()}],"mask-image-x-to-pos":[{"mask-x-to":P()}],"mask-image-x-from-color":[{"mask-x-from":k()}],"mask-image-x-to-color":[{"mask-x-to":k()}],"mask-image-y-from-pos":[{"mask-y-from":P()}],"mask-image-y-to-pos":[{"mask-y-to":P()}],"mask-image-y-from-color":[{"mask-y-from":k()}],"mask-image-y-to-color":[{"mask-y-to":k()}],"mask-image-radial":[{"mask-radial":[I,A]}],"mask-image-radial-from-pos":[{"mask-radial-from":P()}],"mask-image-radial-to-pos":[{"mask-radial-to":P()}],"mask-image-radial-from-color":[{"mask-radial-from":k()}],"mask-image-radial-to-color":[{"mask-radial-to":k()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[W]}],"mask-image-conic-from-pos":[{"mask-conic-from":P()}],"mask-image-conic-to-pos":[{"mask-conic-to":P()}],"mask-image-conic-from-color":[{"mask-conic-from":k()}],"mask-image-conic-to-color":[{"mask-conic-to":k()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:J()}],"mask-repeat":[{mask:Y()}],"mask-size":[{mask:K()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",I,A]}],filter:[{filter:["","none",I,A]}],blur:[{blur:L()}],brightness:[{brightness:[W,I,A]}],contrast:[{contrast:[W,I,A]}],"drop-shadow":[{"drop-shadow":["","none",p,ys,bs]}],"drop-shadow-color":[{"drop-shadow":k()}],grayscale:[{grayscale:["",W,I,A]}],"hue-rotate":[{"hue-rotate":[W,I,A]}],invert:[{invert:["",W,I,A]}],saturate:[{saturate:[W,I,A]}],sepia:[{sepia:["",W,I,A]}],"backdrop-filter":[{"backdrop-filter":["","none",I,A]}],"backdrop-blur":[{"backdrop-blur":L()}],"backdrop-brightness":[{"backdrop-brightness":[W,I,A]}],"backdrop-contrast":[{"backdrop-contrast":[W,I,A]}],"backdrop-grayscale":[{"backdrop-grayscale":["",W,I,A]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[W,I,A]}],"backdrop-invert":[{"backdrop-invert":["",W,I,A]}],"backdrop-opacity":[{"backdrop-opacity":[W,I,A]}],"backdrop-saturate":[{"backdrop-saturate":[W,I,A]}],"backdrop-sepia":[{"backdrop-sepia":["",W,I,A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",I,A]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[W,"initial",I,A]}],ease:[{ease:["linear","initial",y,I,A]}],delay:[{delay:[W,I,A]}],animate:[{animate:["none",w,I,A]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,I,A]}],"perspective-origin":[{"perspective-origin":T()}],rotate:[{rotate:ne()}],"rotate-x":[{"rotate-x":ne()}],"rotate-y":[{"rotate-y":ne()}],"rotate-z":[{"rotate-z":ne()}],scale:[{scale:G()}],"scale-x":[{"scale-x":G()}],"scale-y":[{"scale-y":G()}],"scale-z":[{"scale-z":G()}],"scale-3d":["scale-3d"],skew:[{skew:ee()}],"skew-x":[{"skew-x":ee()}],"skew-y":[{"skew-y":ee()}],transform:[{transform:[I,A,"","none","gpu","cpu"]}],"transform-origin":[{origin:T()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:se()}],"translate-x":[{"translate-x":se()}],"translate-y":[{"translate-y":se()}],"translate-z":[{"translate-z":se()}],"translate-none":["translate-none"],accent:[{accent:k()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:k()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",I,A]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",I,A]}],fill:[{fill:["none",...k()]}],"stroke-w":[{stroke:[W,Yt,ut,tr]}],stroke:[{stroke:["none",...k()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Mu=vu(Du);function Q(...s){return Mu(On(s))}const Lu=zr("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),U=m.forwardRef(({className:s,variant:e,size:t,asChild:r=!1,...n},o)=>{const i=r?Ja:"button";return a.jsx(i,{ref:o,"data-slot":"button",className:Q(Lu({variant:e,size:t,className:s})),...n})});U.displayName="Button";function Ha({...s}){return a.jsx(Wo,{"data-slot":"dropdown-menu",...s})}function qa({...s}){return a.jsx(Vo,{"data-slot":"dropdown-menu-trigger",...s})}function Wa({className:s,sideOffset:e=4,...t}){return a.jsx(Ko,{children:a.jsx(Go,{"data-slot":"dropdown-menu-content",sideOffset:e,className:Q("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",s),...t})})}function sr({className:s,inset:e,variant:t="default",...r}){return a.jsx(Jo,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":t,className:Q("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...r})}function Uu(s){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}const Fu=s=>{switch(s){case"success":return Hu;case"info":return Wu;case"warning":return qu;case"error":return Vu;default:return null}},Bu=Array(12).fill(0),zu=({visible:s,className:e})=>E.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":s},E.createElement("div",{className:"sonner-spinner"},Bu.map((t,r)=>E.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Hu=E.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},E.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),qu=E.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},E.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Wu=E.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},E.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Vu=E.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},E.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Ku=E.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},E.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),E.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Gu=()=>{const[s,e]=E.useState(document.hidden);return E.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),s};let wr=1;class Ju{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...n}=e,o=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:wr++,i=this.toasts.find(c=>c.id===o),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),i?this.toasts=this.toasts.map(c=>c.id===o?(this.publish({...c,...e,id:o,title:r}),{...c,...e,id:o,dismissible:l,title:r}):c):this.addToast({title:r,...n,dismissible:l,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const n=Promise.resolve(e instanceof Function?e():e);let o=r!==void 0,i;const l=n.then(async d=>{if(i=["resolve",d],E.isValidElement(d))o=!1,this.create({id:r,type:"default",message:d});else if(Zu(d)&&!d.ok){o=!1;const h=typeof t.error=="function"?await t.error(`HTTP error! status: ${d.status}`):t.error,f=typeof t.description=="function"?await t.description(`HTTP error! status: ${d.status}`):t.description,g=typeof h=="object"&&!E.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:f,...g})}else if(d instanceof Error){o=!1;const h=typeof t.error=="function"?await t.error(d):t.error,f=typeof t.description=="function"?await t.description(d):t.description,g=typeof h=="object"&&!E.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:f,...g})}else if(t.success!==void 0){o=!1;const h=typeof t.success=="function"?await t.success(d):t.success,f=typeof t.description=="function"?await t.description(d):t.description,g=typeof h=="object"&&!E.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:f,...g})}}).catch(async d=>{if(i=["reject",d],t.error!==void 0){o=!1;const u=typeof t.error=="function"?await t.error(d):t.error,h=typeof t.description=="function"?await t.description(d):t.description,p=typeof u=="object"&&!E.isValidElement(u)?u:{message:u};this.create({id:r,type:"error",description:h,...p})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),c=()=>new Promise((d,u)=>l.then(()=>i[0]==="reject"?u(i[1]):d(i[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:c}:Object.assign(r,{unwrap:c})},this.custom=(e,t)=>{const r=t?.id||wr++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const _e=new Ju,Yu=(s,e)=>{const t=e?.id||wr++;return _e.addToast({title:s,...e,id:t}),t},Zu=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",Xu=Yu,Qu=()=>_e.toasts,eh=()=>_e.getActiveToasts(),M=Object.assign(Xu,{success:_e.success,info:_e.info,warning:_e.warning,error:_e.error,custom:_e.custom,message:_e.message,promise:_e.promise,dismiss:_e.dismiss,loading:_e.loading},{getHistory:Qu,getToasts:eh});Uu("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function ws(s){return s.label!==void 0}const th=3,sh="24px",rh="16px",Va=4e3,ah=356,nh=14,oh=45,ih=200;function ze(...s){return s.filter(Boolean).join(" ")}function lh(s){const[e,t]=s.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}const ch=s=>{var e,t,r,n,o,i,l,c,d;const{invert:u,toast:h,unstyled:f,interacting:p,setHeights:g,visibleToasts:v,heights:x,index:y,toasts:w,expanded:b,removeToast:N,defaultRichColors:T,closeButton:S,style:O,cancelButtonStyle:C,actionButtonStyle:F,className:ce="",descriptionClassName:ie="",duration:oe,position:j,gap:V,expandByDefault:re,classNames:$,icons:_,closeButtonAriaLabel:k="Close toast"}=s,[J,Y]=E.useState(null),[K,ye]=E.useState(null),[R,B]=E.useState(!1),[Z,de]=E.useState(!1),[P,L]=E.useState(!1),[ne,G]=E.useState(!1),[ee,se]=E.useState(!1),[qe,$e]=E.useState(0),[Jt,jt]=E.useState(0),We=E.useRef(h.duration||oe||Va),Kr=E.useRef(null),Ve=E.useRef(null),$o=y===0,Do=y+1<=v,Ee=h.type,_t=h.dismissible!==!1,Mo=h.className||"",Lo=h.descriptionClassName||"",us=E.useMemo(()=>x.findIndex(q=>q.toastId===h.id)||0,[x,h.id]),Uo=E.useMemo(()=>{var q;return(q=h.closeButton)!=null?q:S},[h.closeButton,S]),Gr=E.useMemo(()=>h.duration||oe||Va,[h.duration,oe]),zs=E.useRef(0),Nt=E.useRef(0),Jr=E.useRef(0),St=E.useRef(null),[Fo,Bo]=j.split("-"),Yr=E.useMemo(()=>x.reduce((q,ve,we)=>we>=us?q:q+ve.height,0),[x,us]),Zr=Gu(),zo=h.invert||u,Hs=Ee==="loading";Nt.current=E.useMemo(()=>us*V+Yr,[us,Yr]),E.useEffect(()=>{We.current=Gr},[Gr]),E.useEffect(()=>{B(!0)},[]),E.useEffect(()=>{const q=Ve.current;if(q){const ve=q.getBoundingClientRect().height;return jt(ve),g(we=>[{toastId:h.id,height:ve,position:h.position},...we]),()=>g(we=>we.filter(Ce=>Ce.toastId!==h.id))}},[g,h.id]),E.useLayoutEffect(()=>{if(!R)return;const q=Ve.current,ve=q.style.height;q.style.height="auto";const we=q.getBoundingClientRect().height;q.style.height=ve,jt(we),g(Ce=>Ce.find(be=>be.toastId===h.id)?Ce.map(be=>be.toastId===h.id?{...be,height:we}:be):[{toastId:h.id,height:we,position:h.position},...Ce])},[R,h.title,h.description,g,h.id,h.jsx,h.action,h.cancel]);const Ze=E.useCallback(()=>{de(!0),$e(Nt.current),g(q=>q.filter(ve=>ve.toastId!==h.id)),setTimeout(()=>{N(h)},ih)},[h,N,g,Nt]);E.useEffect(()=>{if(h.promise&&Ee==="loading"||h.duration===1/0||h.type==="loading")return;let q;return b||p||Zr?(()=>{if(Jr.current<zs.current){const Ce=new Date().getTime()-zs.current;We.current=We.current-Ce}Jr.current=new Date().getTime()})():(()=>{We.current!==1/0&&(zs.current=new Date().getTime(),q=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),Ze()},We.current))})(),()=>clearTimeout(q)},[b,p,h,Ee,Zr,Ze]),E.useEffect(()=>{h.delete&&(Ze(),h.onDismiss==null||h.onDismiss.call(h,h))},[Ze,h.delete]);function Ho(){var q;if(_?.loading){var ve;return E.createElement("div",{className:ze($?.loader,h==null||(ve=h.classNames)==null?void 0:ve.loader,"sonner-loader"),"data-visible":Ee==="loading"},_.loading)}return E.createElement(zu,{className:ze($?.loader,h==null||(q=h.classNames)==null?void 0:q.loader),visible:Ee==="loading"})}const qo=h.icon||_?.[Ee]||Fu(Ee);var Xr,Qr;return E.createElement("li",{tabIndex:0,ref:Ve,className:ze(ce,Mo,$?.toast,h==null||(e=h.classNames)==null?void 0:e.toast,$?.default,$?.[Ee],h==null||(t=h.classNames)==null?void 0:t[Ee]),"data-sonner-toast":"","data-rich-colors":(Xr=h.richColors)!=null?Xr:T,"data-styled":!(h.jsx||h.unstyled||f),"data-mounted":R,"data-promise":!!h.promise,"data-swiped":ee,"data-removed":Z,"data-visible":Do,"data-y-position":Fo,"data-x-position":Bo,"data-index":y,"data-front":$o,"data-swiping":P,"data-dismissible":_t,"data-type":Ee,"data-invert":zo,"data-swipe-out":ne,"data-swipe-direction":K,"data-expanded":!!(b||re&&R),"data-testid":h.testId,style:{"--index":y,"--toasts-before":y,"--z-index":w.length-y,"--offset":`${Z?qe:Nt.current}px`,"--initial-height":re?"auto":`${Jt}px`,...O,...h.style},onDragEnd:()=>{L(!1),Y(null),St.current=null},onPointerDown:q=>{q.button!==2&&(Hs||!_t||(Kr.current=new Date,$e(Nt.current),q.target.setPointerCapture(q.pointerId),q.target.tagName!=="BUTTON"&&(L(!0),St.current={x:q.clientX,y:q.clientY})))},onPointerUp:()=>{var q,ve,we;if(ne||!_t)return;St.current=null;const Ce=Number(((q=Ve.current)==null?void 0:q.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),hs=Number(((ve=Ve.current)==null?void 0:ve.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),be=new Date().getTime()-((we=Kr.current)==null?void 0:we.getTime()),Ae=J==="x"?Ce:hs,fs=Math.abs(Ae)/be;if(Math.abs(Ae)>=oh||fs>.11){$e(Nt.current),h.onDismiss==null||h.onDismiss.call(h,h),ye(J==="x"?Ce>0?"right":"left":hs>0?"down":"up"),Ze(),G(!0);return}else{var De,Me;(De=Ve.current)==null||De.style.setProperty("--swipe-amount-x","0px"),(Me=Ve.current)==null||Me.style.setProperty("--swipe-amount-y","0px")}se(!1),L(!1),Y(null)},onPointerMove:q=>{var ve,we,Ce;if(!St.current||!_t||((ve=window.getSelection())==null?void 0:ve.toString().length)>0)return;const be=q.clientY-St.current.y,Ae=q.clientX-St.current.x;var fs;const De=(fs=s.swipeDirections)!=null?fs:lh(j);!J&&(Math.abs(Ae)>1||Math.abs(be)>1)&&Y(Math.abs(Ae)>Math.abs(be)?"x":"y");let Me={x:0,y:0};const ea=lt=>1/(1.5+Math.abs(lt)/20);if(J==="y"){if(De.includes("top")||De.includes("bottom"))if(De.includes("top")&&be<0||De.includes("bottom")&&be>0)Me.y=be;else{const lt=be*ea(be);Me.y=Math.abs(lt)<Math.abs(be)?lt:be}}else if(J==="x"&&(De.includes("left")||De.includes("right")))if(De.includes("left")&&Ae<0||De.includes("right")&&Ae>0)Me.x=Ae;else{const lt=Ae*ea(Ae);Me.x=Math.abs(lt)<Math.abs(Ae)?lt:Ae}(Math.abs(Me.x)>0||Math.abs(Me.y)>0)&&se(!0),(we=Ve.current)==null||we.style.setProperty("--swipe-amount-x",`${Me.x}px`),(Ce=Ve.current)==null||Ce.style.setProperty("--swipe-amount-y",`${Me.y}px`)}},Uo&&!h.jsx&&Ee!=="loading"?E.createElement("button",{"aria-label":k,"data-disabled":Hs,"data-close-button":!0,onClick:Hs||!_t?()=>{}:()=>{Ze(),h.onDismiss==null||h.onDismiss.call(h,h)},className:ze($?.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(Qr=_?.close)!=null?Qr:Ku):null,(Ee||h.icon||h.promise)&&h.icon!==null&&(_?.[Ee]!==null||h.icon)?E.createElement("div",{"data-icon":"",className:ze($?.icon,h==null||(n=h.classNames)==null?void 0:n.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Ho():null,h.type!=="loading"?qo:null):null,E.createElement("div",{"data-content":"",className:ze($?.content,h==null||(o=h.classNames)==null?void 0:o.content)},E.createElement("div",{"data-title":"",className:ze($?.title,h==null||(i=h.classNames)==null?void 0:i.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?E.createElement("div",{"data-description":"",className:ze(ie,Lo,$?.description,h==null||(l=h.classNames)==null?void 0:l.description)},typeof h.description=="function"?h.description():h.description):null),E.isValidElement(h.cancel)?h.cancel:h.cancel&&ws(h.cancel)?E.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||C,onClick:q=>{ws(h.cancel)&&_t&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,q),Ze())},className:ze($?.cancelButton,h==null||(c=h.classNames)==null?void 0:c.cancelButton)},h.cancel.label):null,E.isValidElement(h.action)?h.action:h.action&&ws(h.action)?E.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||F,onClick:q=>{ws(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,q),!q.defaultPrevented&&Ze())},className:ze($?.actionButton,h==null||(d=h.classNames)==null?void 0:d.actionButton)},h.action.label):null)};function Ka(){if(typeof window>"u"||typeof document>"u")return"ltr";const s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function dh(s,e){const t={};return[s,e].forEach((r,n)=>{const o=n===1,i=o?"--mobile-offset":"--offset",l=o?rh:sh;function c(d){["top","right","bottom","left"].forEach(u=>{t[`${i}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(d=>{r[d]===void 0?t[`${i}-${d}`]=l:t[`${i}-${d}`]=typeof r[d]=="number"?`${r[d]}px`:r[d]}):c(l)}),t}const uh=E.forwardRef(function(e,t){const{id:r,invert:n,position:o="bottom-right",hotkey:i=["altKey","KeyT"],expand:l,closeButton:c,className:d,offset:u,mobileOffset:h,theme:f="light",richColors:p,duration:g,style:v,visibleToasts:x=th,toastOptions:y,dir:w=Ka(),gap:b=nh,icons:N,containerAriaLabel:T="Notifications"}=e,[S,O]=E.useState([]),C=E.useMemo(()=>r?S.filter(R=>R.toasterId===r):S.filter(R=>!R.toasterId),[S,r]),F=E.useMemo(()=>Array.from(new Set([o].concat(C.filter(R=>R.position).map(R=>R.position)))),[C,o]),[ce,ie]=E.useState([]),[oe,j]=E.useState(!1),[V,re]=E.useState(!1),[$,_]=E.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),k=E.useRef(null),J=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),Y=E.useRef(null),K=E.useRef(!1),ye=E.useCallback(R=>{O(B=>{var Z;return(Z=B.find(de=>de.id===R.id))!=null&&Z.delete||_e.dismiss(R.id),B.filter(({id:de})=>de!==R.id)})},[]);return E.useEffect(()=>_e.subscribe(R=>{if(R.dismiss){requestAnimationFrame(()=>{O(B=>B.map(Z=>Z.id===R.id?{...Z,delete:!0}:Z))});return}setTimeout(()=>{Yo.flushSync(()=>{O(B=>{const Z=B.findIndex(de=>de.id===R.id);return Z!==-1?[...B.slice(0,Z),{...B[Z],...R},...B.slice(Z+1)]:[R,...B]})})})}),[S]),E.useEffect(()=>{if(f!=="system"){_(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?_("dark"):_("light")),typeof window>"u")return;const R=window.matchMedia("(prefers-color-scheme: dark)");try{R.addEventListener("change",({matches:B})=>{_(B?"dark":"light")})}catch{R.addListener(({matches:Z})=>{try{_(Z?"dark":"light")}catch(de){console.error(de)}})}},[f]),E.useEffect(()=>{S.length<=1&&j(!1)},[S]),E.useEffect(()=>{const R=B=>{var Z;if(i.every(L=>B[L]||B.code===L)){var P;j(!0),(P=k.current)==null||P.focus()}B.code==="Escape"&&(document.activeElement===k.current||(Z=k.current)!=null&&Z.contains(document.activeElement))&&j(!1)};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[i]),E.useEffect(()=>{if(k.current)return()=>{Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null,K.current=!1)}},[k.current]),E.createElement("section",{ref:t,"aria-label":`${T} ${J}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},F.map((R,B)=>{var Z;const[de,P]=R.split("-");return C.length?E.createElement("ol",{key:R,dir:w==="auto"?Ka():w,tabIndex:-1,ref:k,className:d,"data-sonner-toaster":!0,"data-sonner-theme":$,"data-y-position":de,"data-x-position":P,style:{"--front-toast-height":`${((Z=ce[0])==null?void 0:Z.height)||0}px`,"--width":`${ah}px`,"--gap":`${b}px`,...v,...dh(u,h)},onBlur:L=>{K.current&&!L.currentTarget.contains(L.relatedTarget)&&(K.current=!1,Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null))},onFocus:L=>{L.target instanceof HTMLElement&&L.target.dataset.dismissible==="false"||K.current||(K.current=!0,Y.current=L.relatedTarget)},onMouseEnter:()=>j(!0),onMouseMove:()=>j(!0),onMouseLeave:()=>{V||j(!1)},onDragEnd:()=>j(!1),onPointerDown:L=>{L.target instanceof HTMLElement&&L.target.dataset.dismissible==="false"||re(!0)},onPointerUp:()=>re(!1)},C.filter(L=>!L.position&&B===0||L.position===R).map((L,ne)=>{var G,ee;return E.createElement(ch,{key:L.id,icons:N,index:ne,toast:L,defaultRichColors:p,duration:(G=y?.duration)!=null?G:g,className:y?.className,descriptionClassName:y?.descriptionClassName,invert:n,visibleToasts:x,closeButton:(ee=y?.closeButton)!=null?ee:c,interacting:V,position:R,style:y?.style,unstyled:y?.unstyled,classNames:y?.classNames,cancelButtonStyle:y?.cancelButtonStyle,actionButtonStyle:y?.actionButtonStyle,closeButtonAriaLabel:y?.closeButtonAriaLabel,removeToast:ye,toasts:C.filter(se=>se.position==L.position),heights:ce.filter(se=>se.position==L.position),setHeights:ie,expandByDefault:l,gap:b,expanded:oe,swipeDirections:e.swipeDirections})})):null}))});function hh({onNavigate:s,currentPage:e}){const{language:t,setLanguage:r,t:n}=Oe(),{isDark:o,toggleTheme:i}=Ai(),{user:l,logout:c}=Be(),d=[{code:"en",name:"English",flag:"🇬🇧"},{code:"fr",name:"Français",flag:"🇫🇷"},{code:"rw",name:"Kinyarwanda",flag:"🇷🇼"},{code:"sw",name:"Kiswahili",flag:"🇹🇿"}],u=async()=>{try{await c(),M.success(n("logoutSuccess")||"Logged out successfully"),s("home")}catch(h){console.error("Logout error:",h),M.error("Failed to logout")}};return a.jsx("nav",{className:"sticky top-0 z-40 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700 shadow-sm",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>s("home"),children:[a.jsx(Ne,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"}),a.jsx("span",{className:"text-slate-900 dark:text-white",children:"RealEstateConnect"})]}),a.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[a.jsxs("button",{onClick:()=>s("home"),className:`flex items-center gap-2 transition-colors ${e==="home"?"text-emerald-600 dark:text-emerald-400":"text-slate-600 dark:text-slate-300 hover:text-emerald-600 dark:hover:text-emerald-400"}`,children:[a.jsx(Ra,{className:"w-4 h-4"}),n("home")]}),a.jsxs("button",{onClick:()=>s("properties"),"data-page-link":"properties",className:`flex items-center gap-2 transition-colors ${e==="properties"?"text-emerald-600 dark:text-emerald-400":"text-slate-600 dark:text-slate-300 hover:text-emerald-600 dark:hover:text-emerald-400"}`,children:[a.jsx(Ne,{className:"w-4 h-4"}),n("properties")]}),l&&a.jsxs("button",{onClick:()=>s("dashboard"),className:`flex items-center gap-2 transition-colors ${e==="dashboard"?"text-emerald-600 dark:text-emerald-400":"text-slate-600 dark:text-slate-300 hover:text-emerald-600 dark:hover:text-emerald-400"}`,children:[a.jsx(Qs,{className:"w-4 h-4"}),n("dashboard")]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(Ha,{children:[a.jsx(qa,{asChild:!0,children:a.jsx(U,{variant:"ghost",size:"icon",children:a.jsx(Ed,{className:"w-5 h-5"})})}),a.jsx(Wa,{align:"end",children:d.map(h=>a.jsxs(sr,{onClick:()=>r(h.code),className:t===h.code?"bg-emerald-50 dark:bg-emerald-900/20":"",children:[a.jsx("span",{className:"mr-2",children:h.flag}),h.name]},h.code))})]}),a.jsx(U,{variant:"ghost",size:"icon",onClick:i,children:o?a.jsx(Jd,{className:"w-5 h-5"}):a.jsx(Ud,{className:"w-5 h-5"})}),l?a.jsxs(Ha,{children:[a.jsx(qa,{asChild:!0,children:a.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 rounded-md border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors cursor-pointer",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-600 dark:bg-emerald-500 flex items-center justify-center text-white",children:l.name.charAt(0).toUpperCase()}),a.jsx("span",{className:"hidden sm:inline text-slate-900 dark:text-white",children:l.name})]})}),a.jsxs(Wa,{align:"end",className:"w-48 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-lg",children:[a.jsxs(sr,{onClick:()=>s("dashboard"),className:"cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700",children:[a.jsx(Qs,{className:"w-4 h-4 mr-2"}),n("dashboard")]}),a.jsxs(sr,{onClick:u,className:"cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700",children:[a.jsx(Oa,{className:"w-4 h-4 mr-2"}),n("logout")]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs(U,{variant:"ghost",onClick:()=>s("login"),children:[a.jsx(Od,{className:"w-4 h-4 mr-2"}),n("login")]}),a.jsx(U,{onClick:()=>s("signup"),className:"bg-emerald-600 hover:bg-emerald-700",children:n("signup")})]})]})]}),a.jsxs("div",{className:"md:hidden flex items-center justify-around py-3 border-t border-slate-200 dark:border-slate-700",children:[a.jsxs("button",{onClick:()=>s("home"),className:`flex flex-col items-center gap-1 transition-colors ${e==="home"?"text-emerald-600 dark:text-emerald-400":"text-slate-600 dark:text-slate-300"}`,children:[a.jsx(Ra,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs",children:n("home")})]}),a.jsxs("button",{onClick:()=>s("properties"),className:`flex flex-col items-center gap-1 transition-colors ${e==="properties"?"text-emerald-600 dark:text-emerald-400":"text-slate-600 dark:text-slate-300"}`,children:[a.jsx(Ne,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs",children:n("properties")})]}),l&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>s("dashboard"),className:`flex flex-col items-center gap-1 transition-colors ${e==="dashboard"?"text-emerald-600 dark:text-emerald-400":"text-slate-600 dark:text-slate-300"}`,children:[a.jsx(Qs,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs",children:n("dashboard")})]}),a.jsxs("button",{onClick:u,className:"flex flex-col items-center gap-1 transition-colors text-slate-600 dark:text-slate-300",children:[a.jsx(Oa,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs",children:n("logout")})]})]})]})]})})}function le({className:s,type:e,...t}){return a.jsx("input",{type:e,"data-slot":"input",className:Q("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...t})}const fh="/assets/e1a587ce7ef7c99f69dfeb2aaa665d646a3888bd-D_mi5KwW.png",ph="/assets/1db5a46dacbb00b7d2fcf3670dc927141d4e5b24-Dh4zUu8j.png",mh="/assets/f98f42637a565acfc2ddc8bd14a30549968f5e2d-CgU6Ru3I.png";function gh({onSearch:s}){const{t:e}=Oe(),[t,r]=m.useState(""),[n,o]=m.useState(0),i=[fh,ph,mh];m.useEffect(()=>{const d=setInterval(()=>{o(u=>(u+1)%i.length)},5e3);return()=>clearInterval(d)},[]);const l=d=>{d.preventDefault(),s(t)},c=[{name:e("nyarugenge"),value:"Nyarugenge"},{name:e("kicukiro"),value:"Kicukiro"},{name:e("gasabo"),value:"Gasabo"}];return a.jsxs("div",{className:"relative text-white overflow-hidden min-h-[600px]",children:[a.jsx("div",{className:"absolute inset-0",children:i.map((d,u)=>a.jsx("div",{className:`absolute inset-0 transition-all duration-1000 ease-in-out ${n===u?"scale-105":"scale-100"}`,style:{opacity:n===u?1:0,backgroundImage:`url(${d})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",transform:n===u?"scale(1.05)":"scale(1)",transition:"opacity 1s ease-in-out, transform 5s ease-in-out"}},u))}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-700 via-emerald-800/75 to-slate-900/80 dark:from-emerald-950/85 dark:via-slate-900/80 dark:to-slate-950/85"}),a.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 md:py-32",children:a.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[a.jsx("h1",{className:"text-white text-4xl mb-6 animate-fade-in",children:e("heroTitle")}),a.jsx("p",{className:"text-emerald-50 text-lg md:text-xl mb-10",children:e("heroSubtitle")}),a.jsxs("form",{onSubmit:l,className:"flex flex-col sm:flex-row gap-3 max-w-2xl mx-auto mb-8",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(gr,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsx(le,{type:"text",value:t,onChange:d=>r(d.target.value),placeholder:e("searchPlaceholder"),className:"pl-12 h-14 bg-white dark:bg-slate-800 border-0 shadow-lg text-slate-900 dark:text-white"})]}),a.jsxs(U,{type:"submit",size:"lg",className:"h-14 px-8 bg-slate-900 hover:bg-slate-800 dark:bg-slate-100 dark:hover:bg-slate-200 dark:text-slate-900 shadow-lg",children:[a.jsx(gr,{className:"w-5 h-5 mr-2"}),e("searchButton")]})]}),a.jsx("div",{className:"flex flex-wrap items-center justify-center gap-3 mb-8",children:c.map(d=>a.jsxs("button",{onClick:()=>s(d.value),className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-full transition-colors",children:[a.jsx(Is,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:d.name})]},d.value))}),a.jsx("div",{className:"flex items-center justify-center gap-2",children:i.map((d,u)=>a.jsx("button",{onClick:()=>o(u),className:`h-2 rounded-full transition-all duration-300 ${n===u?"w-8 bg-white":"w-2 bg-white/40 hover:bg-white/60"}`,"aria-label":`Go to slide ${u+1}`},u))})]})}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:a.jsx("svg",{viewBox:"0 0 1440 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-auto",children:a.jsx("path",{d:"M0 120L60 110C120 100 240 80 360 70C480 60 600 60 720 65C840 70 960 80 1080 85C1200 90 1320 90 1380 90L1440 90V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z",className:"fill-slate-50 dark:fill-slate-900"})})})]})}const vh=zr("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ke({className:s,variant:e,asChild:t=!1,...r}){const n=t?Ja:"span";return a.jsx(n,{"data-slot":"badge",className:Q(vh({variant:e}),s),...r})}const xh="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function kr(s){const[e,t]=m.useState(!1),r=()=>{t(!0)},{src:n,alt:o,style:i,className:l,...c}=s;return e?a.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${l??""}`,style:i,children:a.jsx("div",{className:"flex items-center justify-center w-full h-full",children:a.jsx("img",{src:xh,alt:"Error loading image",...c,"data-original-url":n})})}):a.jsx("img",{src:n,alt:o,className:l,style:i,...c,onError:r})}function vt({property:s,onViewDetails:e,isFavorite:t,onFavoriteToggle:r}){const{t:n}=Oe(),{user:o,accessToken:i}=Be(),[l,c]=m.useState(!1);if(!s||!s.id)return null;const d=async u=>{if(u.stopPropagation(),!o||!i){M.error("Please login to save favorites");return}c(!0);try{t?(await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/favorites/${s.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${i}`}})).ok&&(M.success(n("removedFromFavorites")),r?.()):(await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/favorites`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({propertyId:s.id})})).ok&&(M.success(n("addedToFavorites")),r?.())}catch(h){console.error("Failed to toggle favorite:",h),M.error("Failed to update favorites")}finally{c(!1)}};return a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden cursor-pointer group",onClick:()=>e(s),children:[a.jsxs("div",{className:"relative h-48 overflow-hidden",children:[a.jsx(kr,{src:s.images?.[0]||"https://images.unsplash.com/photo-5129174808009991f1c4c750",alt:s.title||"Property",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),s.status==="sold"&&a.jsx("div",{className:"absolute top-3 left-3",children:a.jsxs(ke,{className:"bg-red-600 text-white flex items-center gap-1",children:[a.jsx(Ye,{className:"w-3 h-3"}),n("noLongerOnSale")]})}),s.status==="pending"&&a.jsx("div",{className:"absolute top-3 left-3",children:a.jsx(ke,{className:"bg-yellow-600 text-white",children:n("pending")})}),o&&o.role!=="admin"&&a.jsx("button",{onClick:d,disabled:l,className:"absolute top-3 right-3 p-2 bg-white dark:bg-slate-800 rounded-full shadow-md hover:scale-110 transition-transform",children:a.jsx(Es,{className:`w-5 h-5 ${t?"fill-red-500 text-red-500":"text-slate-400 dark:text-slate-500"}`})}),a.jsx("div",{className:"absolute bottom-3 left-3",children:a.jsx(ke,{className:"bg-emerald-600 text-white capitalize",children:n(s.type)||"Property"})})]}),a.jsxs("div",{className:"p-5",children:[a.jsx("h3",{className:"text-slate-900 dark:text-white mb-2 line-clamp-1",children:s.title||"Untitled Property"}),a.jsxs("div",{className:"flex items-center gap-1 text-slate-600 dark:text-slate-300 mb-3",children:[a.jsx(Is,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),a.jsx("span",{className:"text-sm",children:s.location||"Location not specified"})]}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm line-clamp-2 mb-4",children:s.description||"No description available"}),a.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-slate-600 dark:text-slate-400",children:[s.bedrooms&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Cn,{className:"w-4 h-4"}),a.jsx("span",{children:s.bedrooms})]}),s.bathrooms&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(En,{className:"w-4 h-4"}),a.jsx("span",{children:s.bathrooms})]}),s.area&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(An,{className:"w-4 h-4"}),a.jsxs("span",{children:[s.area,"m²"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-700",children:[a.jsx("div",{children:a.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400",children:[s.price?s.price.toLocaleString():"0"," RWF"]})}),a.jsx(U,{variant:"outline",size:"sm",onClick:u=>{u.stopPropagation(),e(s)},children:n("view")})]})]})]})}function Rs({...s}){return a.jsx(Qo,{"data-slot":"dialog",...s})}function bh({...s}){return a.jsx(Xo,{"data-slot":"dialog-portal",...s})}const Wn=m.forwardRef(({className:s,...e},t)=>a.jsx(Ya,{ref:t,"data-slot":"dialog-overlay",className:Q("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...e}));Wn.displayName=Ya.displayName;const ds=m.forwardRef(({className:s,children:e,...t},r)=>a.jsxs(bh,{"data-slot":"dialog-portal",children:[a.jsx(Wn,{}),a.jsxs(Za,{ref:r,"data-slot":"dialog-content",className:Q("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),"aria-describedby":t["aria-describedby"]||void 0,...t,children:[e,a.jsxs(Zo,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[a.jsx(Br,{}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ds.displayName=Za.displayName;function Os({className:s,...e}){return a.jsx("div",{"data-slot":"dialog-header",className:Q("flex flex-col gap-2 text-center sm:text-left",s),...e})}function yh({className:s,...e}){return a.jsx("div",{"data-slot":"dialog-footer",className:Q("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...e})}function $s({className:s,...e}){return a.jsx(ei,{"data-slot":"dialog-title",className:Q("text-lg leading-none font-semibold",s),...e})}function Ds({className:s,...e}){return a.jsx(ti,{"data-slot":"dialog-description",className:Q("text-muted-foreground text-sm",s),...e})}var wh="Label",Vn=m.forwardRef((s,e)=>a.jsx(ge.label,{...s,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(s.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Vn.displayName=wh;var kh=Vn;function X({className:s,...e}){return a.jsx(kh,{"data-slot":"label",className:Q("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...e})}function qr({className:s,...e}){return a.jsx("textarea",{"data-slot":"textarea",className:Q("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...e})}function Kn(s){const e=m.useRef({value:s,previous:s});return m.useMemo(()=>(e.current.value!==s&&(e.current.previous=e.current.value,e.current.value=s),e.current.previous),[s])}var Wr="Radio",[jh,Gn]=Rr(Wr),[_h,Nh]=jh(Wr),Jn=m.forwardRef((s,e)=>{const{__scopeRadio:t,name:r,checked:n=!1,required:o,disabled:i,value:l="on",onCheck:c,form:d,...u}=s,[h,f]=m.useState(null),p=Pe(e,x=>f(x)),g=m.useRef(!1),v=h?d||!!h.closest("form"):!0;return a.jsxs(_h,{scope:t,checked:n,disabled:i,children:[a.jsx(ge.button,{type:"button",role:"radio","aria-checked":n,"data-state":Qn(n),"data-disabled":i?"":void 0,disabled:i,value:l,...u,ref:p,onClick:fe(s.onClick,x=>{n||c?.(),v&&(g.current=x.isPropagationStopped(),g.current||x.stopPropagation())})}),v&&a.jsx(Xn,{control:h,bubbles:!g.current,name:r,value:l,checked:n,required:o,disabled:i,form:d,style:{transform:"translateX(-100%)"}})]})});Jn.displayName=Wr;var Yn="RadioIndicator",Zn=m.forwardRef((s,e)=>{const{__scopeRadio:t,forceMount:r,...n}=s,o=Nh(Yn,t);return a.jsx(ai,{present:r||o.checked,children:a.jsx(ge.span,{"data-state":Qn(o.checked),"data-disabled":o.disabled?"":void 0,...n,ref:e})})});Zn.displayName=Yn;var Sh="RadioBubbleInput",Xn=m.forwardRef(({__scopeRadio:s,control:e,checked:t,bubbles:r=!0,...n},o)=>{const i=m.useRef(null),l=Pe(i,o),c=Kn(t),d=ni(e);return m.useEffect(()=>{const u=i.current;if(!u)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==t&&p){const g=new Event("click",{bubbles:r});p.call(u,t),u.dispatchEvent(g)}},[c,t,r]),a.jsx(ge.input,{type:"radio","aria-hidden":!0,defaultChecked:t,...n,tabIndex:-1,ref:l,style:{...n.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Xn.displayName=Sh;function Qn(s){return s?"checked":"unchecked"}var Eh=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ms="RadioGroup",[Ch]=Rr(Ms,[Xa,Gn]),eo=Xa(),to=Gn(),[Th,Ph]=Ch(Ms),so=m.forwardRef((s,e)=>{const{__scopeRadioGroup:t,name:r,defaultValue:n,value:o,required:i=!1,disabled:l=!1,orientation:c,dir:d,loop:u=!0,onValueChange:h,...f}=s,p=eo(t),g=Qa(d),[v,x]=rr({prop:o,defaultProp:n??null,onChange:h,caller:Ms});return a.jsx(Th,{scope:t,name:r,required:i,disabled:l,value:v,onValueChange:x,children:a.jsx(si,{asChild:!0,...p,orientation:c,dir:g,loop:u,children:a.jsx(ge.div,{role:"radiogroup","aria-required":i,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g,...f,ref:e})})})});so.displayName=Ms;var ro="RadioGroupItem",ao=m.forwardRef((s,e)=>{const{__scopeRadioGroup:t,disabled:r,...n}=s,o=Ph(ro,t),i=o.disabled||r,l=eo(t),c=to(t),d=m.useRef(null),u=Pe(e,d),h=o.value===n.value,f=m.useRef(!1);return m.useEffect(()=>{const p=v=>{Eh.includes(v.key)&&(f.current=!0)},g=()=>f.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",g)}},[]),a.jsx(ri,{asChild:!0,...l,focusable:!i,active:h,children:a.jsx(Jn,{disabled:i,required:o.required,checked:h,...c,...n,name:o.name,ref:u,onCheck:()=>o.onValueChange(n.value),onKeyDown:fe(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:fe(n.onFocus,()=>{f.current&&d.current?.click()})})})});ao.displayName=ro;var Ah="RadioGroupIndicator",no=m.forwardRef((s,e)=>{const{__scopeRadioGroup:t,...r}=s,n=to(t);return a.jsx(Zn,{...n,...r,ref:e})});no.displayName=Ah;var Ih=so,Rh=ao,Oh=no;function jr({className:s,...e}){return a.jsx(Ih,{"data-slot":"radio-group",className:Q("grid gap-3",s),...e})}function mt({className:s,...e}){return a.jsx(Rh,{"data-slot":"radio-group-item",className:Q("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...e,children:a.jsx(Oh,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:a.jsx(kd,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function $h({property:s,isOpen:e,onClose:t,onSuccess:r}){const{t:n}=Oe(),{user:o,accessToken:i}=Be(),[l,c]=m.useState(!1),[d,u]=m.useState("purchase"),[h,f]=m.useState("mobile_money"),[p,g]=m.useState({phone:"",alternativePhone:"",address:"",notes:""}),v=async x=>{if(x.preventDefault(),!o||o.role!=="customer"){M.error("Only customers can make bookings");return}c(!0);try{const y=await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/bookings`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({propertyId:s.id,bookingType:d,paymentMethod:h,amount:s.price,contactInfo:p})});if(y.ok){const w=await y.json();M.success(w.message||"Booking created successfully!"),r(),t()}else{const w=await y.json();M.error(w.error||"Failed to create booking")}}catch(y){console.error("Booking error:",y),M.error("Failed to create booking")}finally{c(!1)}};return a.jsx(Rs,{open:e,onOpenChange:t,children:a.jsxs(ds,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(Os,{children:[a.jsx($s,{className:"text-slate-900 dark:text-white",children:"Book Property"}),a.jsxs(Ds,{className:"text-slate-600 dark:text-slate-400",children:["Complete the form below to request booking for ",s.title]})]}),a.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-4 rounded-lg -mt-2",children:[a.jsx("h4",{className:"text-slate-900 dark:text-white mb-1",children:s.title}),a.jsxs("p",{className:"text-emerald-600 dark:text-emerald-400 text-xl",children:[s.price.toLocaleString()," RWF"]}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:s.location})]}),a.jsxs("form",{onSubmit:v,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(X,{className:"mb-3 block",children:"I want to:"}),a.jsxs(jr,{value:d,onValueChange:x=>u(x),children:[a.jsxs("div",{className:"flex items-center space-x-2 p-3 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[a.jsx(mt,{value:"purchase",id:"purchase"}),a.jsx(X,{htmlFor:"purchase",className:"flex-1 cursor-pointer",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Aa,{className:"w-4 h-4"}),a.jsx("span",{children:"Purchase this property"})]})})]}),a.jsxs("div",{className:"flex items-center space-x-2 p-3 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[a.jsx(mt,{value:"rent",id:"rent"}),a.jsx(X,{htmlFor:"rent",className:"flex-1 cursor-pointer",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pn,{className:"w-4 h-4"}),a.jsx("span",{children:"Rent this property"})]})})]})]})]}),a.jsxs("div",{children:[a.jsx(X,{className:"mb-3 block",children:"Payment Method:"}),a.jsxs(jr,{value:h,onValueChange:f,children:[a.jsxs("div",{className:"flex items-center space-x-2 p-3 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[a.jsx(mt,{value:"mobile_money",id:"mobile_money"}),a.jsx(X,{htmlFor:"mobile_money",className:"flex-1 cursor-pointer",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Fr,{className:"w-4 h-4"}),a.jsx("span",{children:"Mobile Money (MTN, Airtel)"})]})})]}),a.jsxs("div",{className:"flex items-center space-x-2 p-3 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[a.jsx(mt,{value:"bank_transfer",id:"bank_transfer"}),a.jsx(X,{htmlFor:"bank_transfer",className:"flex-1 cursor-pointer",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Aa,{className:"w-4 h-4"}),a.jsx("span",{children:"Bank Transfer"})]})})]}),a.jsxs("div",{className:"flex items-center space-x-2 p-3 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[a.jsx(mt,{value:"cash",id:"cash"}),a.jsx(X,{htmlFor:"cash",className:"flex-1 cursor-pointer",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(su,{className:"w-4 h-4"}),a.jsx("span",{children:"Cash Payment"})]})})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-slate-900 dark:text-white",children:"Contact Information"}),a.jsxs("div",{children:[a.jsx(X,{htmlFor:"phone",children:"Phone Number *"}),a.jsx(le,{id:"phone",type:"tel",value:p.phone,onChange:x=>g({...p,phone:x.target.value}),placeholder:"+250 xxx xxx xxx",required:!0})]}),a.jsxs("div",{children:[a.jsx(X,{htmlFor:"alternativePhone",children:"Alternative Phone"}),a.jsx(le,{id:"alternativePhone",type:"tel",value:p.alternativePhone,onChange:x=>g({...p,alternativePhone:x.target.value}),placeholder:"+250 xxx xxx xxx"})]}),a.jsxs("div",{children:[a.jsx(X,{htmlFor:"address",children:"Your Address *"}),a.jsx(le,{id:"address",value:p.address,onChange:x=>g({...p,address:x.target.value}),placeholder:"Enter your current address",required:!0})]}),a.jsxs("div",{children:[a.jsx(X,{htmlFor:"notes",children:"Additional Notes"}),a.jsx(qr,{id:"notes",value:p.notes,onChange:x=>g({...p,notes:x.target.value}),placeholder:"Any special requirements or questions?",rows:3})]})]}),a.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Amount:"}),a.jsxs("span",{className:"text-2xl text-emerald-600 dark:text-emerald-400",children:[s.price.toLocaleString()," RWF"]})]}),a.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["The property owner will contact you to finalize the ",d," details and payment."]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx(U,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Cancel"}),a.jsx(U,{type:"submit",disabled:l,className:"flex-1 bg-emerald-600 hover:bg-emerald-700",children:l?a.jsxs(a.Fragment,{children:[a.jsx(xt,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):"Confirm Booking"})]})]})]})})}function Ls({property:s,isOpen:e,onClose:t,onFavoriteToggle:r}){const{t:n}=Oe(),{user:o,accessToken:i}=Be(),[l,c]=m.useState(0),[d,u]=m.useState([]),[h,f]=m.useState(!1),[p,g]=m.useState(!1),[v,x]=m.useState(!1);m.useEffect(()=>{e&&s&&(y(),w())},[e,s]);const y=async()=>{try{const N=await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/properties?location=${s.location}`,{headers:{Authorization:`Bearer ${i||""}`}});if(N.ok){const S=(await N.json()).properties.filter(O=>O.id!==s.id).slice(0,3);u(S)}}catch(N){console.error("Failed to fetch related properties:",N)}},w=async()=>{if(!(!o||!i))try{const N=await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/favorites`,{headers:{Authorization:`Bearer ${i}`}});if(N.ok){const T=await N.json();f(T.properties.some(S=>S.id===s.id))}}catch(N){console.error("Failed to check favorite status:",N)}},b=async()=>{if(!o||!i){M.error("Please login to save favorites");return}g(!0);try{h?(await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/favorites/${s.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${i}`}})).ok&&(f(!1),M.success(n("removedFromFavorites")),r?.()):(await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/favorites`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({propertyId:s.id})})).ok&&(f(!0),M.success(n("addedToFavorites")),r?.())}catch(N){console.error("Failed to toggle favorite:",N),M.error("Failed to update favorites")}finally{g(!1)}};return a.jsxs(Rs,{open:e,onOpenChange:t,children:[a.jsxs(ds,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(Os,{children:[a.jsxs($s,{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-slate-900 dark:text-white",children:s.title}),s.status==="sold"&&a.jsxs(ke,{className:"bg-red-600 text-white flex items-center gap-1",children:[a.jsx(Ye,{className:"w-3 h-3"}),n("noLongerOnSale")]})]}),a.jsx(Ds,{children:"View detailed information about this property"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"aspect-video rounded-lg overflow-hidden",children:a.jsx(kr,{src:s.images[l]||"https://images.unsplash.com/photo-1512917774080-9991f1c4c750",alt:s.title,className:"w-full h-full object-cover"})}),s.images.length>1&&a.jsx("div",{className:"flex gap-2 mt-3 overflow-x-auto",children:s.images.map((N,T)=>a.jsx("button",{onClick:()=>c(T),className:`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all ${l===T?"border-emerald-600 dark:border-emerald-400":"border-slate-200 dark:border-slate-700"}`,children:a.jsx(kr,{src:N,alt:`${s.title} ${T+1}`,className:"w-full h-full object-cover"})},T))})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl text-emerald-600 dark:text-emerald-400 mb-2",children:[s.price.toLocaleString()," RWF"]}),a.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[a.jsx(Is,{className:"w-5 h-5"}),a.jsx("span",{children:s.location})]})]}),o&&o.role!=="admin"&&a.jsxs(U,{onClick:b,disabled:p,variant:h?"default":"outline",className:h?"bg-red-500 hover:bg-red-600":"",children:[a.jsx(Es,{className:`w-4 h-4 mr-2 ${h?"fill-white":""}`}),n(h?"removeFromFavorites":"saveToFavorites")]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[a.jsx("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg flex items-center justify-center",children:a.jsx(Cn,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:n("bedrooms")}),a.jsx("div",{className:"text-slate-900 dark:text-white",children:s.bedrooms||"N/A"})]})]}),a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[a.jsx("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg flex items-center justify-center",children:a.jsx(En,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:n("bathrooms")}),a.jsx("div",{className:"text-slate-900 dark:text-white",children:s.bathrooms||"N/A"})]})]}),a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[a.jsx("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg flex items-center justify-center",children:a.jsx(An,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:n("area")}),a.jsx("div",{className:"text-slate-900 dark:text-white",children:s.area?`${s.area}m²`:"N/A"})]})]}),a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[a.jsx("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg flex items-center justify-center",children:a.jsx(hd,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Type"}),a.jsx("div",{className:"text-slate-900 dark:text-white capitalize",children:n(s.type)})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-slate-900 dark:text-white mb-3",children:n("description")}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400 leading-relaxed",children:s.description})]}),s.status!=="sold"&&o&&o.role==="customer"&&a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs(U,{className:"flex-1 bg-emerald-600 hover:bg-emerald-700",onClick:()=>x(!0),children:[a.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Book Property"]}),a.jsxs(U,{variant:"outline",className:"flex-1",children:[a.jsx(Fr,{className:"w-4 h-4 mr-2"}),n("contactOwner")]})]}),s.status!=="sold"&&(!o||o.role!=="customer")&&a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg text-center",children:a.jsx("p",{className:"text-blue-800 dark:text-blue-300",children:o?"Only customers can book properties":"Please login as a customer to book this property"})}),d.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-slate-900 dark:text-white mb-4",children:n("relatedProperties")}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:d.map(N=>a.jsx("div",{className:"cursor-pointer",onClick:()=>{t(),setTimeout(()=>{},300)},children:a.jsx(vt,{property:N,onViewDetails:()=>{}})},N.id))})]})]})]}),v&&a.jsx($h,{property:s,isOpen:v,onClose:()=>x(!1),onSuccess:()=>{M.success("Booking created successfully!"),x(!1)}})]})}const Dh=zr("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function zt({className:s,variant:e,...t}){return a.jsx("div",{"data-slot":"alert",role:"alert",className:Q(Dh({variant:e}),s),...t})}function Ht({className:s,...e}){return a.jsx("div",{"data-slot":"alert-description",className:Q("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...e})}function oo(){const[s,e]=m.useState("loading"),[t,r]=m.useState(0),[n,o]=m.useState("");m.useEffect(()=>{i()},[]);const i=async()=>{try{const l=await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/properties`);if(l.ok){const d=(await l.json()).properties?.length||0;r(d),e(d>0?"success":"empty"),console.log("[PropertyStatusIndicator] Properties count:",d)}else{const c=await l.text();console.error("[PropertyStatusIndicator] Failed to fetch properties:",l.status,c),r(0),e("empty")}}catch(l){console.error("[PropertyStatusIndicator] Exception:",l),r(0),e("empty")}};return s==="loading"?a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[a.jsx(xt,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{children:"Checking property database..."})]}):s==="success"?a.jsxs(zt,{className:"border-emerald-200 bg-emerald-50 dark:bg-emerald-950 dark:border-emerald-900",children:[a.jsx(Ye,{className:"h-4 w-4 text-emerald-600"}),a.jsxs(Ht,{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-emerald-900 dark:text-emerald-100",children:"Database Connected"}),a.jsxs(ke,{className:"bg-emerald-600",children:[t," ",t===1?"property":"properties"," available"]})]})]}):s==="empty"?a.jsxs(zt,{className:"border-amber-200 bg-amber-50 dark:bg-amber-950 dark:border-amber-900",children:[a.jsx(is,{className:"h-4 w-4 text-amber-600"}),a.jsx(Ht,{children:a.jsxs("div",{className:"text-amber-900 dark:text-amber-100",children:[a.jsx("p",{className:"mb-1",children:"Database Connected - No Properties Yet"}),a.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"Properties will appear here once they are uploaded by owners."})]})})]}):a.jsxs(zt,{className:"border-red-200 bg-red-50 dark:bg-red-950 dark:border-red-900",children:[a.jsx(Je,{className:"h-4 w-4 text-red-600"}),a.jsx(Ht,{children:a.jsxs("div",{className:"text-red-900 dark:text-red-100",children:[a.jsx("p",{className:"mb-1",children:"Database Connection Issue"}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:n||"Unable to retrieve properties. Please check the troubleshooting guide."})]})})]})}function Mh({searchQuery:s,onNavigate:e}){const{t}=Oe(),[r,n]=m.useState([]),[o,i]=m.useState(null),[l,c]=m.useState(!0);m.useEffect(()=>{d()},[s]);const d=async()=>{c(!0);try{const f=JSON.parse(localStorage.getItem("properties")||"[]");if(f.length>0){console.log("[HomePage] Found properties in localStorage:",f.length),n(f),c(!1);return}let p=`https://${te}.supabase.co/functions/v1/make-server-d4068603/properties`;s&&(p+=`&location=${s}`),console.log("[HomePage] Fetching properties from:",p),console.log("[HomePage] Access token available:",!!accessToken);const g={};accessToken&&(g.Authorization=`Bearer ${accessToken}`);const v=await fetch(p,{headers:g});if(console.log("[HomePage] Response status:",v.status),v.ok){const x=await v.json();console.log("[HomePage] Received properties:",x.properties?.length||0),console.log("[HomePage] Raw response data:",x),n(x.properties||[])}else{const x=await v.text();console.error("[HomePage] Failed to fetch properties:",v.status,x),n([])}}catch(f){console.error("[HomePage] Exception while fetching properties:",f),n([])}finally{c(!1)}},u=f=>{d()},h=[...r].sort((f,p)=>new Date(p.createdAt).getTime()-new Date(f.createdAt).getTime()).slice(0,6);return a.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900",children:[a.jsx(gh,{onSearch:u}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-slate-900 dark:text-white mb-2",children:s?`Properties in ${s}`:"Latest Properties"}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:s?`Browse available properties in ${s}`:"Discover the newest properties across Rwanda"}),!l&&a.jsx(oo,{})]}),l?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(f=>a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"bg-slate-200 dark:bg-slate-800 h-48 rounded-t-xl"}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-b-xl",children:[a.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded mb-2"}),a.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-2/3"})]})]},f))}):h.length===0?a.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-xl",children:[a.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-4",children:s?`No properties found in ${s}`:"No properties available at the moment"}),!s&&a.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-500",children:"New properties are added regularly by owners. Check back soon!"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(f=>a.jsx(vt,{property:f,onViewDetails:i},f.id))}),r.length>6&&!s&&a.jsxs("div",{className:"text-center mt-8",children:[a.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:["Showing ",h.length," of ",r.length," available properties"]}),a.jsxs(U,{variant:"outline",onClick:()=>e&&e("properties"),className:"group",children:["View all ",r.length," properties",a.jsx(nd,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]})]})]}),o&&a.jsx(Ls,{property:o,isOpen:!!o,onClose:()=>i(null)})]})}function Ga(s,[e,t]){return Math.min(t,Math.max(e,s))}var io=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Lh="VisuallyHidden",Uh=m.forwardRef((s,e)=>a.jsx(ge.span,{...s,ref:e,style:{...io,...s.style}}));Uh.displayName=Lh;var Fh=[" ","Enter","ArrowUp","ArrowDown"],Bh=[" ","Enter"],bt="Select",[Us,Fs,zh]=ii(bt),[Gt]=Rr(bt,[zh,en]),Bs=en(),[Hh,ot]=Gt(bt),[qh,Wh]=Gt(bt),lo=s=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:n,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:f,required:p,form:g}=s,v=Bs(e),[x,y]=m.useState(null),[w,b]=m.useState(null),[N,T]=m.useState(!1),S=Qa(d),[O,C]=rr({prop:r,defaultProp:n??!1,onChange:o,caller:bt}),[F,ce]=rr({prop:i,defaultProp:l,onChange:c,caller:bt}),ie=m.useRef(null),oe=x?g||!!x.closest("form"):!0,[j,V]=m.useState(new Set),re=Array.from(j).map($=>$.props.value).join(";");return a.jsx(oi,{...v,children:a.jsxs(Hh,{required:p,scope:e,trigger:x,onTriggerChange:y,valueNode:w,onValueNodeChange:b,valueNodeHasChildren:N,onValueNodeHasChildrenChange:T,contentId:Or(),value:F,onValueChange:ce,open:O,onOpenChange:C,dir:S,triggerPointerDownPosRef:ie,disabled:f,children:[a.jsx(Us.Provider,{scope:e,children:a.jsx(qh,{scope:s.__scopeSelect,onNativeOptionAdd:m.useCallback($=>{V(_=>new Set(_).add($))},[]),onNativeOptionRemove:m.useCallback($=>{V(_=>{const k=new Set(_);return k.delete($),k})},[]),children:t})}),oe?a.jsxs(Ao,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:h,value:F,onChange:$=>ce($.target.value),disabled:f,form:g,children:[F===void 0?a.jsx("option",{value:""}):null,Array.from(j)]},re):null]})})};lo.displayName=bt;var co="SelectTrigger",uo=m.forwardRef((s,e)=>{const{__scopeSelect:t,disabled:r=!1,...n}=s,o=Bs(t),i=ot(co,t),l=i.disabled||r,c=Pe(e,i.onTriggerChange),d=Fs(t),u=m.useRef("touch"),[h,f,p]=Ro(v=>{const x=d().filter(b=>!b.disabled),y=x.find(b=>b.value===i.value),w=Oo(x,v,y);w!==void 0&&i.onValueChange(w.value)}),g=v=>{l||(i.onOpenChange(!0),p()),v&&(i.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return a.jsx(li,{asChild:!0,...o,children:a.jsx(ge.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Io(i.value)?"":void 0,...n,ref:c,onClick:fe(n.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&g(v)}),onPointerDown:fe(n.onPointerDown,v=>{u.current=v.pointerType;const x=v.target;x.hasPointerCapture(v.pointerId)&&x.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(g(v),v.preventDefault())}),onKeyDown:fe(n.onKeyDown,v=>{const x=h.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&f(v.key),!(x&&v.key===" ")&&Fh.includes(v.key)&&(g(),v.preventDefault())})})})});uo.displayName=co;var ho="SelectValue",fo=m.forwardRef((s,e)=>{const{__scopeSelect:t,className:r,style:n,children:o,placeholder:i="",...l}=s,c=ot(ho,t),{onValueNodeHasChildrenChange:d}=c,u=o!==void 0,h=Pe(e,c.onValueNodeChange);return st(()=>{d(u)},[d,u]),a.jsx(ge.span,{...l,ref:h,style:{pointerEvents:"none"},children:Io(c.value)?a.jsx(a.Fragment,{children:i}):o})});fo.displayName=ho;var Vh="SelectIcon",po=m.forwardRef((s,e)=>{const{__scopeSelect:t,children:r,...n}=s;return a.jsx(ge.span,{"aria-hidden":!0,...n,ref:e,children:r||"▼"})});po.displayName=Vh;var Kh="SelectPortal",mo=s=>a.jsx(ci,{asChild:!0,...s});mo.displayName=Kh;var yt="SelectContent",go=m.forwardRef((s,e)=>{const t=ot(yt,s.__scopeSelect),[r,n]=m.useState();if(st(()=>{n(new DocumentFragment)},[]),!t.open){const o=r;return o?tn.createPortal(a.jsx(vo,{scope:s.__scopeSelect,children:a.jsx(Us.Slot,{scope:s.__scopeSelect,children:a.jsx("div",{children:s.children})})}),o):null}return a.jsx(xo,{...s,ref:e})});go.displayName=yt;var Ue=10,[vo,it]=Gt(yt),Gh="SelectContentImpl",Jh=pi("SelectContent.RemoveScroll"),xo=m.forwardRef((s,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:v,avoidCollisions:x,...y}=s,w=ot(yt,t),[b,N]=m.useState(null),[T,S]=m.useState(null),O=Pe(e,P=>N(P)),[C,F]=m.useState(null),[ce,ie]=m.useState(null),oe=Fs(t),[j,V]=m.useState(!1),re=m.useRef(!1);m.useEffect(()=>{if(b)return ui(b)},[b]),hi();const $=m.useCallback(P=>{const[L,...ne]=oe().map(se=>se.ref.current),[G]=ne.slice(-1),ee=document.activeElement;for(const se of P)if(se===ee||(se?.scrollIntoView({block:"nearest"}),se===L&&T&&(T.scrollTop=0),se===G&&T&&(T.scrollTop=T.scrollHeight),se?.focus(),document.activeElement!==ee))return},[oe,T]),_=m.useCallback(()=>$([C,b]),[$,C,b]);m.useEffect(()=>{j&&_()},[j,_]);const{onOpenChange:k,triggerPointerDownPosRef:J}=w;m.useEffect(()=>{if(b){let P={x:0,y:0};const L=G=>{P={x:Math.abs(Math.round(G.pageX)-(J.current?.x??0)),y:Math.abs(Math.round(G.pageY)-(J.current?.y??0))}},ne=G=>{P.x<=10&&P.y<=10?G.preventDefault():b.contains(G.target)||k(!1),document.removeEventListener("pointermove",L),J.current=null};return J.current!==null&&(document.addEventListener("pointermove",L),document.addEventListener("pointerup",ne,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",L),document.removeEventListener("pointerup",ne,{capture:!0})}}},[b,k,J]),m.useEffect(()=>{const P=()=>k(!1);return window.addEventListener("blur",P),window.addEventListener("resize",P),()=>{window.removeEventListener("blur",P),window.removeEventListener("resize",P)}},[k]);const[Y,K]=Ro(P=>{const L=oe().filter(ee=>!ee.disabled),ne=L.find(ee=>ee.ref.current===document.activeElement),G=Oo(L,P,ne);G&&setTimeout(()=>G.ref.current.focus())}),ye=m.useCallback((P,L,ne)=>{const G=!re.current&&!ne;(w.value!==void 0&&w.value===L||G)&&(F(P),G&&(re.current=!0))},[w.value]),R=m.useCallback(()=>b?.focus(),[b]),B=m.useCallback((P,L,ne)=>{const G=!re.current&&!ne;(w.value!==void 0&&w.value===L||G)&&ie(P)},[w.value]),Z=r==="popper"?_r:bo,de=Z===_r?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:v,avoidCollisions:x}:{};return a.jsx(vo,{scope:t,content:b,viewport:T,onViewportChange:S,itemRefCallback:ye,selectedItem:C,onItemLeave:R,itemTextRefCallback:B,focusSelectedItem:_,selectedItemText:ce,position:r,isPositioned:j,searchRef:Y,children:a.jsx(fi,{as:Jh,allowPinchZoom:!0,children:a.jsx(mi,{asChild:!0,trapped:w.open,onMountAutoFocus:P=>{P.preventDefault()},onUnmountAutoFocus:fe(n,P=>{w.trigger?.focus({preventScroll:!0}),P.preventDefault()}),children:a.jsx(gi,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:P=>P.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:a.jsx(Z,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:P=>P.preventDefault(),...y,...de,onPlaced:()=>V(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:fe(y.onKeyDown,P=>{const L=P.ctrlKey||P.altKey||P.metaKey;if(P.key==="Tab"&&P.preventDefault(),!L&&P.key.length===1&&K(P.key),["ArrowUp","ArrowDown","Home","End"].includes(P.key)){let G=oe().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);if(["ArrowUp","End"].includes(P.key)&&(G=G.slice().reverse()),["ArrowUp","ArrowDown"].includes(P.key)){const ee=P.target,se=G.indexOf(ee);G=G.slice(se+1)}setTimeout(()=>$(G)),P.preventDefault()}})})})})})})});xo.displayName=Gh;var Yh="SelectItemAlignedPosition",bo=m.forwardRef((s,e)=>{const{__scopeSelect:t,onPlaced:r,...n}=s,o=ot(yt,t),i=it(yt,t),[l,c]=m.useState(null),[d,u]=m.useState(null),h=Pe(e,O=>u(O)),f=Fs(t),p=m.useRef(!1),g=m.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:y,focusSelectedItem:w}=i,b=m.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&d&&v&&x&&y){const O=o.trigger.getBoundingClientRect(),C=d.getBoundingClientRect(),F=o.valueNode.getBoundingClientRect(),ce=y.getBoundingClientRect();if(o.dir!=="rtl"){const ee=ce.left-C.left,se=F.left-ee,qe=O.left-se,$e=O.width+qe,Jt=Math.max($e,C.width),jt=window.innerWidth-Ue,We=Ga(se,[Ue,Math.max(Ue,jt-Jt)]);l.style.minWidth=$e+"px",l.style.left=We+"px"}else{const ee=C.right-ce.right,se=window.innerWidth-F.right-ee,qe=window.innerWidth-O.right-se,$e=O.width+qe,Jt=Math.max($e,C.width),jt=window.innerWidth-Ue,We=Ga(se,[Ue,Math.max(Ue,jt-Jt)]);l.style.minWidth=$e+"px",l.style.right=We+"px"}const ie=f(),oe=window.innerHeight-Ue*2,j=v.scrollHeight,V=window.getComputedStyle(d),re=parseInt(V.borderTopWidth,10),$=parseInt(V.paddingTop,10),_=parseInt(V.borderBottomWidth,10),k=parseInt(V.paddingBottom,10),J=re+$+j+k+_,Y=Math.min(x.offsetHeight*5,J),K=window.getComputedStyle(v),ye=parseInt(K.paddingTop,10),R=parseInt(K.paddingBottom,10),B=O.top+O.height/2-Ue,Z=oe-B,de=x.offsetHeight/2,P=x.offsetTop+de,L=re+$+P,ne=J-L;if(L<=B){const ee=ie.length>0&&x===ie[ie.length-1].ref.current;l.style.bottom="0px";const se=d.clientHeight-v.offsetTop-v.offsetHeight,qe=Math.max(Z,de+(ee?R:0)+se+_),$e=L+qe;l.style.height=$e+"px"}else{const ee=ie.length>0&&x===ie[0].ref.current;l.style.top="0px";const qe=Math.max(B,re+v.offsetTop+(ee?ye:0)+de)+ne;l.style.height=qe+"px",v.scrollTop=L-B+v.offsetTop}l.style.margin=`${Ue}px 0`,l.style.minHeight=Y+"px",l.style.maxHeight=oe+"px",r?.(),requestAnimationFrame(()=>p.current=!0)}},[f,o.trigger,o.valueNode,l,d,v,x,y,o.dir,r]);st(()=>b(),[b]);const[N,T]=m.useState();st(()=>{d&&T(window.getComputedStyle(d).zIndex)},[d]);const S=m.useCallback(O=>{O&&g.current===!0&&(b(),w?.(),g.current=!1)},[b,w]);return a.jsx(Xh,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:S,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:a.jsx(ge.div,{...n,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});bo.displayName=Yh;var Zh="SelectPopperPosition",_r=m.forwardRef((s,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:n=Ue,...o}=s,i=Bs(t);return a.jsx(vi,{...i,...o,ref:e,align:r,collisionPadding:n,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});_r.displayName=Zh;var[Xh,Vr]=Gt(yt,{}),Nr="SelectViewport",yo=m.forwardRef((s,e)=>{const{__scopeSelect:t,nonce:r,...n}=s,o=it(Nr,t),i=Vr(Nr,t),l=Pe(e,o.onViewportChange),c=m.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(Us.Slot,{scope:t,children:a.jsx(ge.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:fe(n.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=i;if(f?.current&&h){const p=Math.abs(c.current-u.scrollTop);if(p>0){const g=window.innerHeight-Ue*2,v=parseFloat(h.style.minHeight),x=parseFloat(h.style.height),y=Math.max(v,x);if(y<g){const w=y+p,b=Math.min(g,w),N=w-b;h.style.height=b+"px",h.style.bottom==="0px"&&(u.scrollTop=N>0?N:0,h.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});yo.displayName=Nr;var wo="SelectGroup",[Qh,ef]=Gt(wo),tf=m.forwardRef((s,e)=>{const{__scopeSelect:t,...r}=s,n=Or();return a.jsx(Qh,{scope:t,id:n,children:a.jsx(ge.div,{role:"group","aria-labelledby":n,...r,ref:e})})});tf.displayName=wo;var ko="SelectLabel",sf=m.forwardRef((s,e)=>{const{__scopeSelect:t,...r}=s,n=ef(ko,t);return a.jsx(ge.div,{id:n.id,...r,ref:e})});sf.displayName=ko;var Cs="SelectItem",[rf,jo]=Gt(Cs),_o=m.forwardRef((s,e)=>{const{__scopeSelect:t,value:r,disabled:n=!1,textValue:o,...i}=s,l=ot(Cs,t),c=it(Cs,t),d=l.value===r,[u,h]=m.useState(o??""),[f,p]=m.useState(!1),g=Pe(e,w=>c.itemRefCallback?.(w,r,n)),v=Or(),x=m.useRef("touch"),y=()=>{n||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(rf,{scope:t,value:r,disabled:n,textId:v,isSelected:d,onItemTextChange:m.useCallback(w=>{h(b=>b||(w?.textContent??"").trim())},[]),children:a.jsx(Us.ItemSlot,{scope:t,value:r,disabled:n,textValue:u,children:a.jsx(ge.div,{role:"option","aria-labelledby":v,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...i,ref:g,onFocus:fe(i.onFocus,()=>p(!0)),onBlur:fe(i.onBlur,()=>p(!1)),onClick:fe(i.onClick,()=>{x.current!=="mouse"&&y()}),onPointerUp:fe(i.onPointerUp,()=>{x.current==="mouse"&&y()}),onPointerDown:fe(i.onPointerDown,w=>{x.current=w.pointerType}),onPointerMove:fe(i.onPointerMove,w=>{x.current=w.pointerType,n?c.onItemLeave?.():x.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:fe(i.onPointerLeave,w=>{w.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:fe(i.onKeyDown,w=>{c.searchRef?.current!==""&&w.key===" "||(Bh.includes(w.key)&&y(),w.key===" "&&w.preventDefault())})})})})});_o.displayName=Cs;var es="SelectItemText",No=m.forwardRef((s,e)=>{const{__scopeSelect:t,className:r,style:n,...o}=s,i=ot(es,t),l=it(es,t),c=jo(es,t),d=Wh(es,t),[u,h]=m.useState(null),f=Pe(e,y=>h(y),c.onItemTextChange,y=>l.itemTextRefCallback?.(y,c.value,c.disabled)),p=u?.textContent,g=m.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=d;return st(()=>(v(g),()=>x(g)),[v,x,g]),a.jsxs(a.Fragment,{children:[a.jsx(ge.span,{id:c.textId,...o,ref:f}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?tn.createPortal(o.children,i.valueNode):null]})});No.displayName=es;var So="SelectItemIndicator",Eo=m.forwardRef((s,e)=>{const{__scopeSelect:t,...r}=s;return jo(So,t).isSelected?a.jsx(ge.span,{"aria-hidden":!0,...r,ref:e}):null});Eo.displayName=So;var Sr="SelectScrollUpButton",Co=m.forwardRef((s,e)=>{const t=it(Sr,s.__scopeSelect),r=Vr(Sr,s.__scopeSelect),[n,o]=m.useState(!1),i=Pe(e,r.onScrollButtonChange);return st(()=>{if(t.viewport&&t.isPositioned){let l=function(){const d=c.scrollTop>0;o(d)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),n?a.jsx(Po,{...s,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Co.displayName=Sr;var Er="SelectScrollDownButton",To=m.forwardRef((s,e)=>{const t=it(Er,s.__scopeSelect),r=Vr(Er,s.__scopeSelect),[n,o]=m.useState(!1),i=Pe(e,r.onScrollButtonChange);return st(()=>{if(t.viewport&&t.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;o(u)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),n?a.jsx(Po,{...s,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});To.displayName=Er;var Po=m.forwardRef((s,e)=>{const{__scopeSelect:t,onAutoScroll:r,...n}=s,o=it("SelectScrollButton",t),i=m.useRef(null),l=Fs(t),c=m.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),st(()=>{l().find(u=>u.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),a.jsx(ge.div,{"aria-hidden":!0,...n,ref:e,style:{flexShrink:0,...n.style},onPointerDown:fe(n.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:fe(n.onPointerMove,()=>{o.onItemLeave?.(),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:fe(n.onPointerLeave,()=>{c()})})}),af="SelectSeparator",nf=m.forwardRef((s,e)=>{const{__scopeSelect:t,...r}=s;return a.jsx(ge.div,{"aria-hidden":!0,...r,ref:e})});nf.displayName=af;var Cr="SelectArrow",of=m.forwardRef((s,e)=>{const{__scopeSelect:t,...r}=s,n=Bs(t),o=ot(Cr,t),i=it(Cr,t);return o.open&&i.position==="popper"?a.jsx(xi,{...n,...r,ref:e}):null});of.displayName=Cr;var lf="SelectBubbleInput",Ao=m.forwardRef(({__scopeSelect:s,value:e,...t},r)=>{const n=m.useRef(null),o=Pe(r,n),i=Kn(e);return m.useEffect(()=>{const l=n.current;if(!l)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==e&&u){const h=new Event("change",{bubbles:!0});u.call(l,e),l.dispatchEvent(h)}},[i,e]),a.jsx(ge.select,{...t,style:{...io,...t.style},ref:o,defaultValue:e})});Ao.displayName=lf;function Io(s){return s===""||s===void 0}function Ro(s){const e=di(s),t=m.useRef(""),r=m.useRef(0),n=m.useCallback(i=>{const l=t.current+i;e(l),(function c(d){t.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))})(l)},[e]),o=m.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,n,o]}function Oo(s,e,t){const n=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,o=t?s.indexOf(t):-1;let i=cf(s,Math.max(o,0));n.length===1&&(i=i.filter(d=>d!==t));const c=i.find(d=>d.textValue.toLowerCase().startsWith(n.toLowerCase()));return c!==t?c:void 0}function cf(s,e){return s.map((t,r)=>s[(e+r)%s.length])}var df=lo,uf=uo,hf=fo,ff=po,pf=mo,mf=go,gf=yo,vf=_o,xf=No,bf=Eo,yf=Co,wf=To;function Tr({...s}){return a.jsx(df,{"data-slot":"select",...s})}function Pr({...s}){return a.jsx(hf,{"data-slot":"select-value",...s})}function Ar({className:s,size:e="default",children:t,...r}){return a.jsxs(uf,{"data-slot":"select-trigger","data-size":e,className:Q("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...r,children:[t,a.jsx(ff,{asChild:!0,children:a.jsx(Tn,{className:"size-4 opacity-50"})})]})}function Ir({className:s,children:e,position:t="popper",...r}){return a.jsx(pf,{children:a.jsxs(mf,{"data-slot":"select-content",className:Q("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...r,children:[a.jsx(kf,{}),a.jsx(gf,{className:Q("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),a.jsx(jf,{})]})})}function Ie({className:s,children:e,...t}){return a.jsxs(vf,{"data-slot":"select-item",className:Q("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...t,children:[a.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:a.jsx(bf,{children:a.jsx(pd,{className:"size-4"})})}),a.jsx(xf,{children:e})]})}function kf({className:s,...e}){return a.jsx(yf,{"data-slot":"select-scroll-up-button",className:Q("flex cursor-default items-center justify-center py-1",s),...e,children:a.jsx(vd,{className:"size-4"})})}function jf({className:s,...e}){return a.jsx(wf,{"data-slot":"select-scroll-down-button",className:Q("flex cursor-default items-center justify-center py-1",s),...e,children:a.jsx(Tn,{className:"size-4"})})}function _f(){const{t:s}=Oe(),[e,t]=m.useState([]),[r,n]=m.useState(null),[o,i]=m.useState(!0),[l,c]=m.useState(""),[d,u]=m.useState("all"),[h,f]=m.useState(""),[p,g]=m.useState(""),[v,x]=m.useState(!1);m.useEffect(()=>{y()},[]);const y=async()=>{i(!0);try{let b=`https://${te}.supabase.co/functions/v1/make-server-d4068603/properties`;console.log("[PropertiesPage] Fetching properties from:",b);const N={};accessToken&&(N.Authorization=`Bearer ${accessToken}`);const T=await fetch(b,{headers:N});if(console.log("[PropertiesPage] Response status:",T.status),T.ok){const S=await T.json();console.log("[PropertiesPage] Received data:",S),console.log("[PropertiesPage] Properties count:",S.properties?.length||0);const O=(S.properties||[]).filter(C=>C&&C.id&&C.title);console.log("[PropertiesPage] Valid properties after filter:",O.length),t(O)}else{const S=await T.text();console.error("[PropertiesPage] Failed to fetch properties:",T.status,S),t([])}}catch(b){console.error("[PropertiesPage] Exception while fetching properties:",b),t([])}finally{i(!1)}},w=e.filter(b=>{if(!b||!b.id)return!1;if(l){const N=l.toLowerCase(),T=b.location?.toLowerCase().includes(N),S=b.title?.toLowerCase().includes(N);if(!T&&!S)return!1}return!(d!=="all"&&b.type!==d||h&&b.price&&b.price<Number(h)||p&&b.price&&b.price>Number(p))});return a.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-slate-900 dark:text-white mb-2",children:s("properties")}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Browse all available properties"})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm p-6 mb-8",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(gr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsx(le,{type:"text",value:l,onChange:b=>c(b.target.value),placeholder:s("searchPlaceholder"),className:"pl-10"})]}),a.jsxs(Tr,{value:d,onValueChange:u,children:[a.jsx(Ar,{className:"w-full md:w-48",children:a.jsx(Pr,{placeholder:s("propertyType")})}),a.jsxs(Ir,{children:[a.jsx(Ie,{value:"all",children:"All Types"}),a.jsx(Ie,{value:"house",children:s("house")}),a.jsx(Ie,{value:"apartment",children:s("apartment")}),a.jsx(Ie,{value:"land",children:s("land")})]})]}),a.jsxs(U,{variant:"outline",onClick:()=>x(!v),className:"w-full md:w-auto",children:[a.jsx(Vd,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),v&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-2",children:"Min Price (RWF)"}),a.jsx(le,{type:"number",value:h,onChange:b=>f(b.target.value),placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-2",children:"Max Price (RWF)"}),a.jsx(le,{type:"number",value:p,onChange:b=>g(b.target.value),placeholder:"1000000000"})]})]})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:["Showing ",w.length," ",w.length===1?"property":"properties"]})}),o?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(b=>a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"bg-slate-200 dark:bg-slate-800 h-48 rounded-t-xl"}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-b-xl",children:[a.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded mb-2"}),a.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-2/3"})]})]},b))}):w.length===0?a.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-xl",children:[a.jsx(Ne,{className:"w-16 h-16 mx-auto text-slate-300 dark:text-slate-600 mb-4"}),a.jsx("h3",{className:"text-slate-900 dark:text-white mb-2",children:e.length===0?"No Properties Available":"No Matching Properties"}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-4",children:e.length===0?"New properties are added by owners regularly. Check back soon!":"Try adjusting your filters to see more results"}),e.length>0&&a.jsx(U,{variant:"outline",onClick:()=>{c(""),u("all"),f(""),g("")},children:"Clear All Filters"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(b=>a.jsx(vt,{property:b,onViewDetails:n},b.id))})]}),r&&a.jsx(Ls,{property:r,isOpen:!!r,onClose:()=>n(null)})]})}function Se({className:s,...e}){return a.jsx("div",{"data-slot":"card",className:Q("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",s),...e})}function rt({className:s,...e}){return a.jsx("div",{"data-slot":"card-header",className:Q("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...e})}function at({className:s,...e}){return a.jsx("h4",{"data-slot":"card-title",className:Q("leading-none",s),...e})}function wt({className:s,...e}){return a.jsx("p",{"data-slot":"card-description",className:Q("text-muted-foreground",s),...e})}function Re({className:s,...e}){return a.jsx("div",{"data-slot":"card-content",className:Q("px-6 [&:last-child]:pb-6",s),...e})}function Nf({isOpen:s,onClose:e,onSuccess:t}){const{t:r}=Oe(),{user:n,accessToken:o}=Be(),[i,l]=m.useState(!1),[c,d]=m.useState(!1);if(n?.role!=="owner")return null;const[u,h]=m.useState({title:"",description:"",location:"",price:"",type:"house",bedrooms:"",bathrooms:"",area:"",duration:"1month",imageUrls:[""]}),f=async y=>{y.preventDefault(),l(!0);try{const w={title:u.title,description:u.description,location:u.location,price:Number(u.price),type:u.type,bedrooms:u.bedrooms?Number(u.bedrooms):void 0,bathrooms:u.bathrooms?Number(u.bathrooms):void 0,area:u.area?Number(u.area):void 0,duration:u.duration,images:u.imageUrls.filter(S=>S.trim()!=="")},b=await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/properties`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(w)}),N={...w,id:Date.now().toString(),status:"approved",ownerId:n?.id,createdAt:new Date().toISOString()},T=JSON.parse(localStorage.getItem("properties")||"[]");if(T.push(N),localStorage.setItem("properties",JSON.stringify(T)),console.log("[PropertyUploadForm] Property stored in localStorage:",N),console.log("[PropertyUploadForm] Total properties in localStorage:",T.length),b.ok){const S=await b.json();console.log("[PropertyUploadForm] API upload successful:",S),M.success("Your property is live and visible to customers.")}else{const S=await b.json();console.error("[PropertyUploadForm] API upload failed:",S),M.success("Your property is live and visible to customers (stored locally).")}h({title:"",description:"",location:"",price:"",type:"house",bedrooms:"",bathrooms:"",area:"",duration:"1month",imageUrls:[""]}),t(),e()}catch(w){console.error("Upload error:",w),M.error("Failed to upload property")}finally{l(!1)}},p=()=>{h({...u,imageUrls:[...u.imageUrls,""]})},g=(y,w)=>{const b=[...u.imageUrls];b[y]=w,h({...u,imageUrls:b})},v=y=>{const w=u.imageUrls.filter((b,N)=>N!==y);h({...u,imageUrls:w.length>0?w:[""]})},x=async(y,w)=>{const b=y.target.files?.[0];if(b){if(b.size>5*1024*1024){M.error("Image must be less than 5MB");return}if(!b.type.startsWith("image/")){M.error("Please upload an image file");return}d(!0);try{const N=new FormData;N.append("file",b);const T=await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/upload-image`,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:N});if(T.ok){const S=await T.json();g(w,S.url),M.success("Image uploaded successfully")}else{const S=await T.json();M.error(S.error||"Failed to upload image")}}catch(N){console.error("Image upload error:",N),M.error("Failed to upload image")}finally{d(!1)}}};return a.jsx(Rs,{open:s,onOpenChange:e,children:a.jsxs(ds,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(Os,{children:[a.jsx($s,{className:"text-slate-900 dark:text-white",children:r("uploadProperty")}),a.jsx(Ds,{children:"Fill in the details below to list your property - it will be immediately visible to customers"})]}),a.jsxs("form",{onSubmit:f,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(X,{htmlFor:"title",children:r("title")}),a.jsx(le,{id:"title",value:u.title,onChange:y=>h({...u,title:y.target.value}),required:!0})]}),a.jsxs("div",{children:[a.jsx(X,{htmlFor:"type",children:r("propertyType")}),a.jsxs(Tr,{value:u.type,onValueChange:y=>h({...u,type:y}),children:[a.jsx(Ar,{children:a.jsx(Pr,{})}),a.jsxs(Ir,{children:[a.jsx(Ie,{value:"house",children:r("house")}),a.jsx(Ie,{value:"apartment",children:r("apartment")}),a.jsx(Ie,{value:"land",children:r("land")})]})]})]}),a.jsxs("div",{children:[a.jsx(X,{htmlFor:"duration",children:r("duration")}),a.jsxs(Tr,{value:u.duration,onValueChange:y=>h({...u,duration:y}),children:[a.jsx(Ar,{children:a.jsx(Pr,{})}),a.jsxs(Ir,{children:[a.jsx(Ie,{value:"1day",children:r("oneDay")}),a.jsx(Ie,{value:"1week",children:r("oneWeek")}),a.jsx(Ie,{value:"1month",children:r("oneMonth")}),a.jsx(Ie,{value:"2months",children:r("twoMonths")}),a.jsx(Ie,{value:"3months",children:r("threeMonths")})]})]})]}),a.jsxs("div",{children:[a.jsx(X,{htmlFor:"location",children:r("location")}),a.jsx(le,{id:"location",value:u.location,onChange:y=>h({...u,location:y.target.value}),required:!0})]}),a.jsxs("div",{children:[a.jsxs(X,{htmlFor:"price",children:[r("price")," (RWF)"]}),a.jsx(le,{id:"price",type:"number",value:u.price,onChange:y=>h({...u,price:y.target.value}),required:!0})]}),a.jsxs("div",{children:[a.jsx(X,{htmlFor:"bedrooms",children:r("bedrooms")}),a.jsx(le,{id:"bedrooms",type:"number",value:u.bedrooms,onChange:y=>h({...u,bedrooms:y.target.value})})]}),a.jsxs("div",{children:[a.jsx(X,{htmlFor:"bathrooms",children:r("bathrooms")}),a.jsx(le,{id:"bathrooms",type:"number",value:u.bathrooms,onChange:y=>h({...u,bathrooms:y.target.value})})]}),a.jsxs("div",{children:[a.jsxs(X,{htmlFor:"area",children:[r("area")," (m²)"]}),a.jsx(le,{id:"area",type:"number",value:u.area,onChange:y=>h({...u,area:y.target.value})})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(X,{htmlFor:"description",children:r("description")}),a.jsx(qr,{id:"description",value:u.description,onChange:y=>h({...u,description:y.target.value}),rows:4,required:!0})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(X,{children:r("images")}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:"Upload images or paste URLs (max 5MB per image)"}),a.jsxs("div",{className:"space-y-2",children:[u.imageUrls.map((y,w)=>a.jsxs("div",{className:"flex gap-2 items-start",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx(le,{type:"file",accept:"image/*",onChange:b=>x(b,w),className:"hidden",id:`file-upload-${w}`,disabled:c}),a.jsxs(U,{type:"button",variant:"outline",onClick:()=>document.getElementById(`file-upload-${w}`)?.click(),disabled:c,className:"whitespace-nowrap",children:[a.jsx(as,{className:"w-4 h-4 mr-2"}),c?"Uploading...":"Upload"]}),a.jsx(le,{value:y,onChange:b=>g(w,b.target.value),placeholder:"Or paste image URL",className:"flex-1"})]}),y&&a.jsx("div",{className:"aspect-video bg-slate-100 dark:bg-slate-800 rounded-lg overflow-hidden",children:a.jsx("img",{src:y,alt:`Preview ${w+1}`,className:"w-full h-full object-cover"})})]}),u.imageUrls.length>1&&a.jsx(U,{type:"button",variant:"outline",size:"icon",onClick:()=>v(w),children:a.jsx(Br,{className:"w-4 h-4"})})]},w)),a.jsxs(U,{type:"button",variant:"outline",onClick:p,className:"w-full",children:[a.jsx(as,{className:"w-4 h-4 mr-2"}),"Add Another Image"]})]})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx(U,{type:"button",variant:"outline",onClick:e,className:"flex-1",children:r("cancel")}),a.jsx(U,{type:"submit",disabled:i||c,className:"flex-1 bg-emerald-600 hover:bg-emerald-700",children:i?a.jsxs(a.Fragment,{children:[a.jsx(xt,{className:"w-4 h-4 mr-2 animate-spin"}),"Publishing property..."]}):c?a.jsxs(a.Fragment,{children:[a.jsx(xt,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading images..."]}):r("submit")})]})]})]})})}function Sf(){const{t:s}=Oe(),{user:e,accessToken:t}=Be(),[r,n]=m.useState("overview"),[o,i]=m.useState([]),[l,c]=m.useState([]),[d,u]=m.useState([]),[h,f]=m.useState([]),[p,g]=m.useState(!1),[v,x]=m.useState(null),[y,w]=m.useState(!0);m.useEffect(()=>{b()},[r]);const b=async()=>{w(!0);try{e?.role==="admin"?r==="users"?await O():await N():e?.role==="owner"?await T():e?.role==="customer"?r==="favorites"?await S():r==="bookings"?await C():await N():e?.role==="owner"&&r==="bookings"&&await C()}catch(_){console.error("Failed to fetch data:",_)}finally{w(!1)}},N=async()=>{try{const _=`https://${te}.supabase.co/functions/v1/make-server-d4068603/properties`;console.log("[Dashboard] Fetching all properties from:",_);const k=await fetch(_,{headers:{Authorization:`Bearer ${t}`}});if(console.log("[Dashboard] Response status:",k.status),k.ok){const J=await k.json();console.log("[Dashboard] Received properties:",J.properties?.length||0);const Y=(J.properties||[]).filter(K=>K&&K.id&&K.title);console.log("[Dashboard] Valid properties after filter:",Y.length),i(Y)}else{const J=await k.text();console.error("[Dashboard] Failed to fetch properties:",k.status,J),M.error("Failed to load properties")}}catch(_){console.error("[Dashboard] Exception while fetching properties:",_),M.error("Failed to load properties")}},T=async()=>{try{console.log("[Dashboard] Fetching my properties for user:",e?.id);const _=JSON.parse(localStorage.getItem("properties")||"[]");console.log("[Dashboard] All properties in localStorage:",_.length),console.log("[Dashboard] Raw localStorage data:",_);const k=_.filter(K=>K&&K.id&&K.ownerId===e?.id);if(console.log("[Dashboard] My properties after filtering:",k.length),console.log("[Dashboard] My properties data:",k),k.length===0&&_.length===0){console.log("[Dashboard] No properties found, creating test property for debugging");const K={id:"test-"+Date.now(),title:"Test Property",description:"This is a test property to verify the system is working",price:2e5,location:"Kigali, Rwanda",type:"apartment",bedrooms:2,bathrooms:1,area:100,duration:"1month",images:["https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=500"],status:"approved",ownerId:e?.id,createdAt:new Date().toISOString()};localStorage.setItem("properties",JSON.stringify([K])),console.log("[Dashboard] Test property created:",K),i([K]);return}if(k.length>0){console.log("[Dashboard] Found properties in localStorage:",k.length),i(k);return}const J=`https://${te}.supabase.co/functions/v1/make-server-d4068603/properties`;console.log("[Dashboard] Fetching my properties (owner) from:",J),console.log("[Dashboard] User ID:",e?.id);const Y=await fetch(J,{headers:{Authorization:`Bearer ${t}`}});if(console.log("[Dashboard] Response status:",Y.status),Y.ok){const K=await Y.json();console.log("[Dashboard] Received total properties:",K.properties?.length||0);const ye=(K.properties||[]).filter(R=>R&&R.id&&R.ownerId===e?.id);console.log("[Dashboard] My properties after filter:",ye.length),ye.sort((R,B)=>new Date(B.createdAt).getTime()-new Date(R.createdAt).getTime()),i(ye)}else{const K=await Y.text();console.error("[Dashboard] Failed to fetch properties:",Y.status,K),console.error("[Dashboard] Error details:",K),i([]),M.error(`Failed to load properties: ${Y.status}`)}}catch(_){console.error("[Dashboard] Exception while fetching properties:",_),i([]),M.error("Failed to load properties")}},S=async()=>{try{const _=await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/favorites`,{headers:{Authorization:`Bearer ${t}`}});if(_.ok){const k=await _.json();c(k.properties)}}catch(_){console.error("Failed to fetch favorites:",_)}},O=async()=>{try{const _=await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/admin/users`,{headers:{Authorization:`Bearer ${t}`}});if(_.ok){const k=await _.json();u(k.users)}}catch(_){console.error("Failed to fetch users:",_)}},C=async()=>{try{const _=await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/bookings`,{headers:{Authorization:`Bearer ${t}`}});if(_.ok){const k=await _.json();f(k.bookings)}}catch(_){console.error("Failed to fetch bookings:",_)}},F=async _=>{try{(await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/properties/${_}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({status:"approved"})})).ok&&(M.success("Property approved"),b())}catch(k){console.error("Failed to approve property:",k),M.error("Failed to approve property")}},ce=async _=>{try{(await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/properties/${_}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({status:"rejected"})})).ok&&(M.success("Property rejected"),b())}catch(k){console.error("Failed to reject property:",k),M.error("Failed to reject property")}},ie=async _=>{try{(await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/properties/${_}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({status:"sold"})})).ok&&(M.success("Property marked as sold"),b())}catch(k){console.error("Failed to mark as sold:",k),M.error("Failed to mark as sold")}},oe=()=>e?.role==="admin"?[{label:"Total Properties",value:o.length,icon:Ne,color:"text-blue-600"},{label:s("pendingApprovals"),value:o.filter(_=>_.status==="pending").length,icon:Ss,color:"text-yellow-600"},{label:"Listed",value:o.length,icon:Ye,color:"text-green-600"},{label:"Total Users",value:d.length,icon:In,color:"text-purple-600"}]:e?.role==="owner"?[{label:s("myProperties"),value:o.length,icon:Ne,color:"text-blue-600"},{label:s("pending"),value:o.filter(_=>_.status==="pending").length,icon:Ss,color:"text-yellow-600"},{label:"Listed",value:o.length,icon:Ye,color:"text-green-600"},{label:"Bookings",value:h.length,icon:as,color:"text-purple-600"}]:[{label:"Available Properties",value:o.length,icon:Ne,color:"text-blue-600"},{label:s("myFavorites"),value:l.length,icon:Es,color:"text-red-600"},{label:"My Bookings",value:h.length,icon:as,color:"text-emerald-600"}],j=()=>{if(r==="users")return a.jsx("div",{className:"space-y-4",children:d.map(k=>a.jsx(Se,{children:a.jsx(rt,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(at,{className:"text-slate-900 dark:text-white",children:k.name}),a.jsx(wt,{children:k.email})]}),a.jsx(ke,{className:k.role==="admin"?"bg-purple-600":k.role==="owner"?"bg-blue-600":"bg-green-600",children:s(k.role)})]})})},k.id))});const _=o.filter(k=>k.status==="pending");return _.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ne,{className:"w-16 h-16 mx-auto text-slate-300 dark:text-slate-600 mb-4"}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No pending properties"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(k=>a.jsxs("div",{className:"relative",children:[a.jsx(vt,{property:k,onViewDetails:x}),a.jsxs("div",{className:"mt-3 flex gap-2",children:[a.jsx(U,{onClick:()=>F(k.id),className:"flex-1 bg-green-600 hover:bg-green-700",size:"sm",children:s("approve")}),a.jsx(U,{onClick:()=>ce(k.id),variant:"destructive",className:"flex-1",size:"sm",children:s("reject")})]})]},k.id))})},V=()=>r==="bookings"?re():o.length===0?a.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-xl",children:[a.jsx(Ne,{className:"w-16 h-16 mx-auto text-slate-300 dark:text-slate-600 mb-4"}),a.jsx("h3",{className:"text-slate-900 dark:text-white mb-2",children:"No Properties Yet"}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 max-w-md mx-auto",children:"Start listing your properties to reach thousands of potential buyers and renters"}),a.jsxs(U,{onClick:()=>g(!0),className:"bg-emerald-600 hover:bg-emerald-700",children:[a.jsx($a,{className:"w-4 h-4 mr-2"}),s("uploadProperty")]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-4 flex items-center justify-between",children:a.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[o.length," ",o.length===1?"property":"properties"]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(_=>a.jsxs("div",{className:"relative",children:[a.jsx(vt,{property:_,onViewDetails:x}),a.jsxs("div",{className:"mt-3 flex gap-2",children:[_.status==="approved"&&a.jsx(U,{onClick:()=>ie(_.id),className:"flex-1",size:"sm",variant:"outline",children:s("markAsSold")}),_.status==="pending"&&a.jsx("div",{className:"flex-1 text-center text-sm text-amber-600 dark:text-amber-400 py-2",children:"⏱ Pending (not visible to customers)"}),_.status==="rejected"&&a.jsx("div",{className:"flex-1 text-center text-sm text-red-600 dark:text-red-400 py-2",children:"❌ Not approved"})]})]},_.id))})]}),re=()=>{if(h.length===0)return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(as,{className:"w-16 h-16 mx-auto text-slate-300 dark:text-slate-600 mb-4"}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e?.role==="customer"?"No bookings made yet":"No booking requests received yet"})]});const _=async(k,J)=>{try{const Y=await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/bookings/${k}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({status:J})});if(Y.ok)M.success(J==="confirmed"?"Booking confirmed":"Booking cancelled"),C();else{const K=await Y.json();M.error(K.error||"Failed to update booking")}}catch{M.error("Failed to update booking")}};return a.jsx("div",{className:"space-y-4",children:h.map(k=>a.jsx(Se,{children:a.jsx(rt,{children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx(at,{className:"text-slate-900 dark:text-white",children:k.property?.title||"Property"}),a.jsxs(wt,{children:[k.bookingType==="purchase"?"Purchase":"Rent"," - ",k.amount.toLocaleString()," RWF"]}),a.jsxs("div",{className:"mt-2 space-y-1 text-sm text-slate-600 dark:text-slate-400",children:[e?.role==="owner"&&a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:["Customer: ",k.customerName," (",k.customerEmail,")"]}),a.jsxs("p",{children:["Phone: ",k.contactInfo.phone]}),k.contactInfo.alternativePhone&&a.jsxs("p",{children:["Alt Phone: ",k.contactInfo.alternativePhone]}),a.jsxs("p",{children:["Address: ",k.contactInfo.address]})]}),e?.role==="customer"&&a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:["Location: ",k.property?.location]}),a.jsxs("p",{children:["Your Phone: ",k.contactInfo.phone]})]}),a.jsxs("p",{children:["Payment: ",k.paymentMethod.replace("_"," ")]}),k.contactInfo.notes&&a.jsxs("p",{children:["Notes: ",k.contactInfo.notes]}),a.jsxs("p",{children:["Date: ",new Date(k.createdAt).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsx(ke,{className:k.status==="confirmed"?"bg-green-600":k.status==="cancelled"?"bg-red-600":"bg-yellow-600",children:k.status}),e?.role==="owner"&&k.status==="pending"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx(U,{size:"sm",className:"bg-emerald-600 hover:bg-emerald-700",onClick:()=>_(k.id,"confirmed"),children:"Confirm"}),a.jsx(U,{size:"sm",variant:"destructive",onClick:()=>_(k.id,"cancelled"),children:"Cancel"})]})]})]})})},k.id))})},$=()=>{if(r==="bookings")return re();const _=r==="favorites"?l:o;return _.length===0?a.jsx("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-xl",children:r==="favorites"?a.jsxs(a.Fragment,{children:[a.jsx(Es,{className:"w-16 h-16 mx-auto text-slate-300 dark:text-slate-600 mb-4"}),a.jsx("h3",{className:"text-slate-900 dark:text-white mb-2",children:"No Favorites Yet"}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-4",children:"Save properties you like to easily find them later"})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ne,{className:"w-16 h-16 mx-auto text-slate-300 dark:text-slate-600 mb-4"}),a.jsx("h3",{className:"text-slate-900 dark:text-white mb-2",children:"No Properties Available"}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-4",children:"New properties are being added regularly. Check back soon!"})]})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-4",children:a.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[_.length," ",_.length===1?"property":"properties"," available"]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(k=>a.jsx("div",{children:a.jsx(vt,{property:k,onViewDetails:x,isFavorite:l.some(J=>J.id===k.id),onFavoriteToggle:S})},k.id))})]})};return a.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-slate-900 dark:text-white mb-2",children:s("dashboard")}),a.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:["Welcome back, ",e?.name]})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:oe().map((_,k)=>a.jsx(Se,{children:a.jsx(Re,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-1",children:_.label}),a.jsx("p",{className:"text-2xl text-slate-900 dark:text-white",children:_.value})]}),a.jsx(_.icon,{className:`w-10 h-10 ${_.color}`})]})})},k))}),a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex gap-2",children:[e?.role==="admin"&&a.jsxs(a.Fragment,{children:[a.jsx(U,{variant:r==="overview"?"default":"outline",onClick:()=>n("overview"),children:s("pendingApprovals")}),a.jsx(U,{variant:r==="users"?"default":"outline",onClick:()=>n("users"),children:s("allUsers")})]}),e?.role==="customer"&&a.jsxs(a.Fragment,{children:[a.jsx(U,{variant:r==="overview"?"default":"outline",onClick:()=>n("overview"),children:s("properties")}),a.jsx(U,{variant:r==="favorites"?"default":"outline",onClick:()=>n("favorites"),children:s("myFavorites")}),a.jsx(U,{variant:r==="bookings"?"default":"outline",onClick:()=>n("bookings"),children:"My Bookings"})]})]}),e?.role==="owner"&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(U,{variant:r==="overview"?"default":"outline",onClick:()=>n("overview"),children:s("myProperties")}),a.jsx(U,{variant:r==="bookings"?"default":"outline",onClick:()=>n("bookings"),children:"Booking Requests"}),a.jsx("div",{className:"flex-1"}),a.jsxs(U,{onClick:()=>g(!0),className:"bg-emerald-600 hover:bg-emerald-700",children:[a.jsx($a,{className:"w-4 h-4 mr-2"}),s("uploadProperty")]})]})]}),y?a.jsx("div",{className:"text-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto"})}):a.jsxs(a.Fragment,{children:[e?.role==="admin"&&j(),e?.role==="owner"&&V(),e?.role==="customer"&&$()]})]}),p&&a.jsx(Nf,{isOpen:p,onClose:()=>g(!1),onSuccess:b}),v&&a.jsx(Ls,{property:v,isOpen:!!v,onClose:()=>x(null),onFavoriteToggle:S})]})}function Ef({className:s,...e}){return a.jsx(bi,{"data-slot":"tabs",className:Q("flex flex-col gap-2",s),...e})}function Cf({className:s,...e}){return a.jsx(yi,{"data-slot":"tabs-list",className:Q("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",s),...e})}function Zt({className:s,...e}){return a.jsx(wi,{"data-slot":"tabs-trigger",className:Q("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...e})}function Xt({className:s,...e}){return a.jsx(ki,{"data-slot":"tabs-content",className:Q("flex-1 outline-none",s),...e})}function Tf(){const[s,e]=m.useState(null),[t,r]=m.useState(!1),[n,o]=m.useState(null),i=async()=>{r(!0),o(null);try{console.log("[Diagnostics] Running database diagnostics...");const l=await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/debug/properties`,{headers:{Authorization:`Bearer ${Ps}`}});if(l.ok){const c=await l.json();console.log("[Diagnostics] Results:",c),e(c)}else{const c=await l.text();console.error("[Diagnostics] Error:",c),o(`Failed to run diagnostics: ${l.status}`)}}catch(l){console.error("[Diagnostics] Exception:",l),o(`Exception: ${l}`)}finally{r(!1)}};return a.jsxs(Se,{className:"w-full",children:[a.jsx(rt,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(at,{className:"text-slate-900 dark:text-white flex items-center gap-2",children:[a.jsx(is,{className:"w-5 h-5"}),"Database Diagnostics"]}),a.jsx(wt,{children:"Debug property retrieval issues"})]}),a.jsxs(U,{onClick:i,disabled:t,variant:"outline",size:"sm",children:[a.jsx(mr,{className:`w-4 h-4 mr-2 ${t?"animate-spin":""}`}),t?"Running...":"Run Diagnostics"]})]})}),a.jsxs(Re,{children:[n&&a.jsxs("div",{className:"flex items-start gap-2 p-4 bg-red-50 dark:bg-red-950 rounded-lg mb-4",children:[a.jsx(Je,{className:"w-5 h-5 text-red-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-red-900 dark:text-red-100",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:n})]})]}),s&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Total Items"}),a.jsx("p",{className:"text-2xl text-slate-900 dark:text-white",children:s.totalItems})]}),a.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-950 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-400 mb-1",children:"Valid Properties"}),a.jsx("p",{className:"text-2xl text-emerald-900 dark:text-emerald-100",children:s.validProperties})]}),a.jsxs("div",{className:"bg-amber-50 dark:bg-amber-950 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400 mb-1",children:"Pending"}),a.jsx("p",{className:"text-2xl text-amber-900 dark:text-amber-100",children:s.pendingCount})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mb-1",children:"Approved"}),a.jsx("p",{className:"text-2xl text-blue-900 dark:text-blue-100",children:s.approvedCount})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-slate-900 dark:text-white mb-3",children:"Database Items"}),s.items.length===0?a.jsxs("div",{className:"text-center py-8 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[a.jsx(Je,{className:"w-12 h-12 mx-auto text-slate-400 mb-2"}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No items found in database"}),a.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:"Properties should appear here after upload"})]}):a.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:s.items.map(l=>a.jsxs("div",{className:"flex items-start justify-between gap-4 p-3 bg-slate-50 dark:bg-slate-800 rounded-lg text-sm",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("code",{className:"text-xs text-slate-600 dark:text-slate-400",children:l.key}),l.hasId&&l.hasTitle?a.jsx(Ye,{className:"w-4 h-4 text-emerald-600 flex-shrink-0"}):a.jsx(Je,{className:"w-4 h-4 text-red-600 flex-shrink-0"})]}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 truncate",children:l.preview}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(ke,{variant:"outline",className:"text-xs",children:l.valueType}),l.status!=="N/A"&&a.jsx(ke,{className:l.status==="approved"?"bg-emerald-600":l.status==="pending"?"bg-amber-600":"bg-red-600",children:l.status})]})]}),a.jsxs("div",{className:"flex flex-col gap-1 text-xs text-slate-500 dark:text-slate-500",children:[a.jsxs("span",{children:["ID: ",l.hasId?"✓":"✗"]}),a.jsxs("span",{children:["Title: ",l.hasTitle?"✓":"✗"]}),a.jsxs("span",{children:["Valid: ",l.hasValue?"✓":"✗"]})]})]},l.index))})]}),s.validProperties===0&&s.totalItems>0&&a.jsxs("div",{className:"flex items-start gap-2 p-4 bg-amber-50 dark:bg-amber-950 rounded-lg",children:[a.jsx(Je,{className:"w-5 h-5 text-amber-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-amber-900 dark:text-amber-100",children:"Data Quality Issue"}),a.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:["Found ",s.totalItems," items in database, but none are valid properties. This may indicate a data corruption issue. Contact support if this persists."]})]})]}),s.approvedCount===0&&s.pendingCount>0&&a.jsxs("div",{className:"flex items-start gap-2 p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[a.jsx(Je,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-blue-900 dark:text-blue-100",children:"Awaiting Admin Approval"}),a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[s.pendingCount," ",s.pendingCount===1?"property is":"properties are"," waiting for admin approval. Properties only appear on the site after approval."]})]})]})]}),!s&&!n&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(is,{className:"w-12 h-12 mx-auto text-slate-400 mb-2"}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:'Click "Run Diagnostics" to check database status'})]})]})]})}function Pf(){const{user:s,accessToken:e}=Be(),[t,r]=m.useState([]),[n,o]=m.useState([]),[i,l]=m.useState([]),[c,d]=m.useState(!0),[u,h]=m.useState(null),[f,p]=m.useState(!1),[g,v]=m.useState(""),[x,y]=m.useState(null);m.useEffect(()=>{w()},[]);const w=async()=>{d(!0);try{await Promise.all([b(),N(),T()])}catch(j){console.error("Failed to fetch data:",j)}finally{d(!1)}},b=async()=>{try{const j=await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/properties`,{headers:{Authorization:`Bearer ${e}`}});if(j.ok){const V=await j.json();r(V.properties||[])}}catch(j){console.error("Failed to fetch properties:",j)}},N=async()=>{try{const j=await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/notifications`,{headers:{Authorization:`Bearer ${e}`}});if(j.ok){const V=await j.json();o(V.notifications||[])}}catch(j){console.error("Failed to fetch notifications:",j)}},T=async()=>{try{const j=await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/admin/users`,{headers:{Authorization:`Bearer ${e}`}});if(j.ok){const V=await j.json();l(V.users||[])}}catch(j){console.error("Failed to fetch users:",j)}},S=async j=>{try{const V=await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/admin/properties/${j}/approve`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(V.ok)M.success("Property approved successfully!"),w();else{const re=await V.json();M.error(re.error||"Failed to approve property")}}catch(V){console.error("Approve property error:",V),M.error("Failed to approve property")}},O=async()=>{if(!x||!g.trim()){M.error("Please provide a reason for rejection");return}try{const j=await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/admin/properties/${x.id}/reject`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({reason:g})});if(j.ok)M.success("Property rejected"),p(!1),v(""),y(null),w();else{const V=await j.json();M.error(V.error||"Failed to reject property")}}catch(j){console.error("Reject property error:",j),M.error("Failed to reject property")}},C=j=>{y(j),p(!0)},F=t.filter(j=>j.status==="pending"),ce=t.filter(j=>j.status==="approved");t.filter(j=>j.status==="rejected");const ie=n.filter(j=>!j.read),oe=[{label:"Pending Review",value:F.length,icon:Ss,color:"text-amber-600",bgColor:"bg-amber-50 dark:bg-amber-950",change:"+"+F.filter(j=>{const V=new Date(Date.now()-36e5);return new Date(j.createdAt)>V}).length+" this hour"},{label:"Approved Properties",value:ce.length,icon:Ye,color:"text-emerald-600",bgColor:"bg-emerald-50 dark:bg-emerald-950",change:"Live on platform"},{label:"Total Users",value:i.length,icon:In,color:"text-blue-600",bgColor:"bg-blue-50 dark:bg-blue-950",change:i.filter(j=>j.role==="owner").length+" owners"},{label:"Notifications",value:ie.length,icon:Pa,color:"text-purple-600",bgColor:"bg-purple-50 dark:bg-purple-950",change:"Unread alerts"}];return u?a.jsx(Ls,{property:u,onClose:()=>h(null)}):a.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-900 to-purple-700 dark:from-purple-950 dark:to-purple-900 text-white p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(vr,{className:"w-8 h-8"}),a.jsx("h1",{className:"text-white",children:"System Administration"})]}),a.jsxs("p",{className:"text-purple-100",children:["Welcome back, ",s?.name," • Full system control"]})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"mb-6",children:a.jsx(oo,{})}),F.length>0&&a.jsxs(zt,{className:"mb-6 border-amber-200 bg-amber-50 dark:bg-amber-950 dark:border-amber-900",children:[a.jsx(Ss,{className:"h-5 w-5 text-amber-600"}),a.jsx(Ht,{children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsxs("p",{className:"text-slate-900 dark:text-white",children:[a.jsxs("span",{className:"font-semibold",children:[F.length," ",F.length===1?"property":"properties"]})," waiting for your review"]}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Property owners are waiting for approval to list their properties"})]})})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:oe.map((j,V)=>a.jsx(Se,{className:j.bgColor,children:a.jsx(Re,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-1",children:j.label}),a.jsx("p",{className:`text-3xl ${j.color}`,children:j.value}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:j.change})]}),a.jsx(j.icon,{className:`w-12 h-12 ${j.color} opacity-20`})]})})},V))}),a.jsxs(Ef,{defaultValue:"pending",className:"space-y-6",children:[a.jsxs(Cf,{className:"grid w-full grid-cols-5 lg:w-auto lg:inline-grid",children:[a.jsxs(Zt,{value:"pending",className:"relative",children:["Pending Review",F.length>0&&a.jsx(ke,{className:"ml-2 bg-amber-600 text-white",children:F.length})]}),a.jsx(Zt,{value:"approved",children:"Approved"}),a.jsx(Zt,{value:"users",children:"Users"}),a.jsxs(Zt,{value:"notifications",className:"relative",children:["Notifications",ie.length>0&&a.jsx(ke,{className:"ml-2 bg-red-600 text-white",children:ie.length})]}),a.jsx(Zt,{value:"diagnostics",children:"Diagnostics"})]}),a.jsx(Xt,{value:"pending",className:"space-y-6",children:F.length===0?a.jsx(Se,{children:a.jsxs(Re,{className:"p-12 text-center",children:[a.jsx(Ye,{className:"w-16 h-16 mx-auto text-emerald-600 mb-4"}),a.jsx("h3",{className:"text-slate-900 dark:text-white mb-2",children:"All Caught Up!"}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No properties pending review at the moment."})]})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:F.map(j=>a.jsx(Se,{className:"hover:shadow-lg transition-shadow",children:a.jsxs(Re,{className:"p-4",children:[a.jsx("div",{className:"aspect-video bg-slate-200 dark:bg-slate-700 rounded-lg mb-4 overflow-hidden cursor-pointer",onClick:()=>h(j),children:j.images&&j.images.length>0?a.jsx("img",{src:j.images[0],alt:j.title,className:"w-full h-full object-cover hover:scale-105 transition-transform"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(Ne,{className:"w-12 h-12 text-slate-400"})})}),a.jsx("h3",{className:"text-slate-900 dark:text-white mb-2 line-clamp-1",children:j.title}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Owner: ",j.ownerName]}),a.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Price: $",j.price?.toLocaleString()]}),a.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:["Submitted: ",new Date(j.createdAt).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(U,{size:"sm",onClick:()=>S(j.id),className:"flex-1 bg-emerald-600 hover:bg-emerald-700",children:[a.jsx(Ye,{className:"w-4 h-4 mr-1"}),"Approve"]}),a.jsxs(U,{size:"sm",variant:"destructive",onClick:()=>C(j),className:"flex-1",children:[a.jsx(Ia,{className:"w-4 h-4 mr-1"}),"Reject"]})]})]})},j.id))})}),a.jsxs(Xt,{value:"approved",className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ce.map(j=>a.jsx(vt,{property:j,onViewDetails:h},j.id))}),ce.length===0&&a.jsx(Se,{children:a.jsxs(Re,{className:"p-12 text-center",children:[a.jsx(Je,{className:"w-16 h-16 mx-auto text-slate-400 mb-4"}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No approved properties yet."})]})})]}),a.jsx(Xt,{value:"users",className:"space-y-6",children:a.jsxs(Se,{children:[a.jsxs(rt,{children:[a.jsx(at,{className:"text-slate-900 dark:text-white",children:"All Users"}),a.jsxs(wt,{children:[i.length," registered users"]})]}),a.jsx(Re,{children:a.jsx("div",{className:"space-y-3",children:i.map(j=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-900 dark:text-white",children:j.name}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:j.email})]}),a.jsx(ke,{className:j.role==="admin"?"bg-purple-600":j.role==="owner"?"bg-blue-600":"bg-emerald-600",children:j.role})]},j.id))})})]})}),a.jsx(Xt,{value:"notifications",className:"space-y-4",children:n.length===0?a.jsx(Se,{children:a.jsxs(Re,{className:"p-12 text-center",children:[a.jsx(Pa,{className:"w-16 h-16 mx-auto text-slate-400 mb-4"}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No notifications yet."})]})}):n.map(j=>a.jsxs(zt,{className:j.read?"opacity-60":"",children:[a.jsx(Je,{className:"h-4 w-4"}),a.jsx(Ht,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-900 dark:text-white mb-1",children:j.message}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(j.createdAt).toLocaleString()})]}),!j.read&&a.jsx(ke,{variant:"destructive",className:"ml-2",children:"New"})]})})]},j.id))}),a.jsx(Xt,{value:"diagnostics",className:"space-y-6",children:a.jsx(Tf,{})})]})]}),a.jsx(Rs,{open:f,onOpenChange:p,children:a.jsxs(ds,{children:[a.jsxs(Os,{children:[a.jsx($s,{className:"text-slate-900 dark:text-white",children:"Reject Property"}),a.jsxs(Ds,{children:['Please provide a reason for rejecting "',x?.title,'". The owner will be notified.']})]}),a.jsx("div",{className:"space-y-4 py-4",children:a.jsxs("div",{children:[a.jsx(X,{htmlFor:"reason",children:"Rejection Reason"}),a.jsx(qr,{id:"reason",value:g,onChange:j=>v(j.target.value),placeholder:"Please explain why this property cannot be approved...",className:"mt-2",rows:4})]})}),a.jsxs(yh,{children:[a.jsx(U,{variant:"outline",onClick:()=>{p(!1),v(""),y(null)},children:"Cancel"}),a.jsxs(U,{variant:"destructive",onClick:O,disabled:!g.trim(),children:[a.jsx(Ia,{className:"w-4 h-4 mr-2"}),"Reject Property"]})]})]})})]})}function Af({onNavigate:s}){const{t:e}=Oe(),{login:t}=Be(),[r,n]=m.useState(""),[o,i]=m.useState(""),[l,c]=m.useState(!1),d=async u=>{u.preventDefault(),c(!0);try{await t(r,o),M.success("Logged in successfully!"),s("home")}catch(h){console.error("Login error:",h),M.error(h.message||"Failed to login")}finally{c(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 p-4",children:a.jsxs(Se,{className:"w-full max-w-md",children:[a.jsxs(rt,{className:"text-center",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("div",{className:"w-16 h-16 bg-emerald-600 dark:bg-emerald-500 rounded-2xl flex items-center justify-center",children:a.jsx(Ne,{className:"w-8 h-8 text-white"})})}),a.jsx(at,{className:"text-slate-900 dark:text-white",children:e("login")}),a.jsx(wt,{children:"Welcome back to RealEstateConnect"})]}),a.jsxs(Re,{children:[a.jsxs("form",{onSubmit:d,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(X,{htmlFor:"email",children:e("email")}),a.jsxs("div",{className:"relative",children:[a.jsx(As,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),a.jsx(le,{id:"email",type:"email",value:r,onChange:u=>n(u.target.value),placeholder:"your@email.com",className:"pl-10",required:!0})]})]}),a.jsxs("div",{children:[a.jsx(X,{htmlFor:"password",children:e("password")}),a.jsxs("div",{className:"relative",children:[a.jsx(Ur,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),a.jsx(le,{id:"password",type:"password",value:o,onChange:u=>i(u.target.value),placeholder:"••••••••",className:"pl-10",required:!0})]})]}),a.jsx(U,{type:"submit",className:"w-full bg-emerald-600 hover:bg-emerald-700",disabled:l,children:l?a.jsxs(a.Fragment,{children:[a.jsx(xt,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading..."]}):e("login")})]}),a.jsxs("div",{className:"mt-6 text-center space-y-3",children:[a.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e("dontHaveAccount")," ",a.jsx("button",{onClick:()=>s("signup"),className:"text-emerald-600 dark:text-emerald-400 hover:underline",children:e("signup")})]}),a.jsx("div",{className:"pt-3 border-t border-slate-200 dark:border-slate-700",children:a.jsxs("button",{onClick:()=>s("admin-login"),className:"text-xs text-purple-600 dark:text-purple-400 hover:underline flex items-center justify-center gap-1 mx-auto",children:[a.jsx("span",{children:"🔒"}),"Administrator Access"]})})]})]})]})})}function If({onNavigate:s}){const{t:e}=Oe(),{signup:t}=Be(),[r,n]=m.useState(""),[o,i]=m.useState(""),[l,c]=m.useState(""),[d,u]=m.useState("customer"),[h,f]=m.useState(!1),p=async g=>{g.preventDefault(),f(!0);try{await t(r,o,l,d),M.success("Account created successfully! You can now login.",{duration:4e3}),s("login")}catch(v){console.error("Signup error:",v),M.error(v.message||"Failed to create account")}finally{f(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 p-4",children:a.jsxs(Se,{className:"w-full max-w-md",children:[a.jsxs(rt,{className:"text-center",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("div",{className:"w-16 h-16 bg-emerald-600 dark:bg-emerald-500 rounded-2xl flex items-center justify-center",children:a.jsx(Ne,{className:"w-8 h-8 text-white"})})}),a.jsx(at,{className:"text-slate-900 dark:text-white",children:e("signup")}),a.jsx(wt,{children:"Create your RealEstateConnect account"})]}),a.jsxs(Re,{children:[a.jsxs("form",{onSubmit:p,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(X,{htmlFor:"name",children:e("fullName")}),a.jsxs("div",{className:"relative",children:[a.jsx(Qd,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),a.jsx(le,{id:"name",type:"text",value:l,onChange:g=>c(g.target.value),placeholder:"John Doe",className:"pl-10",required:!0})]})]}),a.jsxs("div",{children:[a.jsx(X,{htmlFor:"email",children:e("email")}),a.jsxs("div",{className:"relative",children:[a.jsx(As,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),a.jsx(le,{id:"email",type:"email",value:r,onChange:g=>n(g.target.value),placeholder:"your@email.com",className:"pl-10",required:!0})]})]}),a.jsxs("div",{children:[a.jsx(X,{htmlFor:"password",children:e("password")}),a.jsxs("div",{className:"relative",children:[a.jsx(Ur,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),a.jsx(le,{id:"password",type:"password",value:o,onChange:g=>i(g.target.value),placeholder:"••••••••",className:"pl-10",required:!0,minLength:6})]})]}),a.jsxs("div",{children:[a.jsx(X,{children:e("selectRole")}),a.jsxs(jr,{value:d,onValueChange:g=>u(g),children:[a.jsxs("div",{className:"flex items-center space-x-2 p-3 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[a.jsx(mt,{value:"customer",id:"customer"}),a.jsx(X,{htmlFor:"customer",className:"flex-1 cursor-pointer",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-slate-900 dark:text-white",children:e("customer")}),a.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Browse, save favorites, and book properties"})]})})]}),a.jsxs("div",{className:"flex items-center space-x-2 p-3 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[a.jsx(mt,{value:"owner",id:"owner"}),a.jsx(X,{htmlFor:"owner",className:"flex-1 cursor-pointer",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-slate-900 dark:text-white",children:e("owner")}),a.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Upload and manage your properties"})]})})]})]})]}),a.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-3 rounded-lg text-sm text-emerald-800 dark:text-emerald-300",children:"✨ Your account will be created instantly and you can login right away!"}),a.jsx(U,{type:"submit",className:"w-full bg-emerald-600 hover:bg-emerald-700",disabled:h,children:h?a.jsxs(a.Fragment,{children:[a.jsx(xt,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating account..."]}):e("signup")})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e("alreadyHaveAccount")," ",a.jsx("button",{onClick:()=>s("login"),className:"text-emerald-600 dark:text-emerald-400 hover:underline",children:e("login")})]})})]})]})})}function Rf({onNavigate:s}){const{login:e}=Be(),[t,r]=m.useState(""),[n,o]=m.useState(""),[i,l]=m.useState(!1),c=async d=>{d.preventDefault(),l(!0);try{if((await e(t,n)).role!=="admin"){M.error("Access denied. Admin credentials required.");return}M.success("Admin login successful!"),s("dashboard")}catch(u){console.error("Admin login error:",u),M.error("Invalid admin credentials")}finally{l(!1)}};return a.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-900 via-slate-900 to-slate-800 p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS1vcGFjaXR5PSIwLjA1IiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-20"}),a.jsxs(Se,{className:"w-full max-w-md relative z-10 border-purple-500/20 bg-slate-900/80 backdrop-blur-xl",children:[a.jsxs(rt,{className:"text-center",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-600 to-purple-800 rounded-2xl flex items-center justify-center shadow-2xl shadow-purple-500/50",children:a.jsx(vr,{className:"w-10 h-10 text-white"})})}),a.jsx(at,{className:"text-white text-2xl",children:"System Administrator"}),a.jsx(wt,{className:"text-purple-200",children:"Secure admin access portal"})]}),a.jsxs(Re,{children:[a.jsxs(zt,{className:"mb-6 border-purple-500/30 bg-purple-950/30",children:[a.jsx(Je,{className:"h-4 w-4 text-purple-400"}),a.jsx(Ht,{className:"text-purple-200 text-sm",children:"This is a restricted area. Only authorized administrators may access this portal."})]}),a.jsxs("form",{onSubmit:c,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(X,{htmlFor:"admin-email",className:"text-purple-100",children:"Admin Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(As,{className:"absolute left-3 top-3 w-5 h-5 text-purple-400"}),a.jsx(le,{id:"admin-email",type:"email",value:t,onChange:d=>r(d.target.value),placeholder:"admin@realestateconnect.rw",className:"pl-10 bg-slate-800/50 border-purple-500/30 text-white placeholder:text-purple-300/50",required:!0,autoComplete:"username"})]})]}),a.jsxs("div",{children:[a.jsx(X,{htmlFor:"admin-password",className:"text-purple-100",children:"Admin Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ur,{className:"absolute left-3 top-3 w-5 h-5 text-purple-400"}),a.jsx(le,{id:"admin-password",type:"password",value:n,onChange:d=>o(d.target.value),placeholder:"••••••••",className:"pl-10 bg-slate-800/50 border-purple-500/30 text-white",required:!0,autoComplete:"current-password"})]})]}),a.jsx(U,{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 shadow-lg shadow-purple-500/30",disabled:i,children:i?a.jsxs(a.Fragment,{children:[a.jsx(xt,{className:"w-4 h-4 mr-2 animate-spin"}),"Authenticating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(vr,{className:"w-4 h-4 mr-2"}),"Admin Sign In"]})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("button",{onClick:()=>s("login"),className:"text-sm text-purple-300 hover:text-purple-100 transition-colors",children:"← Back to regular login"})}),a.jsx("div",{className:"mt-6 p-3 bg-slate-800/30 rounded-lg border border-purple-500/20",children:a.jsx("p",{className:"text-xs text-purple-300 text-center",children:"🔒 All admin activities are logged and monitored for security purposes"})})]})]})]})}function Of(){const{t:s}=Oe();return a.jsx("footer",{className:"bg-slate-900 dark:bg-slate-950 text-slate-300 mt-16",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Ne,{className:"w-8 h-8 text-emerald-500"}),a.jsx("span",{className:"text-white",children:"RealEstateConnect"})]}),a.jsx("p",{className:"text-sm text-slate-400",children:"Your trusted partner in finding the perfect property across Rwanda."})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-white mb-4",children:"Quick Links"}),a.jsxs("ul",{className:"space-y-2 text-sm",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-emerald-400 transition-colors",children:s("home")})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-emerald-400 transition-colors",children:s("properties")})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-emerald-400 transition-colors",children:s("aboutUs")})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-emerald-400 transition-colors",children:s("contactUs")})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-white mb-4",children:"Legal"}),a.jsxs("ul",{className:"space-y-2 text-sm",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-emerald-400 transition-colors",children:s("termsOfService")})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-emerald-400 transition-colors",children:s("privacyPolicy")})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-white mb-4",children:"Contact Us"}),a.jsxs("ul",{className:"space-y-2 text-sm",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(As,{className:"w-4 h-4"}),a.jsx("span",{children:"info@realestateconnect.rw"})]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Fr,{className:"w-4 h-4"}),a.jsx("span",{children:"+250 788 000 000"})]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Is,{className:"w-4 h-4"}),a.jsx("span",{children:"Kigali, Rwanda"})]})]})]})]}),a.jsx("div",{className:"border-t border-slate-800 mt-8 pt-8 text-center text-sm text-slate-400",children:a.jsxs("p",{children:["© ",new Date().getFullYear()," RealEstateConnect. All rights reserved."]})})]})})}function $f(){const[s,e]=m.useState(!1),[t,r]=m.useState(null),[n,o]=m.useState(!1);m.useEffect(()=>{const l=c=>{c.ctrlKey&&c.shiftKey&&c.key==="D"&&(c.preventDefault(),e(!s),s||i())};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[s]);const i=async()=>{o(!0);try{const l=await fetch(`https://${te}.supabase.co/functions/v1/make-server-d4068603/debug/properties`,{headers:{Authorization:`Bearer ${Ps}`}});if(l.ok){const c=await l.json();r(c)}}catch(l){console.error("Debug widget error:",l)}finally{o(!1)}};return s?a.jsx("div",{className:"fixed bottom-4 right-4 z-50 w-96",children:a.jsxs(Se,{className:"shadow-2xl border-2 border-slate-300 dark:border-slate-600",children:[a.jsxs(rt,{className:"pb-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Da,{className:"w-5 h-5 text-emerald-600"}),a.jsx(at,{className:"text-slate-900 dark:text-white",children:"Debug Console"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(U,{size:"sm",variant:"ghost",onClick:i,disabled:n,children:a.jsx(mr,{className:`w-4 h-4 ${n?"animate-spin":""}`})}),a.jsx(U,{size:"sm",variant:"ghost",onClick:()=>e(!1),children:a.jsx(Br,{className:"w-4 h-4"})})]})]}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Press Ctrl+Shift+D to toggle"})]}),a.jsx(Re,{className:"space-y-3",children:n?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(mr,{className:"w-8 h-8 mx-auto text-slate-400 animate-spin mb-2"}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Loading stats..."})]}):t?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-3 rounded-lg",children:[a.jsx(is,{className:"w-4 h-4 text-slate-600 mb-1"}),a.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Total Items"}),a.jsx("p",{className:"text-xl text-slate-900 dark:text-white",children:t.totalItems})]}),a.jsxs("div",{className:"bg-emerald-100 dark:bg-emerald-950 p-3 rounded-lg",children:[a.jsx("p",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:"Valid"}),a.jsx("p",{className:"text-xl text-emerald-900 dark:text-emerald-100",children:t.validProperties})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(ke,{className:"bg-amber-600",children:["Pending: ",t.pendingCount]}),a.jsxs(ke,{className:"bg-emerald-600",children:["Approved: ",t.approvedCount]}),a.jsxs(ke,{className:"bg-red-600",children:["Rejected: ",t.rejectedCount]})]}),a.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-3 rounded-lg",children:[a.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mb-2",children:"System Health"}),t.totalItems===0?a.jsx("p",{className:"text-sm text-amber-600",children:"⚠️ No data in database"}):t.validProperties===0?a.jsx("p",{className:"text-sm text-red-600",children:"❌ Data quality issue"}):t.approvedCount===0?a.jsx("p",{className:"text-sm text-amber-600",children:"⏱ Awaiting approvals"}):a.jsx("p",{className:"text-sm text-emerald-600",children:"✅ System operational"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(U,{size:"sm",variant:"outline",className:"flex-1 text-xs",onClick:()=>console.log("Full diagnostic data:",t),children:"Log Full Data"}),a.jsx(U,{size:"sm",variant:"outline",className:"flex-1 text-xs",onClick:()=>{navigator.clipboard.writeText(JSON.stringify(t,null,2)),alert("Debug data copied to clipboard!")},children:"Copy Data"})]}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 p-2 rounded text-xs",children:a.jsxs("p",{className:"text-blue-900 dark:text-blue-100",children:["💡 ",a.jsx("strong",{children:"Tip:"})," Check browser console for detailed logs"]})})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(is,{className:"w-12 h-12 mx-auto text-slate-400 mb-2"}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Click refresh to load stats"})]})})]})}):a.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:a.jsx(U,{onClick:()=>{e(!0),i()},size:"sm",variant:"outline",className:"bg-white dark:bg-slate-800 shadow-lg",title:"Press Ctrl+Shift+D",children:a.jsx(Da,{className:"w-4 h-4"})})})}var Df=(s,e,t,r,n,o,i,l)=>{let c=document.documentElement,d=["light","dark"];function u(p){(Array.isArray(s)?s:[s]).forEach(g=>{let v=g==="class",x=v&&o?n.map(y=>o[y]||y):n;v?(c.classList.remove(...x),c.classList.add(o&&o[p]?o[p]:p)):c.setAttribute(g,p)}),h(p)}function h(p){l&&d.includes(p)&&(c.style.colorScheme=p)}function f(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)u(r);else try{let p=localStorage.getItem(e)||t,g=i&&p==="system"?f():p;u(g)}catch{}},Mf=m.createContext(void 0),Lf={setTheme:s=>{},themes:[]},Uf=()=>{var s;return(s=m.useContext(Mf))!=null?s:Lf};m.memo(({forcedTheme:s,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:n,defaultTheme:o,value:i,themes:l,nonce:c,scriptProps:d})=>{let u=JSON.stringify([t,e,o,s,l,i,r,n]).slice(1,-1);return m.createElement("script",{...d,suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(${Df.toString()})(${u})`}})});const Ff=({...s})=>{const{theme:e="system"}=Uf();return a.jsx(uh,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...s})};function Bf(){const[s,e]=m.useState("home"),[t,r]=m.useState(""),{user:n,loading:o}=Be(),i=d=>{e(d),r("")};if(E.useEffect(()=>{n?.role},[n]),o)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})});const l=s!=="login"&&s!=="signup"&&s!=="admin-login",c=s!=="admin-login";return a.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col",children:[c&&a.jsx(hh,{onNavigate:i,currentPage:s}),a.jsxs("main",{className:"flex-1",children:[s==="home"&&a.jsx(Mh,{searchQuery:t,onNavigate:i}),s==="properties"&&a.jsx(_f,{}),s==="dashboard"&&(n?.role==="admin"?a.jsx(Pf,{}):a.jsx(Sf,{})),s==="login"&&a.jsx(Af,{onNavigate:i}),s==="signup"&&a.jsx(If,{onNavigate:i}),s==="admin-login"&&a.jsx(Rf,{onNavigate:i})]}),l&&a.jsx(Of,{}),a.jsx(Ff,{}),a.jsx($f,{})]})}function zf(){return a.jsx(Ti,{children:a.jsx(Pi,{children:a.jsx(Qc,{children:a.jsx(Bf,{})})})})}Ei.createRoot(document.getElementById("root")).render(a.jsx(zf,{}));
